import{bm as oe,l as y,j as $,N as ce,a as de,e as Q,f as h,g as X,w,b as f,y as Z,av as W,d as u,a3 as J,u as o,ap as q,t as Y,c as x,r as A,F as H,n as T,az as ue,dd as ee,dj as fe,K as me,z as K,bl as ie,aI as pe,k as te,J as he,a6 as O,at as U,au as E,a4 as ae,bg as ve,bh as ge,p as N,bi as ye,a5 as se,bj as be,bf as le}from"./index-85632e04.js";function L(...a){return new Date(...a)}function nt(a){return!a||a.toString()==="Invalid Date"?"":oe(a).set("hour",0).set("minute",0).set("second",0).set("millisecond",0).format("YYYY-MM-DD")}function R(a,i){let n=1;i<0&&(n=-1,i=Math.abs(i));const r=[];for(;i;)a=L(a.getFullYear(),a.getMonth(),a.getDate()+n),r.push(a),i--;return n===-1?r.reverse():r}function xe(a,i){const r=[31,28,31,30,31,30,31,31,30,31,30,31][a];return a===1&&_e(i)?29:r}function _e(a){return a%400===0?!0:a%100===0?!1:a%4===0}function ke(){const a=y(0),i=y(0),n=$(()=>L()),r=$(()=>{if(!(a.value&&i.value))return[];const d=i.value-1,V=a.value,k=L(V,d,1),S=L(V,d+1,0),t=k.getDay(),v=6-S.getDay(),c=R(k,-t),B=R(S,v),b=xe(d,V),s=R(k,b-1);let l=[...c,k,...s,...B];if(l.length<42){const m=l.at(-1);if(m){const g=R(m,42-l.length);l=l.concat(...g)}}return l}),_=$(()=>{const d=[],V=r.value.slice();for(;V.length;){const k=V.splice(0,7);d.push(k)}return d}),C=$(()=>{if(!(a.value&&i.value))return"";const d=L(a.value,i.value-1,1);return`${d.toLocaleString("en-US",{month:"long"})}, ${d.getFullYear()}`});function j(){I(-1)}function P(){I(1)}function I(d){i.value=i.value+d,i.value<1&&(i.value=12,a.value=a.value-1),i.value>12&&(i.value=1,a.value=a.value+1)}return{currentYear:a,currentMonth:i,today:n,dates:r,datesAsWeeks:_,formattedMonth:C,prevMonth:j,nextMonth:P,changeMonth:I}}const we={class:"flex items-center p-1 text-ink-gray-4"},Ce={class:"flex-1 text-center text-base font-medium text-ink-gray-6"},Me={class:"flex items-center justify-center gap-1 p-1"},Ve={class:"flex flex-col items-center justify-center p-1 text-ink-gray-8"},De={class:"flex items-center text-xs uppercase"},$e=["onClick"],Se={class:"flex items-center justify-around gap-2 p-1"},Ye={class:"flex flex-col items-center justify-center"},je={class:"slider flex min-h-4 items-center justify-center"},Ie={class:"slider flex min-h-4 items-center justify-center"},Be={class:"slider flex min-h-4 items-center justify-center"},ze={class:"flex justify-end p-1"},Le=ce({__name:"DateTimePicker",props:{value:{},modelValue:{},placeholder:{},formatter:{type:Function},readonly:{type:Boolean},inputClass:{},placement:{}},emits:["update:modelValue","change"],setup(a,{emit:i}){const n=a,r=i,{currentYear:_,currentMonth:C,today:j,datesAsWeeks:P,formattedMonth:I,prevMonth:d,nextMonth:V}=ke(),k=$(()=>{var p,z,M;let e="mt-2";return(p=n.placement)!=null&&p.startsWith("top")?e="mb-2":(z=n.placement)!=null&&z.startsWith("left")?e="mr-2":(M=n.placement)!=null&&M.startsWith("right")&&(e="ml-2"),e}),S=y(0),t=y(0),v=y(0),c=$(()=>{let e=n.value?n.value:n.modelValue;return e?ee(e).format("YYYY-MM-DD HH:mm:ss"):""});function B(){let e=c.value?L(c.value):L();b(e)}function b(e,p=!1){p&&(e=ee(e),S.value=e.hour(),t.value=e.minute(),v.value=e.second());let z=e?fe(s(e)).format("YYYY-MM-DD HH:mm:ss"):"";r("change",z),r("update:modelValue",z)}function s(e){return!e||e.toString()==="Invalid Date"?"":oe(e).set("hour",S.value).set("minute",t.value).set("second",v.value).format("YYYY-MM-DD HH:mm:ss")}function l(e){return e.toString().padStart(2,"0")}function m(e){e=L(e),S.value=e.getHours(),t.value=e.getMinutes(),v.value=e.getSeconds(),b(e)}function g(){let e=c.value?L(c.value):L();e.toString()==="Invalid Date"&&(e=L()),_.value=e.getFullYear(),C.value=e.getMonth()+1,S.value=e.getHours(),t.value=e.getMinutes(),v.value=e.getSeconds()}return de(()=>g()),(e,p)=>{const z=Q("LucideCalendar");return h(),X(ue,{onOpen:g,class:"flex w-full [&>div:first-child]:w-full",placement:e.placement},{target:w(({togglePopover:M})=>[f(W,Z({readonly:"",type:"text","icon-left":"calendar",placeholder:e.placeholder,value:c.value&&e.formatter?e.formatter(c.value):c.value,onFocus:D=>e.readonly?null:M(),class:["w-full",e.inputClass]},e.$attrs),{prefix:w(()=>[f(z,{class:"size-4"})]),_:2},1040,["placeholder","value","onFocus","class"])]),body:w(({togglePopover:M})=>[u("div",{class:T(["w-fit select-none text-base text-ink-gray-9 divide-y divide-outline-gray-modals rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none",k.value])},[u("div",we,[f(o(q),{variant:"ghost",class:"h-7 w-7",onClick:o(d)},{default:w(()=>[f(J,{"stroke-width":2,name:"chevron-left",class:"h-4 w-4"})]),_:1},8,["onClick"]),u("div",Ce,Y(o(I)),1),f(o(q),{variant:"ghost",class:"h-7 w-7",onClick:o(V)},{default:w(()=>[f(J,{"stroke-width":2,name:"chevron-right",class:"h-4 w-4"})]),_:1},8,["onClick"])]),u("div",Me,[f(W,{class:"text-sm",type:"text",value:c.value,onChange:D=>{m(D.target.value),M()}},null,8,["value","onChange"]),f(o(q),{label:"Now",class:"text-sm",onClick:()=>{b(o(L)(),!0),M()}},null,8,["onClick"])]),u("div",Ve,[u("div",De,[(h(),x(H,null,A(["s","m","t","w","t","f","s"],(D,G)=>u("div",{class:"flex h-6 w-8 items-center justify-center text-center",key:G},Y(D),1)),64))]),(h(!0),x(H,null,A(o(P),(D,G)=>(h(),x("div",{class:"flex items-center",key:G},[(h(!0),x(H,null,A(D,F=>(h(),x("div",{key:s(F),class:T(["flex h-8 w-8 cursor-pointer items-center justify-center rounded hover:bg-surface-gray-2",{"text-ink-gray-3":F.getMonth()!==o(C)-1,"font-extrabold text-ink-gray-9":s(F)===s(o(j)),"bg-surface-gray-6 text-ink-white hover:bg-surface-gray-6":s(F)===c.value}]),onClick:()=>{b(F),M()}},Y(F.getDate()),11,$e))),128))]))),128))]),u("div",Se,[u("div",null,Y(l(S.value))+" : "+Y(l(t.value))+" : "+Y(l(v.value)),1),u("div",Ye,[u("div",je,[f(W,{modelValue:S.value,"onUpdate:modelValue":p[0]||(p[0]=D=>S.value=D),name:"hours",type:"range",min:"0",max:"23",step:"1",onChange:()=>{B(),M()}},null,8,["modelValue","onChange"])]),u("div",Ie,[f(W,{modelValue:t.value,"onUpdate:modelValue":p[1]||(p[1]=D=>t.value=D),name:"minutes",type:"range",min:"0",max:"59",step:"1",onChange:()=>{B(),M()}},null,8,["modelValue","onChange"])]),u("div",Be,[f(W,{modelValue:v.value,"onUpdate:modelValue":p[2]||(p[2]=D=>v.value=D),name:"seconds",type:"range",min:"0",max:"59",step:"1",onChange:()=>{B(),M()}},null,8,["modelValue","onChange"])])])]),u("div",ze,[f(o(q),{label:"Clear",class:"text-sm",onClick:()=>{b(""),M()}},null,8,["onClick"])])],2)]),_:1},8,["placement"])}}}),rt=me(Le,[["__scopeId","data-v-df30d48a"]]),Pe=y(!1),Oe=y(!1);K({url:"crm.api.whatsapp.is_whatsapp_enabled",cache:"Is Whatsapp Enabled",auto:!0,onSuccess:a=>{Pe.value=!!a}});K({url:"crm.api.whatsapp.is_whatsapp_installed",cache:"Is Whatsapp Installed",auto:!0,onSuccess:a=>{Oe.value=!!a}});const Fe=y(!1),ne=y(!1),re=y(!1),We=y("");K({url:"crm.integrations.api.is_call_integration_enabled",cache:"Is Call Integration Enabled",auto:!0,onSuccess:a=>{ne.value=!!a.twilio_enabled,re.value=!!a.exotel_enabled,We.value=a.default_calling_medium,Fe.value=ne.value||re.value}});const ot=y(!1),ut=$(()=>window.innerWidth<768),it=y(!1),ct=y(""),dt=y(!1),Ae={class:"w-full"},He=["onClick"],Ue={key:0,class:"flex text-base leading-5 items-center truncate"},Ee={class:"truncate"},Ne={key:1,class:"absolute text-ink-gray-4 text-left truncate w-full pr-7"},Te={class:"relative mt-1 rounded-lg bg-surface-modal text-base shadow-2xl"},qe={class:"relative px-1.5 pt-1.5"},Re={key:0,class:"truncate bg-surface-modal px-2.5 py-1.5 text-sm font-medium text-ink-gray-5"},Je={class:"flex-1 truncate text-ink-gray-7"},Ke={key:0,class:"my-1.5 rounded-md px-2.5 py-1.5 text-base text-ink-gray-5"},Ge={key:0,class:"border-t border-outline-gray-modals p-1.5"},Qe={__name:"Autocomplete",props:{modelValue:{type:String,default:""},options:{type:Array,default:()=>[]},size:{type:String,default:"md"},variant:{type:String,default:"subtle"},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0}},emits:["update:modelValue","update:query","change"],setup(a,{expose:i,emit:n}){const r=a,_=n,C=y(""),j=y(!1),P=y(null),I=ie(),d=pe(),V=$(()=>"value"in I),k=$({get(){return V.value?I.value:r.modelValue},set(s){C.value="",s&&(j.value=!1),_(V.value?"change":"update:modelValue",s)}});function S(){j.value=!1}const t=$(()=>{var l;return!r.options||r.options.length==0?[]:((l=r.options[0])!=null&&l.group?r.options:[{group:"",items:r.options}]).map((m,g)=>({key:g,group:m.group,hideLabel:m.hideLabel||!1,items:r.filterable?v(m.items):m.items})).filter(m=>m.items.length>0)});function v(s){return C.value?s.filter(l=>[l.label,l.value].some(g=>(g||"").toString().toLowerCase().includes(C.value.toLowerCase()))):s}function c(s){if(typeof s=="string"){let m=t.value.flatMap(g=>g.items).find(g=>g.value===s);return(m==null?void 0:m.label)||s}return s==null?void 0:s.label}te(C,s=>{_("update:query",s)}),te(j,s=>{s&&he(()=>{P.value.el.focus()})});const B=$(()=>r.disabled?"text-ink-gray-5":"text-ink-gray-8"),b=$(()=>{let s={sm:"text-base rounded h-7",md:"text-base rounded h-8",lg:"text-lg rounded-md h-10",xl:"text-xl rounded-md h-10"}[r.size],l={sm:"py-1.5 px-2",md:"py-1.5 px-2.5",lg:"py-1.5 px-3",xl:"py-1.5 px-3"}[r.size],m=r.disabled?"disabled":r.variant,g={subtle:"border border-gray-100 bg-surface-gray-2 placeholder-ink-gray-4 hover:border-outline-gray-modals hover:bg-surface-gray-3 focus:bg-surface-white focus:border-outline-gray-4 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3",outline:"border border-outline-gray-2 bg-surface-white placeholder-ink-gray-4 hover:border-outline-gray-3 hover:shadow-sm focus:bg-surface-white focus:border-outline-gray-4 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3",disabled:["border bg-surface-menu-bar placeholder-ink-gray-3",r.variant==="outline"?"border-outline-gray-2":"border-transparent"]}[m];return[s,l,g,B.value,"transition-colors w-full"]});return i({query:C}),(s,l)=>(h(),X(o(be),{modelValue:k.value,"onUpdate:modelValue":l[3]||(l[3]=m=>k.value=m),nullable:""},{default:w(({open:m})=>[f(o(ue),{class:"w-full",show:j.value,"onUpdate:show":l[2]||(l[2]=g=>j.value=g)},{target:w(({open:g,togglePopover:e})=>[O(s.$slots,"target",U(E({open:g,togglePopover:e,isOpen:j.value,selectedValue:k.value,displayValue:c})),()=>[u("div",Ae,[u("button",{class:T(["relative flex h-7 w-full items-center justify-between gap-2 rounded bg-surface-gray-2 px-2 py-1 transition-colors hover:bg-surface-gray-3 border border-transparent focus:border-outline-gray-4 focus:outline-none focus:ring-2 focus:ring-outline-gray-3",b.value]),onClick:()=>e()},[k.value?(h(),x("div",Ue,[O(s.$slots,"prefix"),u("span",Ee,Y(c(k.value)),1)])):(h(),x("div",Ne,Y(a.placeholder||""),1)),f(o(J),{name:"chevron-down",class:"absolute h-4 w-4 text-ink-gray-5 right-2","aria-hidden":"true"})],10,He)])])]),body:w(({isOpen:g})=>{var e;return[ae(u("div",null,[u("div",Te,[u("div",qe,[f(o(ve),{ref_key:"search",ref:P,class:"form-input w-full focus:bg-surface-gray-3 hover:bg-surface-gray-4 text-ink-gray-8",type:"text",onChange:l[0]||(l[0]=p=>{C.value=p.target.value}),value:C.value,autocomplete:"off",placeholder:"Search"},null,8,["value"]),u("button",{class:"absolute right-1.5 inline-flex h-7 w-7 items-center justify-center",onClick:l[1]||(l[1]=p=>k.value=null)},[f(o(J),{name:"x",class:"w-4 text-ink-gray-8"})])]),f(o(ge),{class:"my-1 max-h-[12rem] overflow-y-auto p-1.5 pt-0",static:""},{default:w(()=>[(h(!0),x(H,null,A(t.value,p=>ae((h(),x("div",{class:"mt-1.5",key:p.key},[p.group&&!p.hideLabel?(h(),x("div",Re,Y(p.group),1)):N("",!0),(h(!0),x(H,null,A(p.items,z=>(h(),X(o(ye),{as:"template",key:z.value,value:z},{default:w(({active:M,selected:D})=>[u("li",{class:T(["flex cursor-pointer items-center rounded px-2.5 py-1.5 text-base",{"bg-surface-gray-3":M}])},[O(s.$slots,"item-prefix",Z({ref_for:!0},{active:M,selected:D,option:z})),O(s.$slots,"item-label",Z({ref_for:!0},{active:M,selected:D,option:z}),()=>[u("div",Je,Y(z.label),1)])],2)]),_:2},1032,["value"]))),128))])),[[se,p.items.length>0]])),128)),t.value.length==0?(h(),x("li",Ke," No results found ")):N("",!0)]),_:3}),o(d).footer?(h(),x("div",Ge,[O(s.$slots,"footer",U(E({value:(e=P.value)==null?void 0:e.el._value,close:S})))])):N("",!0)])],512),[[se,g]])]}),_:3},8,["show"])]),_:3},8,["modelValue"]))}},Xe={class:"space-y-1.5 p-[2px] -m-[2px]"},Ze={key:0,class:"flex flex-col gap-1"},et={class:"flex-1 font-semibold truncate text-ink-gray-7"},tt={class:"flex-1 text-sm truncate text-ink-gray-5"},at={key:1,class:"flex-1 truncate text-ink-gray-7"},st={key:0},ft={__name:"Link",props:{doctype:{type:String,required:!0},filters:{type:[Array,Object,String],default:[]},modelValue:{type:String,default:""},hideMe:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(a,{emit:i}){const n=a,r=i,_=ie(),C=$(()=>"value"in _),j=$({get:()=>C.value?_.value:n.modelValue,set:t=>(t==null?void 0:t.value)&&r(C.value?"change":"update:modelValue",t==null?void 0:t.value)}),P=y(null),I=y("");le(()=>{var t;return(t=P.value)==null?void 0:t.query},t=>{t=t||"",I.value!==t&&(I.value=t,V(t))},{debounce:300,immediate:!0}),le(()=>n.doctype,()=>V(""),{debounce:300,immediate:!0});const d=K({url:"frappe.desk.search.search_link",cache:[n.doctype,I.value,n.hideMe,n.filters],method:"POST",params:{txt:I.value,doctype:n.doctype,filters:n.filters},transform:t=>{let v=t.map(c=>({label:c.label||c.value,value:c.value,description:c.description}));return!n.hideMe&&n.doctype=="User"&&v.unshift({label:"@me",value:"@me"}),v}});function V(t){var v,c,B;n.doctype&&((v=d.data)!=null&&v.length&&t===((c=d.params)==null?void 0:c.txt)&&n.doctype===((B=d.params)==null?void 0:B.doctype)||(d.update({params:{txt:t,doctype:n.doctype,filters:n.filters}}),d.reload()))}function k(t){r(C.value?"change":"update:modelValue",""),t()}const S=$(()=>[{sm:"text-xs",md:"text-base"}[_.size||"sm"],"text-ink-gray-5"]);return(t,v)=>{const c=Q("FeatherIcon"),B=Q("Button");return h(),x("div",Xe,[o(_).label?(h(),x("label",{key:0,class:T(["block",S.value])},Y(t.__(o(_).label)),3)):N("",!0),f(Qe,{ref_key:"autocomplete",ref:P,options:o(d).data,modelValue:j.value,"onUpdate:modelValue":v[0]||(v[0]=b=>j.value=b),size:o(_).size||"sm",variant:o(_).variant,placeholder:o(_).placeholder,filterable:!1},{target:w(({open:b,togglePopover:s})=>[O(t.$slots,"target",U(E({open:b,togglePopover:s})))]),prefix:w(()=>[O(t.$slots,"prefix")]),"item-prefix":w(({active:b,selected:s,option:l})=>[O(t.$slots,"item-prefix",U(E({active:b,selected:s,option:l})))]),"item-label":w(({active:b,selected:s,option:l})=>[O(t.$slots,"item-label",U(E({active:b,selected:s,option:l})),()=>[l.description?(h(),x("div",Ze,[u("div",et,Y(l.label),1),u("div",tt,Y(l.description),1)])):(h(),x("div",at,Y(l.label),1))])]),footer:w(({value:b,close:s})=>[o(_).onCreate?(h(),x("div",st,[f(B,{variant:"ghost",class:"w-full !justify-start",label:t.__("Create New"),onClick:()=>o(_).onCreate(b,s)},{prefix:w(()=>[f(c,{name:"plus",class:"h-4"})]),_:2},1032,["label","onClick"])])):N("",!0),u("div",null,[f(B,{variant:"ghost",class:"w-full !justify-start",label:t.__("Clear"),onClick:()=>k(s)},{prefix:w(()=>[f(c,{name:"x",class:"h-4"})]),_:2},1032,["label","onClick"])])]),_:3},8,["options","modelValue","size","variant","placeholder"])])}}};export{rt as D,ft as _,Qe as a,L as b,Fe as c,We as d,Oe as e,ct as f,nt as g,dt as h,ut as i,re as j,ot as m,it as s,ne as t,ke as u,Pe as w};
//# sourceMappingURL=Link-4317fd36.js.map
