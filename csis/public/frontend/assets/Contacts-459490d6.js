import{_ as j,a as O}from"./ViewControls-20f61d89.js";import{_ as T}from"./CustomActions-4107b940.js";import{C as R}from"./ContactsIcon-830ef67e.js";import{_ as W}from"./LayoutHeader-448e93da.js";import{C as c}from"./ContactModal-e2b879e7.js";import{_ as q}from"./QuickEntryModal-157d8856.js";import{_ as G}from"./AddressModal-fd287daa.js";import{_ as H}from"./ContactsListView-b9f45afc.js";import{b as J,f as D,t as K}from"./index-31644aa3.js";import{o as X}from"./organizations-50691aa9.js";import{l as u,j as Y,c as E,b as s,w as v,g as F,d as P,t as Z,p as U,F as h,E as ee,e as B,f as p}from"./index-85632e04.js";import"./FadedScrollableDiv-f3f408b5.js";import"./Dropdown.vue_vue_type_script_setup_true_lang-4f930b23.js";import"./IconPicker-0c2832fa.js";import"./Popover-4a1551e7.js";import"./Link-4317fd36.js";import"./DragVerticalIcon-e7d3e46c.js";import"./PinIcon-6c6ca639.js";import"./DetailsIcon-404b02bf.js";import"./settings-5fcce07e.js";import"./Section-7d029c27.js";import"./IndicatorIcon-99f76624.js";import"./ListRows-e4885bb7.js";import"./AssignmentModal-f44425e3.js";import"./PhoneIcon-cb5df69f.js";import"./ListFooter-fc834b42.js";import"./label-f9f1f609.js";const te={key:1,class:"flex h-full items-center justify-center"},le={class:"flex flex-col items-center gap-3 text-xl font-medium text-ink-gray-4"},Ee={__name:"Contacts",setup(ae){const{getFormattedPercent:N,getFormattedFloat:w,getFormattedCurrency:Q}=J("Contact"),{getOrganization:S}=X(),f=u(!1),m=u(!1),g=u(!1),C=u(null),a=u({}),y=u({}),V=u(1),k=u(1),_=u(20),r=u(null),b=Y(()=>{var n,t,d;return!((t=(n=a.value)==null?void 0:n.data)!=null&&t.data)||!["list","group_by"].includes(a.value.data.view_type)?[]:(d=a.value)==null?void 0:d.data.data.map(o=>{var M;let e={};return(M=a.value)==null||M.data.rows.forEach(l=>{var A,$,z,L;e[l]=o[l];let i=(z=($=(A=a.value)==null?void 0:A.data.columns)==null?void 0:$.find(x=>(x.key||x.value)==l))==null?void 0:z.type;i&&["Date","Datetime"].includes(i)&&!["modified","creation"].includes(l)&&(e[l]=D(o[l],"",!0,i=="Datetime")),i&&i=="Currency"&&(e[l]=Q(l,o)),i&&i=="Float"&&(e[l]=w(l,o)),i&&i=="Percent"&&(e[l]=N(l,o)),l=="full_name"?e[l]={label:o.full_name,image_label:o.full_name,image:o.image}:l=="company_name"?e[l]={label:o.company_name,logo:(L=S(o.company_name))==null?void 0:L.organization_logo}:["modified","creation"].includes(l)&&(e[l]={label:D(o[l]),timeAgo:__(K(o[l]))})}),e})});async function I(n){n&&(n=await ee("frappe.client.get",{doctype:"Address",name:n})),g.value=!0,y.value=n||{}}return(n,t)=>{const d=B("FeatherIcon"),o=B("Button");return p(),E(h,null,[s(W,null,{"left-header":v(()=>[s(O,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),routeName:"Contacts"},null,8,["modelValue"])]),"right-header":v(()=>{var e;return[(e=C.value)!=null&&e.customListActions?(p(),F(T,{key:0,actions:C.value.customListActions},null,8,["actions"])):U("",!0),s(o,{variant:"solid",label:n.__("Create"),onClick:t[1]||(t[1]=M=>f.value=!0)},{prefix:v(()=>[s(d,{name:"plus",class:"h-4"})]),_:1},8,["label"])]}),_:1}),s(j,{ref_key:"viewControls",ref:r,modelValue:a.value,"onUpdate:modelValue":t[2]||(t[2]=e=>a.value=e),loadMore:V.value,"onUpdate:loadMore":t[3]||(t[3]=e=>V.value=e),resizeColumn:k.value,"onUpdate:resizeColumn":t[4]||(t[4]=e=>k.value=e),updatedPageCount:_.value,"onUpdate:updatedPageCount":t[5]||(t[5]=e=>_.value=e),doctype:"Contact"},null,8,["modelValue","loadMore","resizeColumn","updatedPageCount"]),a.value.data&&b.value.length?(p(),F(H,{key:0,ref_key:"contactsListView",ref:C,modelValue:a.value.data.page_length_count,"onUpdate:modelValue":t[6]||(t[6]=e=>a.value.data.page_length_count=e),list:a.value,"onUpdate:list":t[7]||(t[7]=e=>a.value=e),rows:b.value,columns:a.value.data.columns,options:{showTooltip:!1,resizeColumn:!0,rowCount:a.value.data.row_count,totalCount:a.value.data.total_count},onLoadMore:t[8]||(t[8]=()=>V.value++),onColumnWidthUpdated:t[9]||(t[9]=()=>k.value++),onUpdatePageCount:t[10]||(t[10]=e=>_.value=e),onApplyFilter:t[11]||(t[11]=e=>r.value.applyFilter(e)),onApplyLikeFilter:t[12]||(t[12]=e=>r.value.applyLikeFilter(e)),onLikeDoc:t[13]||(t[13]=e=>r.value.likeDoc(e)),onSelectionsChanged:t[14]||(t[14]=e=>r.value.updateSelections(e))},null,8,["modelValue","list","rows","columns","options"])):a.value.data?(p(),E("div",te,[P("div",le,[s(R,{class:"h-10 w-10"}),P("span",null,Z(n.__("No {0} Found",[n.__("Contacts")])),1),s(o,{label:n.__("Create"),onClick:t[15]||(t[15]=e=>f.value=!0)},{prefix:v(()=>[s(d,{name:"plus",class:"h-4"})]),_:1},8,["label"])])])):U("",!0),s(c,{modelValue:f.value,"onUpdate:modelValue":t[16]||(t[16]=e=>f.value=e),showQuickEntryModal:m.value,"onUpdate:showQuickEntryModal":t[17]||(t[17]=e=>m.value=e),contact:{},onOpenAddressModal:t[18]||(t[18]=e=>I(e))},null,8,["modelValue","showQuickEntryModal"]),m.value?(p(),F(q,{key:2,modelValue:m.value,"onUpdate:modelValue":t[19]||(t[19]=e=>m.value=e),doctype:"Contact"},null,8,["modelValue"])):U("",!0),s(G,{modelValue:g.value,"onUpdate:modelValue":t[20]||(t[20]=e=>g.value=e),address:y.value,"onUpdate:address":t[21]||(t[21]=e=>y.value=e)},null,8,["modelValue","address"])],64)}}};export{Ee as default};
//# sourceMappingURL=Contacts-459490d6.js.map
