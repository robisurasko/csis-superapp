{"version":3,"file":"MobileContact-275036ed.js","sources":["../../../../frontend/src/pages/MobileContact.vue"],"sourcesContent":["<template>\n  <LayoutHeader v-if=\"contact.data\">\n    <header\n      class=\"relative flex h-10.5 items-center justify-between gap-2 py-2.5 pl-2\"\n    >\n      <Breadcrumbs :items=\"breadcrumbs\">\n        <template #prefix=\"{ item }\">\n          <Icon v-if=\"item.icon\" :icon=\"item.icon\" class=\"mr-2 h-4\" />\n        </template>\n      </Breadcrumbs>\n    </header>\n  </LayoutHeader>\n  <div v-if=\"contact.data\" class=\"flex flex-col h-full overflow-hidden\">\n    <FileUploader @success=\"changeContactImage\" :validateFile=\"validateFile\">\n      <template #default=\"{ openFileSelector, error }\">\n        <div class=\"flex flex-col items-start justify-start gap-4 p-4\">\n          <div class=\"flex gap-4 items-center\">\n            <div class=\"group relative h-14.5 w-14.5\">\n              <Avatar\n                size=\"3xl\"\n                class=\"h-14.5 w-14.5\"\n                :label=\"contact.data.full_name\"\n                :image=\"contact.data.image\"\n              />\n              <component\n                :is=\"contact.data.image ? Dropdown : 'div'\"\n                v-bind=\"\n                  contact.data.image\n                    ? {\n                        options: [\n                          {\n                            icon: 'upload',\n                            label: contact.data.image\n                              ? __('Change image')\n                              : __('Upload image'),\n                            onClick: openFileSelector,\n                          },\n                          {\n                            icon: 'trash-2',\n                            label: __('Remove image'),\n                            onClick: () => changeContactImage(''),\n                          },\n                        ],\n                      }\n                    : { onClick: openFileSelector }\n                \"\n                class=\"!absolute bottom-0 left-0 right-0\"\n              >\n                <div\n                  class=\"z-1 absolute bottom-0 left-0 right-0 flex h-14 cursor-pointer items-center justify-center rounded-b-full bg-black bg-opacity-40 pt-5 opacity-0 duration-300 ease-in-out group-hover:opacity-100\"\n                  style=\"\n                    -webkit-clip-path: inset(22px 0 0 0);\n                    clip-path: inset(22px 0 0 0);\n                  \"\n                >\n                  <CameraIcon class=\"h-6 w-6 cursor-pointer text-white\" />\n                </div>\n              </component>\n            </div>\n            <div class=\"flex flex-col gap-2 truncate\">\n              <div class=\"truncate text-lg font-medium text-ink-gray-9\">\n                <span v-if=\"contact.data.salutation\">\n                  {{ contact.data.salutation + '. ' }}\n                </span>\n                <span>{{ contact.data.full_name }}</span>\n              </div>\n              <div class=\"flex items-center gap-1.5\">\n                <Button\n                  v-if=\"contact.data.actual_mobile_no\"\n                  :label=\"__('Make Call')\"\n                  size=\"sm\"\n                  @click=\"\n                    callEnabled && makeCall(contact.data.actual_mobile_no)\n                  \"\n                >\n                  <template #prefix>\n                    <PhoneIcon class=\"h-4 w-4\" />\n                  </template>\n                </Button>\n                <Button\n                  :label=\"__('Delete')\"\n                  theme=\"red\"\n                  size=\"sm\"\n                  @click=\"deleteContact\"\n                >\n                  <template #prefix>\n                    <FeatherIcon name=\"trash-2\" class=\"h-4 w-4\" />\n                  </template>\n                </Button>\n                <Avatar\n                  v-if=\"contact.data.company_name\"\n                  size=\"md\"\n                  :label=\"contact.data.company_name\"\n                  :image=\"\n                    getOrganization(contact.data.company_name)\n                      ?.organization_logo\n                  \"\n                />\n              </div>\n              <ErrorMessage :message=\"__(error)\" />\n            </div>\n          </div>\n        </div>\n      </template>\n    </FileUploader>\n    <Tabs as=\"div\" v-model=\"tabIndex\" :tabs=\"tabs\" class=\"overflow-auto\">\n      <TabList class=\"!px-4\" v-slot=\"{ tab, selected }\">\n        <button\n          v-if=\"tab.name == 'Deals'\"\n          class=\"group flex items-center gap-2 border-b border-transparent py-2.5 text-base text-ink-gray-5 duration-300 ease-in-out hover:border-outline-gray-3 hover:text-ink-gray-9\"\n          :class=\"{ 'text-ink-gray-9': selected }\"\n        >\n          <component v-if=\"tab.icon\" :is=\"tab.icon\" class=\"h-5\" />\n          {{ __(tab.label) }}\n          <Badge\n            class=\"group-hover:bg-surface-gray-7\"\n            :class=\"[selected ? 'bg-surface-gray-7' : 'bg-gray-600']\"\n            variant=\"solid\"\n            theme=\"gray\"\n            size=\"sm\"\n          >\n            {{ tab.count }}\n          </Badge>\n        </button>\n      </TabList>\n      <TabPanel v-slot=\"{ tab }\">\n        <div v-if=\"tab.name == 'Details'\">\n          <div\n            v-if=\"sections.data\"\n            class=\"flex flex-1 flex-col justify-between overflow-hidden\"\n          >\n            <SidePanelLayout\n              :sections=\"sections.data\"\n              doctype=\"Contact\"\n              :docname=\"contact.data.name\"\n              @reload=\"sections.reload\"\n            />\n          </div>\n        </div>\n        <DealsListView\n          v-else-if=\"tab.label === 'Deals' && rows.length\"\n          class=\"mt-4\"\n          :rows=\"rows\"\n          :columns=\"columns\"\n          :options=\"{ selectable: false, showTooltip: false }\"\n        />\n        <div\n          v-if=\"tab.label === 'Deals' && !rows.length\"\n          class=\"grid flex-1 place-items-center text-xl font-medium text-ink-gray-4\"\n        >\n          <div class=\"flex flex-col items-center justify-center space-y-3\">\n            <component :is=\"tab.icon\" class=\"!h-10 !w-10\" />\n            <div>{{ __('No {0} Found', [__(tab.label)]) }}</div>\n          </div>\n        </div>\n      </TabPanel>\n    </Tabs>\n  </div>\n  <AddressModal v-model=\"showAddressModal\" v-model:address=\"_address\" />\n</template>\n\n<script setup>\nimport Icon from '@/components/Icon.vue'\nimport SidePanelLayout from '@/components/SidePanelLayout.vue'\nimport LayoutHeader from '@/components/LayoutHeader.vue'\nimport DetailsIcon from '@/components/Icons/DetailsIcon.vue'\nimport PhoneIcon from '@/components/Icons/PhoneIcon.vue'\nimport CameraIcon from '@/components/Icons/CameraIcon.vue'\nimport DealsIcon from '@/components/Icons/DealsIcon.vue'\nimport DealsListView from '@/components/ListViews/DealsListView.vue'\nimport AddressModal from '@/components/Modals/AddressModal.vue'\nimport { formatDate, timeAgo } from '@/utils'\nimport { getView } from '@/utils/view'\nimport { getSettings } from '@/stores/settings'\nimport { getMeta } from '@/stores/meta'\nimport { globalStore } from '@/stores/global.js'\nimport { usersStore } from '@/stores/users.js'\nimport { organizationsStore } from '@/stores/organizations.js'\nimport { statusesStore } from '@/stores/statuses'\nimport { callEnabled } from '@/composables/settings'\nimport {\n  Breadcrumbs,\n  Avatar,\n  FileUploader,\n  Tabs,\n  TabList,\n  TabPanel,\n  call,\n  createResource,\n  usePageMeta,\n  Dropdown,\n  toast,\n} from 'frappe-ui'\nimport { ref, computed, h } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\n\nconst { brand } = getSettings()\nconst { $dialog, makeCall } = globalStore()\n\nconst { getUser } = usersStore()\nconst { getOrganization } = organizationsStore()\nconst { getDealStatus } = statusesStore()\nconst { doctypeMeta } = getMeta('Contact')\n\nconst props = defineProps({\n  contactId: {\n    type: String,\n    required: true,\n  },\n})\n\nconst route = useRoute()\nconst router = useRouter()\n\nconst showAddressModal = ref(false)\nconst _contact = ref({})\nconst _address = ref({})\n\nconst contact = createResource({\n  url: 'crm.api.contact.get_contact',\n  cache: ['contact', props.contactId],\n  params: {\n    name: props.contactId,\n  },\n  auto: true,\n  transform: (data) => {\n    return {\n      ...data,\n      actual_mobile_no: data.mobile_no,\n      mobile_no: data.mobile_no,\n    }\n  },\n})\n\nconst breadcrumbs = computed(() => {\n  let items = [{ label: __('Contacts'), route: { name: 'Contacts' } }]\n\n  if (route.query.view || route.query.viewType) {\n    let view = getView(route.query.view, route.query.viewType, 'Contact')\n    if (view) {\n      items.push({\n        label: __(view.label),\n        icon: view.icon,\n        route: {\n          name: 'Contacts',\n          params: { viewType: route.query.viewType },\n          query: { view: route.query.view },\n        },\n      })\n    }\n  }\n\n  items.push({\n    label: title.value,\n    route: { name: 'Contact', params: { contactId: props.contactId } },\n  })\n  return items\n})\n\nconst title = computed(() => {\n  let t = doctypeMeta['Contact']?.title_field || 'name'\n  return contact.data?.[t] || props.contactId\n})\n\nusePageMeta(() => {\n  return {\n    title: title.value,\n    icon: brand.favicon,\n  }\n})\n\nfunction validateFile(file) {\n  let extn = file.name.split('.').pop().toLowerCase()\n  if (!['png', 'jpg', 'jpeg'].includes(extn)) {\n    return __('Only PNG and JPG images are allowed')\n  }\n}\n\nasync function changeContactImage(file) {\n  await call('frappe.client.set_value', {\n    doctype: 'Contact',\n    name: props.contactId,\n    fieldname: 'image',\n    value: file?.file_url || '',\n  })\n  contact.reload()\n}\n\nasync function deleteContact() {\n  $dialog({\n    title: __('Delete contact'),\n    message: __('Are you sure you want to delete this contact?'),\n    actions: [\n      {\n        label: __('Delete'),\n        theme: 'red',\n        variant: 'solid',\n        async onClick(close) {\n          await call('frappe.client.delete', {\n            doctype: 'Contact',\n            name: props.contactId,\n          })\n          close()\n          router.push({ name: 'Contacts' })\n        },\n      },\n    ],\n  })\n}\n\nconst tabIndex = ref(0)\nconst tabs = [\n  {\n    name: 'Details',\n    label: __('Details'),\n    icon: DetailsIcon,\n  },\n  {\n    name: 'Deals',\n    label: __('Deals'),\n    icon: h(DealsIcon, { class: 'h-4 w-4' }),\n    count: computed(() => deals.data?.length),\n  },\n]\n\nconst deals = createResource({\n  url: 'crm.api.contact.get_linked_deals',\n  cache: ['deals', props.contactId],\n  params: { contact: props.contactId },\n  auto: true,\n})\n\nconst rows = computed(() => {\n  if (!deals.data || deals.data == []) return []\n\n  return deals.data.map((row) => getDealRowObject(row))\n})\n\nconst sections = createResource({\n  url: 'crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.get_sidepanel_sections',\n  cache: ['sidePanelSections', 'Contact'],\n  params: { doctype: 'Contact' },\n  auto: true,\n  transform: (data) => computed(() => getParsedSections(data)),\n})\n\nfunction getParsedSections(_sections) {\n  return _sections.map((section) => {\n    section.columns = section.columns.map((column) => {\n      column.fields = column.fields.map((field) => {\n        if (field.fieldname === 'email_id') {\n          return {\n            ...field,\n            type: 'dropdown',\n            options:\n              contact.data?.email_ids?.map((email) => {\n                return {\n                  name: email.name,\n                  value: email.email_id,\n                  selected: email.email_id === contact.data.email_id,\n                  placeholder: 'john@doe.com',\n                  onClick: () => {\n                    _contact.value.email_id = email.email_id\n                    setAsPrimary('email', email.email_id)\n                  },\n                  onSave: (option, isNew) => {\n                    if (isNew) {\n                      createNew('email', option.value)\n                      if (contact.data.email_ids.length === 1) {\n                        _contact.value.email_id = option.value\n                      }\n                    } else {\n                      editOption(\n                        'Contact Email',\n                        option.name,\n                        'email_id',\n                        option.value,\n                      )\n                    }\n                  },\n                  onDelete: async (option, isNew) => {\n                    contact.data.email_ids = contact.data.email_ids.filter(\n                      (email) => email.name !== option.name,\n                    )\n                    !isNew && (await deleteOption('Contact Email', option.name))\n                    if (_contact.value.email_id === option.value) {\n                      if (contact.data.email_ids.length === 0) {\n                        _contact.value.email_id = ''\n                      } else {\n                        _contact.value.email_id = contact.data.email_ids.find(\n                          (email) => email.is_primary,\n                        )?.email_id\n                      }\n                    }\n                  },\n                }\n              }) || [],\n            create: () => {\n              contact.data?.email_ids?.push({\n                name: 'new-1',\n                value: '',\n                selected: false,\n                isNew: true,\n              })\n            },\n          }\n        } else if (field.name === 'mobile_no') {\n          return {\n            ...field,\n            read_only: false,\n            fieldtype: 'dropdown',\n            options:\n              contact.data?.phone_nos?.map((phone) => {\n                return {\n                  name: phone.name,\n                  value: phone.phone,\n                  selected: phone.phone === contact.data.actual_mobile_no,\n                  onClick: () => {\n                    _contact.value.actual_mobile_no = phone.phone\n                    _contact.value.mobile_no = phone.phone\n                    setAsPrimary('mobile_no', phone.phone)\n                  },\n                  onSave: (option, isNew) => {\n                    if (isNew) {\n                      createNew('phone', option.value)\n                      if (contact.data.phone_nos.length === 1) {\n                        _contact.value.actual_mobile_no = option.value\n                      }\n                    } else {\n                      editOption(\n                        'Contact Phone',\n                        option.name,\n                        'phone',\n                        option.value,\n                      )\n                    }\n                  },\n                  onDelete: async (option, isNew) => {\n                    contact.data.phone_nos = contact.data.phone_nos.filter(\n                      (phone) => phone.name !== option.name,\n                    )\n                    !isNew && (await deleteOption('Contact Phone', option.name))\n                    if (_contact.value.actual_mobile_no === option.value) {\n                      if (contact.data.phone_nos.length === 0) {\n                        _contact.value.actual_mobile_no = ''\n                      } else {\n                        _contact.value.actual_mobile_no =\n                          contact.data.phone_nos.find(\n                            (phone) => phone.is_primary_mobile_no,\n                          )?.phone\n                      }\n                    }\n                  },\n                }\n              }) || [],\n            create: () => {\n              contact.data?.phone_nos?.push({\n                name: 'new-1',\n                value: '',\n                selected: false,\n                isNew: true,\n              })\n            },\n          }\n        } else if (field.name === 'address') {\n          return {\n            ...field,\n            create: (value, close) => {\n              _contact.value.address = value\n              _address.value = {}\n              showAddressModal.value = true\n              close()\n            },\n            edit: async (addr) => {\n              _address.value = await call('frappe.client.get', {\n                doctype: 'Address',\n                name: addr,\n              })\n              showAddressModal.value = true\n            },\n          }\n        } else {\n          return field\n        }\n      })\n      return column\n    })\n    return section\n  })\n}\n\nasync function setAsPrimary(field, value) {\n  let d = await call('crm.api.contact.set_as_primary', {\n    contact: contact.data.name,\n    field,\n    value,\n  })\n  if (d) {\n    contact.reload()\n    toast.success(___('Contact updated'))\n  }\n}\n\nasync function createNew(field, value) {\n  if (!value) return\n  let d = await call('crm.api.contact.create_new', {\n    contact: contact.data.name,\n    field,\n    value,\n  })\n  if (d) {\n    contact.reload()\n    toast.success(__('Contact updated'))\n  }\n}\n\nasync function editOption(doctype, name, fieldname, value) {\n  let d = await call('frappe.client.set_value', {\n    doctype,\n    name,\n    fieldname,\n    value,\n  })\n  if (d) {\n    contact.reload()\n    toast.success(__('Contact updated'))\n  }\n}\n\nasync function deleteOption(doctype, name) {\n  await call('frappe.client.delete', {\n    doctype,\n    name,\n  })\n  await contact.reload()\n  toast.success(__('Contact updated'))\n}\n\nasync function updateField(fieldname, value) {\n  await call('frappe.client.set_value', {\n    doctype: 'Contact',\n    name: props.contactId,\n    fieldname,\n    value,\n  })\n  toast.success(__('Contact updated'))\n\n  contact.reload()\n}\n\nconst { getFormattedCurrency } = getMeta('CRM Deal')\n\nconst columns = computed(() => dealColumns)\n\nfunction getDealRowObject(deal) {\n  return {\n    name: deal.name,\n    organization: {\n      label: deal.organization,\n      logo: getOrganization(deal.organization)?.organization_logo,\n    },\n    annual_revenue: getFormattedCurrency('annual_revenue', deal),\n    status: {\n      label: deal.status,\n      color: getDealStatus(deal.status)?.color,\n    },\n    email: deal.email,\n    mobile_no: deal.mobile_no,\n    deal_owner: {\n      label: deal.deal_owner && getUser(deal.deal_owner).full_name,\n      ...(deal.deal_owner && getUser(deal.deal_owner)),\n    },\n    modified: {\n      label: formatDate(deal.modified),\n      timeAgo: __(timeAgo(deal.modified)),\n    },\n  }\n}\n\nconst dealColumns = [\n  {\n    label: __('Organization'),\n    key: 'organization',\n    width: '11rem',\n  },\n  {\n    label: __('Amount'),\n    key: 'annual_revenue',\n    align: 'right',\n    width: '9rem',\n  },\n  {\n    label: __('Status'),\n    key: 'status',\n    width: '10rem',\n  },\n  {\n    label: __('Email'),\n    key: 'email',\n    width: '12rem',\n  },\n  {\n    label: __('Mobile no'),\n    key: 'mobile_no',\n    width: '11rem',\n  },\n  {\n    label: __('Deal owner'),\n    key: 'deal_owner',\n    width: '10rem',\n  },\n  {\n    label: __('Last modified'),\n    key: 'modified',\n    width: '8rem',\n  },\n]\n</script>\n"],"names":["brand","getSettings","$dialog","makeCall","globalStore","getUser","usersStore","getOrganization","organizationsStore","getDealStatus","statusesStore","doctypeMeta","getMeta","props","__props","route","useRoute","router","useRouter","showAddressModal","ref","_contact","_address","contact","createResource","data","breadcrumbs","computed","items","view","getView","title","t","_a","_b","usePageMeta","validateFile","file","extn","changeContactImage","call","deleteContact","close","tabIndex","tabs","DetailsIcon","h","DealsIcon","deals","rows","row","getDealRowObject","sections","getParsedSections","_sections","section","column","field","email","setAsPrimary","option","isNew","createNew","editOption","deleteOption","_d","_c","phone","value","addr","toast","doctype","name","fieldname","getFormattedCurrency","columns","dealColumns","deal","formatDate","timeAgo"],"mappings":"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"}