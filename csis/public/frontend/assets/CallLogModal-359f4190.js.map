{"version":3,"file":"CallLogModal-359f4190.js","sources":["../../../../frontend/src/components/Icons/DurationIcon.vue","../../../../frontend/src/components/Icons/CheckCircleIcon.vue","../../../../frontend/src/utils/callLog.js","../../../../frontend/src/components/Modals/CallLogDetailModal.vue","../../../../frontend/src/components/Modals/CallLogModal.vue"],"sourcesContent":["<template>\n  <svg\n    width=\"12\"\n    height=\"12\"\n    viewBox=\"0 0 12 12\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <g clip-path=\"url(#clip0_4750_5685)\">\n      <path\n        fill-rule=\"evenodd\"\n        clip-rule=\"evenodd\"\n        d=\"M10.4375 6C10.4375 8.45076 8.45076 10.4375 6 10.4375C3.54924 10.4375 1.5625 8.45076 1.5625 6C1.5625 3.54924 3.54924 1.5625 6 1.5625C8.45076 1.5625 10.4375 3.54924 10.4375 6ZM11.4375 6C11.4375 9.00305 9.00305 11.4375 6 11.4375C2.99695 11.4375 0.5625 9.00305 0.5625 6C0.5625 2.99695 2.99695 0.5625 6 0.5625C9.00305 0.5625 11.4375 2.99695 11.4375 6ZM9.00005 5.50004C9.27619 5.50004 9.50004 5.72391 9.50004 6.00005C9.50004 6.27619 9.27618 6.50004 9.00003 6.50004L6.25001 6.5C5.8358 6.49999 5.50003 6.16421 5.50002 5.75L5.5 3C5.5 2.72386 5.72385 2.5 6 2.5C6.27614 2.5 6.5 2.72385 6.5 3L6.50002 5.5L9.00005 5.50004Z\"\n        fill=\"currentColor\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0_4750_5685\">\n        <rect width=\"12\" height=\"12\" fill=\"white\" />\n      </clipPath>\n    </defs>\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <g clip-path=\"url(#clip0_3668_69185)\">\n      <path\n        fill-rule=\"evenodd\"\n        clip-rule=\"evenodd\"\n        d=\"M14.25 8C14.25 11.4518 11.4518 14.25 8 14.25C4.54822 14.25 1.75 11.4518 1.75 8C1.75 4.54822 4.54822 1.75 8 1.75C11.4518 1.75 14.25 4.54822 14.25 8ZM15.25 8C15.25 12.0041 12.0041 15.25 8 15.25C3.99594 15.25 0.75 12.0041 0.75 8C0.75 3.99594 3.99594 0.75 8 0.75C12.0041 0.75 15.25 3.99594 15.25 8ZM11.2909 5.98482C11.4666 5.77175 11.4363 5.45663 11.2232 5.28096C11.0101 5.1053 10.695 5.13561 10.5193 5.34868L7.07001 9.53239L5.72845 7.79857C5.55946 7.58018 5.24543 7.54012 5.02703 7.70911C4.80863 7.8781 4.76858 8.19214 4.93756 8.41053L6.66217 10.6394C6.7552 10.7596 6.89788 10.831 7.04988 10.8334C7.20188 10.8357 7.3467 10.7688 7.4434 10.6515L11.2909 5.98482Z\"\n        fill=\"currentColor\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0_3668_69185\">\n        <rect width=\"16\" height=\"16\" fill=\"white\" />\n      </clipPath>\n    </defs>\n  </svg>\n</template>\n","import { formatDate, timeAgo } from '@/utils'\nimport { getMeta } from '@/stores/meta'\n\nconst { getFormattedPercent, getFormattedFloat, getFormattedCurrency } =\n  getMeta('CRM Call Log')\n\nexport function getCallLogDetail(row, log, columns = []) {\n  let incoming = log.type === 'Incoming'\n\n  if (row === 'duration') {\n    return {\n      label: log._duration,\n      icon: 'clock',\n    }\n  } else if (row === 'caller') {\n    return {\n      label: log._caller?.label,\n      image: log._caller?.image,\n    }\n  } else if (row === 'receiver') {\n    return {\n      label: log._receiver?.label,\n      image: log._receiver?.image,\n    }\n  } else if (row === 'type') {\n    return {\n      label: log.type,\n      icon: incoming ? 'phone-incoming' : 'phone-outgoing',\n    }\n  } else if (row === 'status') {\n    return {\n      label: statusLabelMap[log.status],\n      color: statusColorMap[log.status],\n    }\n  } else if (['modified', 'creation'].includes(row)) {\n    return {\n      label: formatDate(log[row]),\n      timeAgo: __(timeAgo(log[row])),\n    }\n  }\n\n  let fieldType = columns?.find((col) => (col.key || col.value) == row)?.type\n\n  if (fieldType && ['Date', 'Datetime'].includes(fieldType)) {\n    return formatDate(log[row], '', true, fieldType == 'Datetime')\n  }\n\n  if (fieldType && fieldType == 'Currency') {\n    return getFormattedCurrency(row, log)\n  }\n\n  if (fieldType && fieldType == 'Float') {\n    return getFormattedFloat(row, log)\n  }\n\n  if (fieldType && fieldType == 'Percent') {\n    return getFormattedPercent(row, log)\n  }\n\n  return log[row]\n}\n\nexport const statusLabelMap = {\n  Completed: 'Completed',\n  Initiated: 'Initiated',\n  Busy: 'Declined',\n  Failed: 'Failed',\n  Queued: 'Queued',\n  Canceled: 'Canceled',\n  Ringing: 'Ringing',\n  'No Answer': 'Missed Call',\n  'In Progress': 'In Progress',\n}\n\nexport const statusColorMap = {\n  Completed: 'green',\n  Busy: 'orange',\n  Failed: 'red',\n  Initiated: 'gray',\n  Queued: 'gray',\n  Canceled: 'gray',\n  Ringing: 'gray',\n  'No Answer': 'red',\n  'In Progress': 'blue',\n}\n","<template>\n  <Dialog v-model=\"show\">\n    <template #body>\n      <div class=\"bg-surface-modal px-4 pb-6 pt-5 sm:px-6\">\n        <div class=\"mb-5 flex items-center justify-between\">\n          <div>\n            <h3 class=\"text-2xl font-semibold leading-6 text-ink-gray-9\">\n              {{ __('Call Details') }}\n            </h3>\n          </div>\n          <div class=\"flex items-center gap-1\">\n            <Dropdown\n              :options=\"[\n                {\n                  group: __('Options'),\n                  hideLabel: true,\n                  items: [\n                    {\n                      label: note?.name ? __('Edit note') : __('Add note'),\n                      icon: NoteIcon,\n                      onClick: addEditNote,\n                    },\n                    {\n                      label: task?.name ? __('Edit task') : __('Add task'),\n                      icon: TaskIcon,\n                      onClick: addEditTask,\n                    },\n                  ],\n                },\n              ]\"\n            >\n              <template #default>\n                <Button variant=\"ghost\" icon=\"more-horizontal\" />\n              </template>\n            </Dropdown>\n            <Button\n              v-if=\"isManager() && !isMobileView\"\n              variant=\"ghost\"\n              class=\"w-7\"\n              @click=\"openCallLogModal\"\n            >\n              <EditIcon class=\"h-4 w-4\" />\n            </Button>\n            <Button variant=\"ghost\" class=\"w-7\" @click=\"show = false\">\n              <FeatherIcon name=\"x\" class=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </div>\n        <div class=\"flex flex-col gap-3.5\">\n          <div\n            v-for=\"field in detailFields\"\n            :key=\"field.name\"\n            class=\"flex gap-2 text-base text-ink-gray-8\"\n          >\n            <div class=\"grid size-7 place-content-center\">\n              <component :is=\"field.icon\" />\n            </div>\n            <div class=\"flex min-h-7 w-full items-center gap-2\">\n              <div\n                v-if=\"field.name == 'receiver'\"\n                class=\"flex items-center gap-1\"\n              >\n                <Avatar\n                  :image=\"field.value.caller.image\"\n                  :label=\"field.value.caller.label\"\n                  size=\"sm\"\n                />\n                <div class=\"ml-1 flex flex-col gap-1\">\n                  {{ field.value.caller.label }}\n                </div>\n                <FeatherIcon\n                  name=\"arrow-right\"\n                  class=\"mx-1 h-4 w-4 text-ink-gray-5\"\n                />\n                <Avatar\n                  :image=\"field.value.receiver.image\"\n                  :label=\"field.value.receiver.label\"\n                  size=\"sm\"\n                />\n                <div class=\"ml-1 flex flex-col gap-1\">\n                  {{ field.value.receiver.label }}\n                </div>\n              </div>\n              <Tooltip v-else-if=\"field.tooltip\" :text=\"field.tooltip\">\n                {{ field.value }}\n              </Tooltip>\n              <div class=\"w-full\" v-else-if=\"field.name == 'recording_url'\">\n                <audio\n                  class=\"audio-control w-full\"\n                  controls\n                  :src=\"field.value\"\n                ></audio>\n              </div>\n              <div\n                class=\"w-full cursor-pointer rounded border px-2 pt-1.5 text-base text-ink-gray-7\"\n                v-else-if=\"field.name == 'note'\"\n                @click=\"() => (showNoteModal = true)\"\n              >\n                <FadedScrollableDiv class=\"max-h-24 min-h-16 overflow-y-auto\">\n                  <div\n                    v-if=\"field.value?.title\"\n                    :class=\"[field.value?.content ? 'mb-1 font-bold' : '']\"\n                    v-html=\"field.value?.title\"\n                  />\n                  <div\n                    v-if=\"field.value?.content\"\n                    v-html=\"field.value?.content\"\n                  />\n                </FadedScrollableDiv>\n              </div>\n              <div\n                class=\"w-full cursor-pointer rounded border px-2 pt-1.5 text-base text-ink-gray-7\"\n                v-else-if=\"field.name == 'task'\"\n                @click=\"() => (showTaskModal = true)\"\n              >\n                <FadedScrollableDiv class=\"max-h-24 min-h-16 overflow-y-auto\">\n                  <div\n                    v-if=\"field.value?.title\"\n                    :class=\"[field.value?.description ? 'mb-1 font-bold' : '']\"\n                    v-html=\"field.value?.title\"\n                  />\n                  <div\n                    v-if=\"field.value?.description\"\n                    v-html=\"field.value?.description\"\n                  />\n                </FadedScrollableDiv>\n              </div>\n              <div v-else :class=\"field.color ? `text-${field.color}-600` : ''\">\n                {{ field.value }}\n              </div>\n              <div v-if=\"field.link\">\n                <ArrowUpRightIcon\n                  class=\"h-4 w-4 shrink-0 cursor-pointer text-ink-gray-5 hover:text-ink-gray-8\"\n                  @click=\"() => field.link()\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div\n        v-if=\"!callLog?.data?._lead && !callLog?.data?._deal\"\n        class=\"px-4 pb-7 pt-4 sm:px-6\"\n      >\n        <Button\n          class=\"w-full\"\n          variant=\"solid\"\n          :label=\"__('Create lead')\"\n          @click=\"createLead\"\n        />\n      </div>\n    </template>\n  </Dialog>\n  <NoteModal v-model=\"showNoteModal\" :note=\"note\" @after=\"addNoteToCallLog\" />\n  <TaskModal v-model=\"showTaskModal\" :task=\"task\" @after=\"addTaskToCallLog\" />\n</template>\n\n<script setup>\nimport EditIcon from '@/components/Icons/EditIcon.vue'\nimport ArrowUpRightIcon from '@/components/Icons/ArrowUpRightIcon.vue'\nimport DurationIcon from '@/components/Icons/DurationIcon.vue'\nimport ContactsIcon from '@/components/Icons/ContactsIcon.vue'\nimport LeadsIcon from '@/components/Icons/LeadsIcon.vue'\nimport Dealsicon from '@/components/Icons/DealsIcon.vue'\nimport CalendarIcon from '@/components/Icons/CalendarIcon.vue'\nimport NoteIcon from '@/components/Icons/NoteIcon.vue'\nimport TaskIcon from '@/components/Icons/TaskIcon.vue'\nimport CheckCircleIcon from '@/components/Icons/CheckCircleIcon.vue'\nimport NoteModal from '@/components/Modals/NoteModal.vue'\nimport TaskModal from '@/components/Modals/TaskModal.vue'\nimport FadedScrollableDiv from '@/components/FadedScrollableDiv.vue'\nimport { getCallLogDetail } from '@/utils/callLog'\nimport { usersStore } from '@/stores/users'\nimport { isMobileView } from '@/composables/settings'\nimport { useDocument } from '@/data/document'\nimport { FeatherIcon, Dropdown, Avatar, Tooltip, call } from 'frappe-ui'\nimport { ref, computed, h, nextTick, watch } from 'vue'\nimport { useRouter } from 'vue-router'\n\nconst { isManager } = usersStore()\nconst router = useRouter()\n\nconst show = defineModel()\nconst showNoteModal = ref(false)\nconst showTaskModal = ref(false)\n\nconst callLog = defineModel('callLog')\n\nconst note = ref({\n  title: '',\n  content: '',\n})\n\nconst task = ref({\n  title: '',\n  description: '',\n  assigned_to: '',\n  due_date: '',\n  status: 'Backlog',\n  priority: 'Low',\n})\n\nconst detailFields = computed(() => {\n  if (!callLog.value?.data) return []\n\n  let data = JSON.parse(JSON.stringify(callLog.value?.data))\n\n  for (const key in data) {\n    data[key] = getCallLogDetail(key, data)\n  }\n\n  note.value = data._notes?.[0] ?? null\n  task.value = data._tasks?.[0] ?? null\n\n  let details = [\n    {\n      icon: h(FeatherIcon, {\n        name: data.type.icon,\n        class: 'h-3.5 w-3.5',\n      }),\n      name: 'type',\n      value: data.type.label + ' Call',\n    },\n    {\n      icon: ContactsIcon,\n      name: 'receiver',\n      value: {\n        receiver: data.receiver,\n        caller: data.caller,\n      },\n    },\n    {\n      icon: data._lead ? LeadsIcon : Dealsicon,\n      name: 'reference_doc',\n      value: data._lead ? 'Lead' : 'Deal',\n      link: () => {\n        if (data._lead) {\n          router.push({\n            name: 'Lead',\n            params: { leadId: data._lead },\n          })\n        } else {\n          router.push({\n            name: 'Deal',\n            params: { dealId: data._deal },\n          })\n        }\n      },\n      condition: () => data._lead || data._deal,\n    },\n    {\n      icon: CalendarIcon,\n      name: 'creation',\n      value: data.creation.label,\n      tooltip: data.creation.label,\n    },\n    {\n      icon: DurationIcon,\n      name: 'duration',\n      value: data.duration.label,\n    },\n    {\n      icon: CheckCircleIcon,\n      name: 'status',\n      value: data.status.label,\n      color: data.status.color,\n    },\n    {\n      icon: h(FeatherIcon, {\n        name: 'play-circle',\n        class: 'h-4 w-4 mt-2',\n      }),\n      name: 'recording_url',\n      value: data.recording_url,\n    },\n    {\n      icon: NoteIcon,\n      name: 'note',\n      value: data._notes?.[0] ?? null,\n    },\n    {\n      icon: TaskIcon,\n      name: 'task',\n      value: data._tasks?.[0] ?? null,\n    },\n  ]\n\n  return details\n    .filter((detail) => detail.value)\n    .filter((detail) => (detail.condition ? detail.condition() : true))\n})\n\nconst d = ref({})\nconst leadDetails = ref({})\n\nasync function createLead() {\n  await d.value.triggerOnCreateLead?.(\n    callLog.value?.data,\n    leadDetails.value,\n    () => (show.value = false),\n  )\n\n  call('crm.fcrm.doctype.crm_call_log.crm_call_log.create_lead_from_call_log', {\n    call_log: callLog.value?.data,\n    lead_details: leadDetails.value,\n  }).then((d) => {\n    if (d) {\n      router.push({ name: 'Lead', params: { leadId: d } })\n    }\n  })\n}\n\nconst showCallLogModal = defineModel('callLogModal')\n\nfunction openCallLogModal() {\n  showCallLogModal.value = true\n  nextTick(() => {\n    show.value = false\n  })\n}\n\nfunction addEditNote() {\n  if (!note.value?.name) {\n    note.value = {\n      title: '',\n      content: '',\n    }\n  }\n  showNoteModal.value = true\n}\n\nfunction addEditTask() {\n  if (!task.value?.name) {\n    task.value = {\n      title: '',\n      description: '',\n      assigned_to: '',\n      due_date: '',\n      status: 'Backlog',\n      priority: 'Low',\n    }\n  }\n  showTaskModal.value = true\n}\n\nasync function addNoteToCallLog(_note, insert_mode = false) {\n  note.value = _note\n  if (insert_mode && _note.name) {\n    await call('crm.integrations.api.add_note_to_call_log', {\n      call_sid: callLog.value?.data?.id,\n      note: _note,\n    })\n  }\n}\n\nasync function addTaskToCallLog(_task, insert_mode = false) {\n  task.value = _task\n  if (insert_mode && _task.name) {\n    await call('crm.integrations.api.add_task_to_call_log', {\n      call_sid: callLog.value?.data?.id,\n      task: _task,\n    })\n  }\n}\n\nwatch(\n  () => callLog.value?.data?.name,\n  (value) => {\n    if (!value) return\n    d.value = useDocument('CRM Call Log', value)\n  },\n)\n</script>\n\n<style scoped>\n.audio-control {\n  height: 36px;\n  outline: none;\n  border-radius: 10px;\n  cursor: pointer;\n  background-color: rgb(237, 237, 237);\n}\n\naudio::-webkit-media-controls-panel {\n  background-color: rgb(237, 237, 237) !important;\n}\n\n.audio-control::-webkit-media-controls-panel {\n  background-color: white;\n}\n</style>\n","<template>\n  <Dialog v-model=\"show\" :options=\"dialogOptions\">\n    <template #body>\n      <div class=\"px-4 pt-5 pb-6 bg-surface-modal sm:px-6\">\n        <div class=\"flex items-center justify-between mb-5\">\n          <div>\n            <h3 class=\"text-2xl font-semibold leading-6 text-ink-gray-9\">\n              {{ __(dialogOptions.title) || __('Untitled') }}\n            </h3>\n          </div>\n          <div class=\"flex items-center gap-1\">\n            <Button v-if=\"isManager() && !isMobileView\" variant=\"ghost\" class=\"w-7\" @click=\"openQuickEntryModal\">\n              <EditIcon class=\"w-4 h-4\" />\n            </Button>\n            <Button variant=\"ghost\" class=\"w-7\" @click=\"show = false\">\n              <FeatherIcon name=\"x\" class=\"w-4 h-4\" />\n            </Button>\n          </div>\n        </div>\n        <div v-if=\"tabs.data\">\n          <FieldLayout :tabs=\"tabs.data\" :data=\"_callLog\" doctype=\"CRM Call Log\" />\n          <ErrorMessage class=\"mt-8\" :message=\"error\" />\n        </div>\n      </div>\n      <div class=\"px-4 pt-4 pb-7 sm:px-6\">\n        <div class=\"space-y-2\">\n          <Button class=\"w-full\" v-for=\"action in dialogOptions.actions\" :key=\"action.label\" v-bind=\"action\"\n            :label=\"__(action.label)\" :loading=\"loading\" />\n        </div>\n      </div>\n    </template>\n  </Dialog>\n  <QuickEntryModal v-if=\"showQuickEntryModal\" v-model=\"showQuickEntryModal\" doctype=\"CRM Call Log\" />\n</template>\n\n<script setup>\nimport QuickEntryModal from '@/components/Modals/QuickEntryModal.vue'\nimport FieldLayout from '@/components/FieldLayout/FieldLayout.vue'\nimport EditIcon from '@/components/Icons/EditIcon.vue'\nimport { usersStore } from '@/stores/users'\nimport { isMobileView } from '@/composables/settings'\nimport { getRandom } from '@/utils'\nimport { capture } from '@/telemetry'\nimport { FeatherIcon, createResource, ErrorMessage } from 'frappe-ui'\nimport { ref, nextTick, watch, computed } from 'vue'\n\nconst props = defineProps({\n  options: {\n    type: Object,\n    default: {\n      afterInsert: () => { },\n    },\n  },\n})\n\nconst { isManager } = usersStore()\n\nconst show = defineModel()\nconst callLog = defineModel('callLog')\n\nconst loading = ref(false)\nconst error = ref(null)\nconst title = ref(null)\nconst editMode = ref(false)\n\nlet _callLog = ref({\n  name: '',\n  type: '',\n  from: '',\n  to: '',\n  medium: '',\n  duration: '',\n  caller: '',\n  receiver: '',\n  status: '',\n  recording_url: '',\n  telephony_medium: 'Manual',\n})\n\nconst dialogOptions = computed(() => {\n  let title = !editMode.value ? __('New Call Log') : __('Edit Call Log')\n  let size = 'xl'\n  let actions = [\n    {\n      label: editMode.value ? __('Save') : __('Create'),\n      variant: 'solid',\n      onClick: () =>\n        editMode.value ? updateCallLog() : createCallLog.submit(),\n    },\n  ]\n\n  return { title, size, actions }\n})\n\nconst tabs = createResource({\n  url: 'crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.get_fields_layout',\n  cache: ['QuickEntry', 'CRM Call Log'],\n  params: { doctype: 'CRM Call Log', type: 'Quick Entry' },\n  auto: true,\n})\n\nlet doc = ref({})\n\nfunction updateCallLog() {\n  error.value = null\n  const old = { ...doc.value }\n  const newCallLog = { ..._callLog.value }\n\n  const dirty = JSON.stringify(old) !== JSON.stringify(newCallLog)\n\n  if (!dirty) {\n    show.value = false\n    return\n  }\n\n  loading.value = true\n  updateCallLogValues.submit({\n    doctype: 'CRM Call Log',\n    name: _callLog.value.name,\n    fieldname: newCallLog,\n  })\n}\n\nconst updateCallLogValues = createResource({\n  url: 'frappe.client.set_value',\n  onSuccess(doc) {\n    loading.value = false\n    if (doc.name) {\n      handleCallLogUpdate(doc)\n    }\n  },\n  onError(err) {\n    loading.value = false\n    error.value = err\n  },\n})\n\nconst createCallLog = createResource({\n  url: 'frappe.client.insert',\n  makeParams() {\n    return {\n      doc: {\n        doctype: 'CRM Call Log',\n        id: getRandom(6),\n        telephony_medium: 'Manual',\n        ..._callLog.value,\n      },\n    }\n  },\n  onSuccess(doc) {\n    loading.value = false\n    if (doc.name) {\n      capture('call_log_created')\n      handleCallLogUpdate(doc)\n    }\n  },\n  onError(err) {\n    loading.value = false\n    if (err.exc_type == 'MandatoryError') {\n      const errorMessage = err.messages\n        .map(msg => msg.split('Log:')[1].trim())\n        .join(', ')\n      error.value = `These fields are required: ${errorMessage}`\n      return\n    }\n    error.value = err\n  },\n})\n\nfunction handleCallLogUpdate(doc) {\n  show.value = false\n  props.options.afterInsert && props.options.afterInsert(doc)\n}\n\nwatch(\n  () => show.value,\n  (value) => {\n    if (!value) return\n    editMode.value = false\n    nextTick(() => {\n      // TODO: Issue with FormControl\n      // title.value.el.focus()\n      doc.value = callLog.value?.data || {}\n      _callLog.value = { ...doc.value }\n      if (_callLog.value.name) {\n        editMode.value = true\n      }\n    })\n  },\n)\n\nconst showQuickEntryModal = ref(false)\n\nfunction openQuickEntryModal() {\n  showQuickEntryModal.value = true\n  nextTick(() => {\n    show.value = false\n  })\n}\n</script>\n"],"names":["_hoisted_1","_sfc_render","_ctx","_cache","_openBlock","_createElementBlock","_createElementVNode","getFormattedPercent","getFormattedFloat","getFormattedCurrency","getMeta","getCallLogDetail","row","log","columns","incoming","_a","_b","_c","_d","statusLabelMap","statusColorMap","formatDate","timeAgo","fieldType","_e","col","isManager","usersStore","router","useRouter","show","_useModel","__props","showNoteModal","ref","showTaskModal","callLog","note","task","detailFields","computed","data","key","h","FeatherIcon","ContactsIcon","LeadsIcon","Dealsicon","CalendarIcon","DurationIcon","CheckCircleIcon","NoteIcon","TaskIcon","_f","detail","d","leadDetails","createLead","call","showCallLogModal","openCallLogModal","nextTick","addEditNote","addEditTask","addNoteToCallLog","_note","insert_mode","addTaskToCallLog","_task","watch","value","useDocument","props","loading","error","editMode","_callLog","dialogOptions","title","size","actions","updateCallLog","createCallLog","tabs","createResource","doc","old","newCallLog","updateCallLogValues","handleCallLogUpdate","err","getRandom","capture","errorMessage","msg","showQuickEntryModal","openQuickEntryModal"],"mappings":"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"}