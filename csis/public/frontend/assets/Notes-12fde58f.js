import{l as i,k as F,c as d,b as l,w as u,d as s,F as k,r as j,p as b,g as V,u as n,t as p,e as M,f as r,q as P,aa as D,_ as E,E as I}from"./index-85632e04.js";import{_ as z,a as L}from"./ViewControls-20f61d89.js";import{_ as R}from"./LayoutHeader-448e93da.js";import{u as S,_ as q,t as A,f as T}from"./index-31644aa3.js";import{_ as G,N as H}from"./NoteModal-4abb9e0a.js";import{_ as J}from"./Dropdown.vue_vue_type_script_setup_true_lang-4f930b23.js";import{_ as K}from"./ListFooter-fc834b42.js";import"./FadedScrollableDiv-f3f408b5.js";import"./IconPicker-0c2832fa.js";import"./Popover-4a1551e7.js";import"./Link-4317fd36.js";import"./DragVerticalIcon-e7d3e46c.js";import"./PinIcon-6c6ca639.js";import"./DetailsIcon-404b02bf.js";import"./settings-5fcce07e.js";import"./ArrowUpRightIcon-fffd9b01.js";import"./helpCenter-64650aa2.js";import"./label-f9f1f609.js";const O={class:"flex-1 overflow-y-auto"},Q={key:0,class:"grid grid-cols-1 gap-2 px-3 pb-2 sm:grid-cols-4 sm:gap-4 sm:px-5 sm:pb-3"},W=["onClick"],X={class:"flex items-center justify-between"},Y={class:"truncate text-lg font-medium text-ink-gray-9"},Z={class:"mt-2 flex items-center justify-between gap-2"},ee={class:"flex items-center gap-2"},te={class:"text-sm text-ink-gray-8"},oe={class:"text-sm text-ink-gray-7"},ae={key:1,class:"flex h-full items-center justify-center"},le={class:"flex flex-col items-center gap-3 text-xl font-medium text-ink-gray-4"},be={__name:"Notes",setup(se){const{getUser:$}=S(),m=i(!1),c=i(null),a=i({}),f=i(1),_=i(20),v=i(null);F(()=>{var o,e;return(e=(o=a.value)==null?void 0:o.data)==null?void 0:e.page_length_count},(o,e)=>{!o||o===e||(_.value=o)});function x(){c.value={title:"",content:""},m.value=!0}function U(o){c.value=o,m.value=!0}async function B(o){await I("frappe.client.delete",{doctype:"FCRM Note",name:o}),a.value.reload()}return(o,e)=>{var h,C,N,y;const w=M("FeatherIcon"),g=M("Button");return r(),d(k,null,[l(R,null,{"left-header":u(()=>[l(L,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=t=>v.value=t),routeName:"Notes"},null,8,["modelValue"])]),"right-header":u(()=>[l(g,{variant:"solid",label:o.__("Create"),onClick:x},{prefix:u(()=>[l(w,{name:"plus",class:"h-4"})]),_:1},8,["label"])]),_:1}),l(z,{ref_key:"viewControls",ref:v,modelValue:a.value,"onUpdate:modelValue":e[1]||(e[1]=t=>a.value=t),loadMore:f.value,"onUpdate:loadMore":e[2]||(e[2]=t=>f.value=t),updatedPageCount:_.value,"onUpdate:updatedPageCount":e[3]||(e[3]=t=>_.value=t),doctype:"FCRM Note",options:{hideColumnsButton:!0,defaultViewName:o.__("Notes View")}},null,8,["modelValue","loadMore","updatedPageCount","options"]),s("div",O,[(C=(h=a.value.data)==null?void 0:h.data)!=null&&C.length?(r(),d("div",Q,[(r(!0),d(k,null,j(a.value.data.data,t=>(r(),d("div",{class:"group flex h-56 cursor-pointer flex-col justify-between gap-2 rounded-lg border px-5 py-4 shadow-sm hover:bg-surface-menu-bar",onClick:ne=>U(t)},[s("div",X,[s("div",Y,p(t.title),1),l(n(J),{options:[{label:o.__("Delete"),icon:"trash-2",onClick:()=>B(t.name)}],onClick:e[4]||(e[4]=P(()=>{},["stop"]))},{default:u(()=>[l(g,{icon:"more-horizontal",variant:"ghosted",class:"hover:bg-surface-white"})]),_:2},1032,["options"])]),t.content?(r(),V(n(D),{key:0,content:t.content,editable:!1,"editor-class":"prose-sm text-p-sm max-w-none text-ink-gray-5 focus:outline-none",class:"flex-1 overflow-hidden"},null,8,["content"])):b("",!0),s("div",Z,[s("div",ee,[l(q,{user:t.owner,size:"xs"},null,8,["user"]),s("div",te,p(n($)(t.owner).full_name),1)]),l(n(E),{text:n(T)(t.modified)},{default:u(()=>[s("div",oe,p(o.__(n(A)(t.modified))),1)]),_:2},1032,["text"])])],8,W))),256))])):b("",!0)]),(y=(N=a.value.data)==null?void 0:N.data)!=null&&y.length?(r(),V(n(K),{key:0,class:"border-t px-3 py-2 sm:px-5",modelValue:a.value.data.page_length_count,"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.data.page_length_count=t),options:{rowCount:a.value.data.row_count,totalCount:a.value.data.total_count},onLoadMore:e[6]||(e[6]=()=>f.value++)},null,8,["modelValue","options"])):(r(),d("div",ae,[s("div",le,[l(H,{class:"h-10 w-10"}),s("span",null,p(o.__("No {0} Found",[o.__("Notes")])),1),l(g,{label:o.__("Create"),onClick:x},{prefix:u(()=>[l(w,{name:"plus",class:"h-4"})]),_:1},8,["label"])])])),l(G,{modelValue:m.value,"onUpdate:modelValue":e[7]||(e[7]=t=>m.value=t),reloadNotes:a.value,"onUpdate:reloadNotes":e[8]||(e[8]=t=>a.value=t),note:c.value},null,8,["modelValue","reloadNotes","note"])],64)}}};export{be as default};
//# sourceMappingURL=Notes-12fde58f.js.map
