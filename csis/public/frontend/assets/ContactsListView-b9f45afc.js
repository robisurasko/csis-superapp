import{m as g,h as R,i as h,j as x,s as T,k as N,l as P,e as V,f as s,c,b as n,w as u,u as r,F as $,r as D,g as m,n as w,p as f,_ as I,d as S,t as A,q as j}from"./index-85632e04.js";import{_ as H,H as B,a as O,b as E,c as J,d as G,e as K,f as Q}from"./ListRows-e4885bb7.js";import{P as X}from"./PhoneIcon-cb5df69f.js";import{a as F}from"./index-31644aa3.js";import{_ as Y}from"./Dropdown.vue_vue_type_script_setup_true_lang-4f930b23.js";import{_ as Z}from"./ListFooter-fc834b42.js";const ee={key:0},te={key:1},se={key:2},oe=["onClick"],le={key:1},ae={key:2},ie=["onClick"],fe={__name:"ContactsListView",props:g({rows:{type:Array,required:!0},columns:{type:Array,required:!0},options:{type:Object,default:()=>({selectable:!0,showTooltip:!0,resizeColumn:!1,totalCount:0,rowCount:0})}},{modelValue:{},modelModifiers:{},list:{},listModifiers:{}}),emits:g(["loadMore","updatePageCount","columnWidthUpdated","applyFilter","applyLikeFilter","likeDoc","selectionsChanged"],["update:modelValue","update:list"]),setup(a,{expose:L,emit:M}){const d=M,v=R(),p=h(a,"modelValue"),k=h(a,"list"),U=x(()=>{var o,t;return!!((t=(o=k.value.params)==null?void 0:o.filters)!=null&&t._liked_by)}),{user:z}=T();function b(o){if(o)return JSON.parse(o).includes(z)}N(p,(o,t)=>{o!==t&&d("updatePageCount",o)});const y=P(null);return L({customListActions:x(()=>{var o;return(o=y.value)==null?void 0:o.customListActions})}),(o,t)=>{const C=V("Button"),W=V("FormControl");return s(),c($,null,[n(r(K),{class:w(o.$attrs.class),columns:a.columns,rows:a.rows,options:{getRowRoute:e=>({name:"Contact",params:{contactId:e.name},query:{view:r(v).query.view,viewType:r(v).params.viewType}}),selectable:a.options.selectable,showTooltip:a.options.showTooltip,resizeColumn:a.options.resizeColumn},"row-key":"name","onUpdate:selections":t[2]||(t[2]=e=>d("selectionsChanged",e))},{default:u(()=>[n(r(H),{class:"mx-3 sm:mx-5",onColumnWidthUpdated:t[1]||(t[1]=e=>d("columnWidthUpdated"))},{default:u(()=>[(s(!0),c($,null,D(a.columns,e=>(s(),m(r(O),{key:e.key,item:e,onColumnWidthUpdated:i=>d("columnWidthUpdated",e)},{default:u(()=>[e.key=="_liked_by"?(s(),m(C,{key:0,variant:"ghosted",class:w(["!h-4",U.value?"fill-red-500":"fill-white"]),onClick:t[0]||(t[0]=()=>d("applyLikeFilter"))},{default:u(()=>[n(B,{class:"h-4 w-4"})]),_:1},8,["class"])):f("",!0)]),_:2},1032,["item","onColumnWidthUpdated"]))),128))]),_:1}),n(E,{class:"mx-3 sm:mx-5",rows:a.rows,doctype:"Contact"},{default:u(({idx:e,column:i,item:l})=>[n(r(J),{item:l,align:i.align},{prefix:u(()=>[i.key==="full_name"?(s(),c("div",ee,[l.label?(s(),m(r(F),{key:0,class:"flex items-center",image:l.image,label:l.image_label,size:"sm"},null,8,["image","label"])):f("",!0)])):i.key==="company_name"?(s(),c("div",te,[l.label?(s(),m(r(F),{key:0,class:"flex items-center",image:l.logo,label:l.label,size:"sm"},null,8,["image","label"])):f("",!0)])):i.key==="mobile_no"?(s(),c("div",se,[n(X,{class:"h-4 w-4"})])):f("",!0)]),default:u(({label:q})=>[["modified","creation"].includes(i.key)?(s(),c("div",{key:0,class:"truncate text-base",onClick:_=>d("applyFilter",{event:_,idx:e,column:i,item:l,firstColumn:a.columns[0]})},[n(r(I),{text:l.label},{default:u(()=>[S("div",null,A(l.timeAgo),1)]),_:2},1032,["text"])],8,oe)):i.type==="Check"?(s(),c("div",le,[n(W,{type:"checkbox",modelValue:l,disabled:!0,class:"text-ink-gray-9"},null,8,["modelValue"])])):i.key==="_liked_by"?(s(),c("div",ae,[i.key=="_liked_by"?(s(),m(C,{key:0,variant:"ghosted",class:w(b(l)?"fill-red-500":"fill-white"),onClick:j(()=>d("likeDoc",{name:o.row.name,liked:b(l)}),["stop","prevent"])},{default:u(()=>[n(B,{class:"h-4 w-4"})]),_:2},1032,["class","onClick"])):f("",!0)])):(s(),c("div",{key:3,class:"truncate text-base",onClick:_=>d("applyFilter",{event:_,idx:e,column:i,item:l,firstColumn:a.columns[0]})},A(q),9,ie))]),_:2},1032,["item","align"])]),_:1},8,["rows"]),n(r(G),null,{actions:u(({selections:e,unselectAll:i})=>[n(r(Y),{options:y.value.bulkActions(e,i)},{default:u(()=>[n(C,{icon:"more-horizontal",variant:"ghost"})]),_:2},1032,["options"])]),_:1})]),_:1},8,["class","columns","rows","options"]),p.value?(s(),m(r(Z),{key:0,class:"border-t px-3 py-2 sm:px-5",modelValue:p.value,"onUpdate:modelValue":t[3]||(t[3]=e=>p.value=e),options:{rowCount:a.options.rowCount,totalCount:a.options.totalCount},onLoadMore:t[4]||(t[4]=e=>d("loadMore"))},null,8,["modelValue","options"])):f("",!0),n(Q,{ref_key:"listBulkActionsRef",ref:y,modelValue:k.value,"onUpdate:modelValue":t[5]||(t[5]=e=>k.value=e),doctype:"Contact",options:{hideAssign:!0}},null,8,["modelValue"])],64)}}};export{fe as _};
//# sourceMappingURL=ContactsListView-b9f45afc.js.map
