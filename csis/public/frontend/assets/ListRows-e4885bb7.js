import{S as z,f as a,c as f,a6 as C,d as g,t as D,u as s,g as b,y as M,ap as Q,p as L,l as S,j as R,ab as fe,at as B,au as N,n as O,q as X,ar as se,F as E,r as U,a9 as re,C as K,b as A,w as V,_ as ve,K as ie,D as ye,aJ as we,aI as ge,v as _e,k as ee,P as he,m as te,i as ue,z as be,a as oe,e as ne,E as G,I as Y,x as H,am as J,aa as ke,B as xe,G as W,ak as $e,o as Ce}from"./index-85632e04.js";import{a as Re,_ as Se}from"./Link-4317fd36.js";import{_ as Ve}from"./DragVerticalIcon-e7d3e46c.js";import{_ as Ae}from"./AssignmentModal-f44425e3.js";import{g as Le,D as je}from"./index-31644aa3.js";const Te={class:"flex h-full w-full flex-col items-center justify-center text-base"},De={class:"text-xl font-medium"},Ee={class:"mt-1 text-base text-ink-gray-5"},ze={__name:"ListEmptyState",setup(n){const t=z("list");return(e,l)=>(a(),f("div",Te,[C(e.$slots,"default",{},()=>[g("div",De,D(s(t).options.emptyState.title),1),g("div",Ee,D(s(t).options.emptyState.description),1),s(t).options.emptyState.button?(a(),b(s(Q),M({key:0},s(t).options.emptyState.button,{class:"mt-4"}),null,16)):L("",!0)])]))}};function ce(n,t=!0){let e=t?"14px ":"",l=n.map(c=>{let u=c.width||1;return typeof u=="number"?u+"fr":u}).join(" ");return e+l}const le={left:"justify-start",start:"justify-start",center:"justify-center",middle:"justify-center",right:"justify-end",end:"justify-end"},Me={class:"truncate"},Be={__name:"ListHeaderItem",props:{item:{type:Object,required:!0},debounce:{type:Number,default:1e3}},emits:["columnWidthUpdated"],setup(n,{emit:t}){const e=n,l=t,c=S(null),u=S(null),p=R(()=>{if(typeof e.item.width=="string"){const d=parseInt(e.item.width);if(e.item.width.includes("rem"))return d*16;if(e.item.width.includes("px"))return d}return u.value.offsetWidth}),y=d=>{const w=d.clientX,k=p.value,h=_=>{document.body.classList.add("select-none"),document.body.classList.add("cursor-col-resize"),c.value.style.backgroundColor="rgb(199 199 199)";let $=k+(_.clientX-w);e.item.width=`${$<50?50:$}px`,x(e.item.width)},i=()=>{document.body.classList.remove("select-none"),document.body.classList.remove("cursor-col-resize"),c.value.style.backgroundColor="",window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",i)};window.addEventListener("mousemove",h),window.addEventListener("mouseup",i)},x=fe(d=>{e.item.width=d,l("columnWidthUpdated")},e.debounce),m=z("list");return(d,w)=>(a(),f("div",{ref_key:"columnRef",ref:u,class:O(["group relative flex items-center",n.item.align?s(le)[n.item.align]:"justify-between"])},[g("div",{class:O(["flex items-center space-x-2 truncate text-sm text-ink-gray-5",d.$attrs.class])},[C(d.$slots,"prefix",B(N({item:n.item}))),C(d.$slots,"default",{},()=>[g("div",Me,D(n.item.label),1)]),C(d.$slots,"suffix",B(N({item:n.item})))],2),s(m).options.resizeColumn?C(d.$slots,"resizer",B(M({key:0},{item:n.item})),()=>[g("div",{class:"flex h-4 absolute -right-2 w-2 cursor-col-resize justify-center",onMousedown:y},[g("div",{ref_key:"resizer",ref:c,class:"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400"},null,512)],32)]):L("",!0)],2))}},Oe={__name:"ListHeader",emits:["columnWidthUpdated"],setup(n,{emit:t}){const e=t,l=z("list");return(c,u)=>(a(),f("div",{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2",style:re({gridTemplateColumns:s(ce)(s(l).columns,s(l).options.selectable)})},[s(l).options.selectable?(a(),b(se,{key:0,class:"cursor-pointer duration-300",modelValue:s(l).allRowsSelected,onClick:X(s(l).toggleAllRows,["stop"])},null,8,["modelValue","onClick"])):L("",!0),C(c.$slots,"default",{},()=>[(a(!0),f(E,null,U(s(l).columns,p=>(a(),b(Be,{key:p.key,item:p,onColumnWidthUpdated:y=>e("columnWidthUpdated",p)},null,8,["item","onColumnWidthUpdated"]))),128))])],4))}},Ue={class:"truncate text-base"},He={__name:"ListRowItem",props:{column:{type:Object,default:{}},row:{type:Object,default:{}},item:{type:[String,Number,Object],default:""},align:{type:String,default:"left"}},setup(n){const t=n,e=R(()=>{var p,y;return(p=t.column)!=null&&p.getLabel?(y=t.column)==null?void 0:y.getLabel({row:t.row}):c(t.item).label||""}),l=R(()=>u.value.options.showTooltip?t.column.getTooltip?t.column.getTooltip(t.row):c(t.item).label:"");function c(p){return p&&typeof p=="object"?p:{label:p}}const u=z("list");return(p,y)=>(a(),f("div",{class:O(["flex items-center space-x-2",s(le)[n.align]])},[C(p.$slots,"prefix",{},()=>[n.column.prefix?(a(),b(K(typeof n.column.prefix=="function"?n.column.prefix({row:n.row}):n.column.prefix),{key:0})):L("",!0)]),A(s(ve),B(N(s(u).options.showTooltip?{text:l.value}:{text:""})),{default:V(()=>[C(p.$slots,"default",B(N({label:e.value})),()=>[g("div",Ue,D(e.value),1)])]),_:3},16),C(p.$slots,"suffix")],2))}},Z={__name:"ListRow",props:{row:{type:Object,required:!0}},setup(n){const t=n,e=z("list"),l=R(()=>{var d;return(d=e.value.rows)!=null&&d.length?e.value.rows[e.value.rows.length-1][e.value.rowKey]===t.row[e.value.rowKey]:!1}),c=R(()=>e.value.selections.has(t.row[e.value.rowKey])),u=R(()=>e.value.options.enableActive&&e.value.activeRow.value===t.row.name),p=R(()=>e.value.options.getRowRoute||e.value.options.onRowClick),y=R(()=>typeof e.value.options.rowHeight=="number"?`${e.value.options.rowHeight}px`:e.value.options.rowHeight),x=R(()=>{var k,h,i;if(!c.value)return"rounded";const d=[...e.value.selections];let w=(k=e.value.rows[0])!=null&&k.group?e.value.rows.map(_=>_.rows):[e.value.rows];for(let _ of w){let $=_.findIndex(P=>P==t.row);if($===-1)continue;let I=!d.includes((h=_[$+1])==null?void 0:h.name),q=!d.includes((i=_[$-1])==null?void 0:i.name);return(I?"rounded-b ":"")+(q?"rounded-t":"")}}),m=(d,w)=>{e.value.options.onRowClick&&e.value.options.onRowClick(d,w),e.value.activeRow.value===d.name?e.value.activeRow.value=null:e.value.activeRow.value=d.name};return(d,w)=>(a(),b(K(s(e).options.getRowRoute?"router-link":"div"),M({class:[[x.value,c.value||u.value?"bg-surface-gray-2":"",p.value?"cursor-pointer":"",p.value?c.value||u.value?"hover:bg-surface-gray-3":"hover:bg-surface-menu-bar":""],"flex flex-col transition-all duration-300 ease-in-out"]},{to:s(e).options.getRowRoute?s(e).options.getRowRoute(n.row):void 0,onClick:k=>m(n.row,k)}),{default:V(()=>[(a(),b(K(s(e).options.getRowRoute?"template":"button"),{class:"[all:unset] hover:[all:unset]"},{default:V(()=>{var k,h;return[g("div",{class:"grid items-center space-x-4 px-2",style:re({height:y.value,gridTemplateColumns:s(ce)(s(e).columns,s(e).options.selectable)})},[s(e).options.selectable?(a(),f("div",{key:0,class:"w-fit pr-2 py-3 flex",onClick:w[1]||(w[1]=X(()=>{},["stop","prevent"])),onDblclick:w[2]||(w[2]=X(()=>{},["stop"]))},[A(se,{modelValue:c.value,class:"cursor-pointer duration-300",onClick:w[0]||(w[0]=X(i=>s(e).toggleRow(n.row[s(e).rowKey]),["stop"]))},null,8,["modelValue"])],32)):L("",!0),(a(!0),f(E,null,U(s(e).columns,(i,_)=>(a(),f("div",{key:i.key,class:O([s(le)[i.align],_==0?"text-ink-gray-9":"text-ink-gray-7"])},[C(d.$slots,"default",M({ref_for:!0},{idx:_,column:i,item:n.row[i.key],isActive:u.value}),()=>[s(e).slots.cell?(a(),b(K(s(e).slots.cell),M({key:0,ref_for:!0},{column:i,row:n.row,item:n.row[i.key],align:i.align}),null,16)):(a(),b(He,{key:1,column:i,row:n.row,item:n.row[i.key],align:i.align},null,8,["column","row","item","align"]))])],2))),128))],4),l.value?L("",!0):(a(),f("div",{key:0,class:O(["h-px border-t",x.value==="rounded"||(h=(k=x.value)==null?void 0:k.includes)!=null&&h.call(k,"rounded-b")?"mx-2 border-outline-gray-1":"border-t-[--surface-gray-2]"])},null,2))]}),_:3}))]),_:3},16,["class"]))}},We={class:"h-full overflow-y-auto"},de={__name:"ListRows",setup(n){const t=z("list");return(e,l)=>(a(),f("div",We,[C(e.$slots,"default",{},()=>[(a(!0),f(E,null,U(s(t).rows,c=>(a(),b(Z,{key:c[s(t).rowKey],row:c},null,8,["row"]))),128))])]))}},Ke={},Ne={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"};function Ie(n,t){return a(),f("svg",Ne,t[0]||(t[0]=[g("path",{fill:"currentColor",d:"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z"},null,-1)]))}const qe=ie(Ke,[["render",Ie]]),Ge={class:"flex items-center"},Pe={class:"w-full py-1.5 pr-2"},Fe={key:1,class:"text-base font-medium leading-6"},pe={__name:"ListGroupHeader",props:{group:{type:Object,required:!0}},setup(n){const t=n,e=z("list");function l(){t.group.collapsed==null&&(t.group.collapsed=!1),t.group.collapsed=!t.group.collapsed}return(c,u)=>(a(),f(E,null,[g("div",Ge,[g("button",{onClick:l,class:"ml-[3px] mr-[11px] rounded p-1 hover:bg-surface-gray-2"},[A(qe,{class:O(["h-4 w-4 text-ink-gray-6 transition-transform duration-200",[n.group.collapsed?"-rotate-90":""]])},null,8,["class"])]),C(c.$slots,"default",{},()=>[g("div",Pe,[s(e).slots["group-header"]?(a(),b(K(s(e).slots["group-header"]),B(M({key:0},{group:n.group})),null,16)):(a(),f("span",Fe,D(n.group.group),1))])])]),u[0]||(u[0]=g("div",{class:"mx-2 h-px border-t border-outline-gray-modals"},null,-1))],64))}},Je={key:0,class:"mb-5 mt-2"},me={__name:"ListGroupRows",props:{group:{type:Object,required:!0}},setup(n){const t=z("list");return(e,l)=>n.group.collapsed?L("",!0):(a(),f("div",Je,[C(e.$slots,"default",{},()=>[(a(!0),f(E,null,U(n.group.rows,c=>(a(),b(Z,{key:c[s(t).rowKey],row:c},null,8,["row"]))),128))])]))}},Xe={class:"h-full overflow-y-auto"},Ye={__name:"ListGroups",setup(n){const t=z("list");return(e,l)=>(a(),f("div",Xe,[(a(!0),f(E,null,U(s(t).rows,c=>(a(),f("div",{key:c.group},[C(e.$slots,"default",{},()=>[A(pe,{group:c},{default:V(()=>[e.$slots["group-header"]?C(e.$slots,"group-header",M({key:0,ref_for:!0},{group:c})):L("",!0)]),_:2},1032,["group"]),A(me,{group:c},null,8,["group"])])]))),128))]))}},Ze={key:0,class:"absolute inset-x-0 bottom-6 mx-auto w-max text-base"},Qe={class:"flex flex-1 justify-between border-r border-outline-gray-2 text-ink-gray-9"},et={class:"flex items-center space-x-3"},tt={class:"mr-3"},st={class:"flex items-center space-x-1"},ot=Object.assign({inheritAttrs:!1},{__name:"ListSelectBanner",setup(n){const t=z("list");let e=R(()=>t.value.options.selectionText(t.value.selections.size));return(l,c)=>(a(),b(we,{"enter-active-class":"duration-300 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:V(()=>[s(t).selections.size?(a(),f("div",Ze,[g("div",{class:O(["flex min-w-[596px] items-center space-x-3 rounded-lg bg-surface-white px-4 py-2 shadow-2xl",l.$attrs.class])},[C(l.$slots,"default",B(N({selections:s(t).selections,allRowsSelected:s(t).allRowsSelected,selectAll:()=>s(t).toggleAllRows(!0),unselectAll:()=>s(t).toggleAllRows(!1)})),()=>[g("div",Qe,[g("div",et,[A(se,{modelValue:!0,disabled:!0,class:"text-ink-gray-9"}),g("div",null,D(s(e)),1)]),g("div",tt,[C(l.$slots,"actions",B(N({selections:s(t).selections,allRowsSelected:s(t).allRowsSelected,selectAll:()=>s(t).toggleAllRows(!0),unselectAll:()=>s(t).toggleAllRows(!1)})))])]),g("div",st,[A(s(Q),{class:O(["w- text-ink-gray-7",s(t).allRowsSelected?"cursor-not-allowed":""]),disabled:s(t).allRowsSelected,variant:"ghost",onClick:c[0]||(c[0]=u=>s(t).toggleAllRows(!0))},{default:V(()=>c[2]||(c[2]=[ye(" Select all ")])),_:1},8,["disabled","class"]),A(s(Q),{icon:"x",variant:"ghost",onClick:c[1]||(c[1]=u=>s(t).toggleAllRows(!1))})])])],2)])):L("",!0)]),_:3}))}}),lt={class:"relative flex w-full flex-1 flex-col overflow-x-auto"},kt=Object.assign({inheritAttrs:!1},{__name:"ListView",props:{columns:{type:Array,default:[]},rows:{type:Array,default:[]},rowKey:{type:String,required:!0},options:{type:Object,default:()=>({getRowRoute:null,onRowClick:null,showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:40,emptyState:{title:"No Data",description:"No data available"}})}},emits:["update:selections","update:active-row"],setup(n,{expose:t,emit:e}){const l=n,c=ge();let u=_e(new Set),p=S(null);const y=e;ee(u,i=>{u.size&&(p.value=null),y("update:selections",i)}),ee(p,i=>{y("update:active-row",i)});let x=R(()=>{function i($){return $===void 0?!0:$}function _($){return $===void 0?!1:$}return{getRowRoute:l.options.getRowRoute||null,onRowClick:l.options.onRowClick||null,showTooltip:i(l.options.showTooltip),selectionText:l.options.selectionText||($=>$===1?"1 row selected":`${$} rows selected`),enableActive:_(l.options.enableActive),selectable:i(l.options.selectable),resizeColumn:_(l.options.resizeColumn),rowHeight:l.options.rowHeight||40,emptyState:l.options.emptyState}});const m=R(()=>l.rows.length?w.value?u.size===l.rows.reduce((i,_)=>i+_.rows.length,0):u.size===l.rows.length:!1),d=R(()=>x.value.selectable);let w=R(()=>l.rows.every(i=>i.group&&i.rows&&Array.isArray(i.rows)));function k(i){u.delete(i)||u.add(i)}function h(i){if(!i||m.value){u.clear();return}if(w.value){l.rows.forEach(_=>{_.rows.forEach($=>u.add($[l.rowKey]))});return}l.rows.forEach(_=>u.add(_[l.rowKey]))}return he("list",R(()=>({rowKey:l.rowKey,rows:l.rows,columns:l.columns,options:x.value,selections:u,activeRow:p,allRowsSelected:m.value,slots:c,toggleRow:k,toggleAllRows:h}))),t({selections:u,allRowsSelected:m,toggleRow:k,toggleAllRows:h}),(i,_)=>(a(),f("div",lt,[g("div",{class:O(["flex w-max min-w-full flex-col overflow-y-hidden",i.$attrs.class])},[C(i.$slots,"default",B(N({showGroupedRows:s(w),selectable:d.value})),()=>[A(Oe),l.rows.length?(a(),f(E,{key:0},[s(w)?(a(),b(Ye,{key:0})):(a(),b(de,{key:1}))],64)):(a(),b(ze,{key:1})),d.value?(a(),b(ot,{key:2})):L("",!0)])],2)]))}}),at={},nt={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"fillCurrent",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-heart"};function rt(n,t){return a(),f("svg",nt,t[0]||(t[0]=[g("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"},null,-1)]))}const xt=ie(at,[["render",rt]]),it={class:"mb-4"},ut={class:"mb-1.5 text-sm text-ink-gray-5"},ct={class:"mb-1.5 text-sm text-ink-gray-5"},dt={__name:"EditValueModal",props:te({doctype:{type:String,required:!0},selectedValues:{type:Set,required:!0}},{modelValue:{},modelModifiers:{}}),emits:te(["reload"],["update:modelValue"]),setup(n,{emit:t}){const e=["Check"],l=["Link","Dynamic Link"],c=["Float","Int","Currency","Percent"],u=["Select"],p=["Text Editor"],y=["Date","Datetime"],x=n,m=ue(n,"modelValue"),d=t,w=be({url:"crm.api.doc.get_fields",cache:["fields",x.doctype],params:{doctype:x.doctype},transform:o=>o.filter(r=>r.hidden==0&&r.read_only==0)});oe(()=>{var o;(o=w.data)!=null&&o.length||w.fetch()});const k=R(()=>{var o;return((o=x.selectedValues)==null?void 0:o.size)||0}),h=S({label:"",type:"",value:"",options:""}),i=S(""),_=S(!1);function $(){let o=i.value;h.value.type=="Check"&&(o=o=="Yes"?1:0),_.value=!0,G("frappe.desk.doctype.bulk_update.bulk_update.submit_cancel_or_update_docs",{doctype:x.doctype,docnames:Array.from(x.selectedValues),action:"update",data:{[h.value.value]:o||null}}).then(()=>{h.value={label:"",type:"",value:"",options:""},i.value="",_.value=!1,m.value=!1,Y("bulk_update",{doctype:x.doctype}),d("reload")})}function I(o){i.value="",o&&(h.value=o)}function q(o){let r=o.target?o.target.value:o;i.value=r}function P(o){return o.split(`
`)}function F(o){const{type:r,options:v}=o;if(u.includes(r)||e.includes(r)){const j=r=="Check"?["Yes","No"]:P(v);return H(J,{type:"select",options:j.map(T=>({label:T,value:T})),modelValue:i.value})}else return l.includes(r)?r=="Dynamic Link"?H(J,{type:"text"}):H(Se,{class:"form-control",doctype:v}):c.includes(r)?H(J,{type:"number"}):y.includes(r)?H(Ve):p.includes(r)?H(ke,{variant:"outline",editorClass:"!prose-sm overflow-auto min-h-[80px] max-h-80 py-1.5 px-2 rounded border border-outline-gray-2 bg-surface-white hover:border-outline-gray-3 hover:shadow-sm focus:bg-surface-white focus:border-outline-gray-4 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3 text-ink-gray-8 transition-colors",bubbleMenu:!0,content:i.value}):H(J,{type:"text"})}return(o,r)=>{const v=ne("Button"),j=ne("Dialog");return a(),b(j,{modelValue:m.value,"onUpdate:modelValue":r[2]||(r[2]=T=>m.value=T),options:{title:o.__("Bulk Edit")}},{"body-content":V(()=>[g("div",it,[g("div",ut,D(o.__("Field")),1),A(Re,{value:h.value.label,options:s(w).data,onChange:r[0]||(r[0]=T=>I(T)),placeholder:o.__("Source")},null,8,["value","options","placeholder"])]),g("div",null,[g("div",ct,D(o.__("Value")),1),(a(),b(K(F(h.value)),{value:i.value,size:"md",onChange:r[1]||(r[1]=T=>q(T)),placeholder:o.__("Contact Us")},null,40,["value","placeholder"]))])]),actions:V(()=>[A(v,{class:"w-full",variant:"solid",onClick:$,loading:_.value,label:o.__("Update {0} Records",[k.value])},null,8,["loading","label"])]),_:1},8,["modelValue","options"])}}},$t={__name:"ListBulkActions",props:te({doctype:{type:String,default:""},options:{type:Object,default:()=>({hideEdit:!1,hideDelete:!1,hideAssign:!1})}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n,{expose:t}){const e=n,l=ue(n,"modelValue"),c=xe(),{$dialog:u,$socket:p}=Le(),y=S(!1),x=S([]),m=S(()=>{});function d(o,r){x.value=o,y.value=!0,m.value=r}function w(o,r){u({title:__("Convert to Deal"),message:__("Are you sure you want to convert {0} Lead(s) to Deal(s)?",[o.size]),variant:"solid",theme:"blue",actions:[{label:__("Convert"),variant:"solid",onClick:v=>{Y("bulk_convert_to_deal"),Array.from(o).forEach(j=>{G("crm.fcrm.doctype.crm_lead.crm_lead.convert_to_deal",{lead:j}).then(()=>{W.success(__("Converted successfully")),l.value.reload(),r(),v()})})}}]})}function k(o,r){u({title:__("Delete"),message:__("Are you sure you want to delete {0} item(s)?",[o.size]),variant:"solid",theme:"red",actions:[{label:__("Delete"),variant:"solid",theme:"red",onClick:v=>{Y("bulk_delete"),G("frappe.desk.reportview.delete_items",{items:JSON.stringify(Array.from(o)),doctype:e.doctype}).then(()=>{W.success(__("Deleted successfully")),r(),l.value.reload(),v()})}}]})}const h=S(!1),i=S([]);function _(o,r){h.value=!0,x.value=o,m.value=r}function $(o,r){u({title:__("Clear Assignment"),message:__("Are you sure you want to clear assignment for {0} item(s)?",[o.size]),variant:"solid",theme:"red",actions:[{label:__("Clear Assignment"),variant:"solid",theme:"red",onClick:v=>{Y("bulk_clear_assignment"),G("frappe.desk.form.assign_to.remove_multiple",{doctype:e.doctype,names:JSON.stringify(Array.from(o)),ignore_permissions:!0}).then(()=>{W.success(__("Assignment cleared successfully")),F(r),v()})}}]})}const I=S([]),q=S([]);function P(o,r){let v=[];return e.options.hideEdit||v.push({label:__("Edit"),onClick:()=>d(o,r)}),e.options.hideDelete||v.push({label:__("Delete"),onClick:()=>k(o,r)}),e.options.hideAssign||(v.push({label:__("Assign To"),onClick:()=>_(o,r)}),v.push({label:__("Clear Assignment"),onClick:()=>$(o,r)})),e.doctype==="CRM Lead"&&v.push({label:__("Convert to Deal"),onClick:()=>w(o,r)}),I.value.forEach(j=>{v.push({label:__(j.label),onClick:()=>j.onClick({list:l.value,selections:o,unselectAll:r,call:G,createToast:W.create,toast:W,$dialog:u,router:c})})}),v}function F(o){var r,v;(r=m.value)==null||r.call(m),o==null||o(),(v=l.value)==null||v.reload()}return oe(async()=>{var r,v,j,T,ae;if(!((r=l.value)!=null&&r.data))return;let o=await je(l.value.data,{list:l.value,call:G,createToast:W.create,toast:W,$dialog:u,$socket:p,router:c});I.value=(o==null?void 0:o.bulkActions)||((j=(v=l.value)==null?void 0:v.data)==null?void 0:j.bulkActions)||[],q.value=(o==null?void 0:o.actions)||((ae=(T=l.value)==null?void 0:T.data)==null?void 0:ae.listActions)||[]}),t({bulkActions:P,customListActions:q}),(o,r)=>(a(),f(E,null,[y.value?(a(),b(dt,{key:0,modelValue:y.value,"onUpdate:modelValue":r[0]||(r[0]=v=>y.value=v),doctype:n.doctype,selectedValues:x.value,onReload:F},null,8,["modelValue","doctype","selectedValues"])):L("",!0),h.value?(a(),b(Ae,{key:1,modelValue:h.value,"onUpdate:modelValue":r[1]||(r[1]=v=>h.value=v),assignees:i.value,"onUpdate:assignees":r[2]||(r[2]=v=>i.value=v),docs:x.value,doctype:n.doctype,onReload:F},null,8,["modelValue","assignees","docs","doctype"])):L("",!0)],64))}},pt={key:0,class:"mx-3 mt-2 h-full overflow-y-auto sm:mx-5"},mt={class:"my-2 flex items-center gap-2 text-base font-medium text-ink-gray-8"},ft={class:"flex items-center gap-1"},vt={key:1,class:"text-ink-gray-4"},yt={key:2},Ct={__name:"ListRows",props:{rows:{type:Array,required:!0},doctype:{type:String,default:"CRM Lead"}},setup(n){const t=n,e=S(t.rows);ee(()=>t.rows,y=>e.value=y);let l=R(()=>t.rows.every(y=>y.group&&y.rows&&Array.isArray(y.rows)));const c=$e(`scrollPosition${t.doctype}`,0),u=S(null),p=()=>{u.value&&(c.value=u.value.$el.scrollTop)};return Ce(()=>{u.value&&u.value.$el.removeEventListener("scroll",p)}),oe(()=>{u.value&&(u.value.$el.addEventListener("scroll",p),u.value.$el.scrollTop=c.value)}),(y,x)=>s(l)?(a(),f("div",pt,[(a(!0),f(E,null,U(e.value,m=>(a(),f("div",{key:m.group},[A(s(pe),{group:m},{default:V(()=>[g("div",mt,[g("div",null,D(y.__(m.label))+" -",1),g("div",ft,[m.icon?(a(),b(K(m.icon),{key:0})):L("",!0),m.group==" "?(a(),f("div",vt,D(y.__("Empty")),1)):(a(),f("div",yt,D(m.group),1))])])]),_:2},1032,["group"]),A(s(me),{group:m},{default:V(()=>[(a(!0),f(E,null,U(m.rows,d=>(a(),b(s(Z),{key:d.name,row:d},{default:V(({idx:w,column:k,item:h})=>[C(y.$slots,"default",M({ref_for:!0},{idx:w,column:k,item:h,row:d}))]),_:2},1032,["row"]))),128))]),_:2},1032,["group"])]))),128))])):(a(),b(s(de),{key:1,ref_key:"scrollContainer",ref:u,class:"mx-3 sm:mx-5",onScroll:p},{default:V(()=>[(a(!0),f(E,null,U(e.value,m=>(a(),b(s(Z),{key:m.name,row:m},{default:V(({idx:d,column:w,item:k})=>[C(y.$slots,"default",M({ref_for:!0},{idx:d,column:w,item:k,row:m}))]),_:2},1032,["row"]))),128))]),_:3},512))}};export{xt as H,Oe as _,Be as a,Ct as b,He as c,ot as d,kt as e,$t as f};
//# sourceMappingURL=ListRows-e4885bb7.js.map
