import{a as ce,_ as bt,C as Ne,b as yt}from"./CallUI-959be7c1.js";import{K as N,f as a,c,d as e,g as y,C as te,t as C,u as l,b as u,a7 as ye,ap as P,p as w,F as L,r as D,q as Ee,w as $,n as J,_ as me,m as pe,l as I,i as le,j as R,a as _e,a3 as z,av as xt,a4 as Ze,a5 as Oe,a6 as ue,D as T,ac as Be,z as K,e as B,bb as kt,o as At,I as Y,am as Me,aq as fe,ae as He,G,as as Ie,k as Ve,H as ne,E as oe,an as Q,v as Le,bc as wt,x as ze,ax as $t,ak as Et,s as It,bd as Z,J as Re,y as St,L as Bt,be as Mt}from"./index-85632e04.js";import{C as Vt}from"./CommentIcon-2d82e902.js";import{_ as Lt,E as Qt}from"./MultiSelectEmailInput-5ae16f74.js";import{_ as Rt}from"./Section-7d029c27.js";import{E as Ge}from"./Email2Icon-d49a0a62.js";import{P as Dt}from"./PinIcon-6c6ca639.js";import{L as xe}from"./LeadsIcon-68ebc4cc.js";import{D as De}from"./DealsIcon-acabc22f.js";import{C as Ue}from"./ContactsIcon-830ef67e.js";import{O as je}from"./OrganizationsIcon-b5a4c50f.js";import{N as ke}from"./NoteModal-4abb9e0a.js";import{T as Fe}from"./TaskIcon-f5c3d969.js";import{P as Se}from"./PhoneIcon-cb5df69f.js";import{n as Je,a as Ae,v as Pe,N as qe,u as we}from"./notifications-9d69ebe1.js";import{W as We}from"./WhatsAppIcon-cd469fd1.js";import{M as Ut}from"./MarkAsDoneIcon-744dcd7b.js";import{g as jt,_ as Ft,t as Pt,E as Tt,v as Ye,u as ge,a as Ke,n as q}from"./index-31644aa3.js";import{F as Xe}from"./FileUploader-ffa5e39e.js";import{G as Nt,f as Zt,F as he,s as ve,g as Ot,h as Ht,i as zt,_ as Gt}from"./QuickEntryModal-157d8856.js";import{g as Jt}from"./settings-5fcce07e.js";import{s as ee,d as X,e as qt,f as Ce,i as Wt,h as $e}from"./Link-4317fd36.js";import{u as ie,s as H,m as F,a as W}from"./helpCenter-64650aa2.js";import{_ as Yt}from"./Dropdown.vue_vue_type_script_setup_true_lang-4f930b23.js";import{E as Kt}from"./DragVerticalIcon-e7d3e46c.js";import"./ArrowUpRightIcon-fffd9b01.js";import"./AvatarIcon-72148022.js";import"./Popover-4a1551e7.js";import"./IndicatorIcon-99f76624.js";const Xt={},el={class:"spinner",viewBox:"0 0 50 50"};function tl(i,t){return a(),c("svg",el,t[0]||(t[0]=[e("defs",null,[e("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[e("stop",{offset:"0%","stop-color":"rgba(0,110,219,1)"}),e("stop",{offset:"100%","stop-color":"rgba(255,255,255,0)"})])],-1),e("circle",{stroke:"url(#gradient)",class:"spinner-path",cx:"25",cy:"25",r:"20",fill:"none","stroke-width":"5"},null,-1)]))}const et=N(Xt,[["render",tl],["__scopeId","data-v-3926adc3"]]),ll={},al={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function sl(i,t){return a(),c("svg",al,t[0]||(t[0]=[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 6.5C9.10457 6.5 10 5.60457 10 4.5C10 3.39543 9.10457 2.5 8 2.5C6.89543 2.5 6 3.39543 6 4.5C6 5.60457 6.89543 6.5 8 6.5ZM8 7.5C9.65685 7.5 11 6.15685 11 4.5C11 2.84315 9.65685 1.5 8 1.5C6.34315 1.5 5 2.84315 5 4.5C5 6.15685 6.34315 7.5 8 7.5ZM12 13.5C13.1046 13.5 14 12.6046 14 11.5C14 10.3954 13.1046 9.5 12 9.5C10.8954 9.5 10 10.3954 10 11.5C10 12.6046 10.8954 13.5 12 13.5ZM12 14.5C13.6569 14.5 15 13.1569 15 11.5C15 9.84315 13.6569 8.5 12 8.5C10.3431 8.5 9 9.84315 9 11.5C9 13.1569 10.3431 14.5 12 14.5ZM6 11.5C6 12.6046 5.10457 13.5 4 13.5C2.89543 13.5 2 12.6046 2 11.5C2 10.3954 2.89543 9.5 4 9.5C5.10457 9.5 6 10.3954 6 11.5ZM7 11.5C7 13.1569 5.65685 14.5 4 14.5C2.34315 14.5 1 13.1569 1 11.5C1 9.84315 2.34315 8.5 4 8.5C5.65685 8.5 7 9.84315 7 11.5Z",fill:"currentColor"},null,-1)]))}const de=N(ll,[["render",sl]]),nl={},ol={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-minimize-2"};function il(i,t){return a(),c("svg",ol,t[0]||(t[0]=[e("polyline",{points:"4 14 10 14 10 20"},null,-1),e("polyline",{points:"20 10 14 10 14 4"},null,-1),e("line",{x1:"14",y1:"10",x2:"21",y2:"3"},null,-1),e("line",{x1:"3",y1:"21",x2:"10",y2:"14"},null,-1)]))}const rl=N(nl,[["render",il]]),cl={},ul={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-maximize-2"};function dl(i,t){return a(),c("svg",ul,t[0]||(t[0]=[e("polyline",{points:"15 3 21 3 21 9"},null,-1),e("polyline",{points:"9 21 3 21 3 15"},null,-1),e("line",{x1:"21",y1:"3",x2:"14",y2:"10"},null,-1),e("line",{x1:"3",y1:"21",x2:"10",y2:"14"},null,-1)]))}const ml=N(cl,[["render",dl]]),pl={},_l={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function fl(i,t){return a(),c("svg",_l,t[0]||(t[0]=[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.25 8C14.25 11.4518 11.4518 14.25 8 14.25C4.54822 14.25 1.75 11.4518 1.75 8C1.75 4.54822 4.54822 1.75 8 1.75C11.4518 1.75 14.25 4.54822 14.25 8ZM15.25 8C15.25 12.0041 12.0041 15.25 8 15.25C3.99594 15.25 0.75 12.0041 0.75 8C0.75 3.99594 3.99594 0.75 8 0.75C12.0041 0.75 15.25 3.99594 15.25 8ZM7.37988 9.37695V9.44531H8.39062V9.37695C8.39062 9.10352 8.41992 8.88542 8.47852 8.72266C8.53711 8.55664 8.62826 8.41504 8.75195 8.29785C8.87891 8.18066 9.04329 8.06185 9.24512 7.94141C9.56087 7.74609 9.8099 7.51009 9.99219 7.2334C10.1745 6.95345 10.2656 6.61328 10.2656 6.21289C10.2656 5.82878 10.1745 5.49186 9.99219 5.20215C9.81315 4.91244 9.56087 4.6862 9.23535 4.52344C8.90983 4.36068 8.52734 4.2793 8.08789 4.2793C7.69401 4.2793 7.33268 4.35579 7.00391 4.50879C6.67513 4.65853 6.41146 4.88151 6.21289 5.17773C6.01432 5.4707 5.90853 5.82878 5.89551 6.25195H6.96973C6.986 6.0013 7.04948 5.79785 7.16016 5.6416C7.27083 5.4821 7.40755 5.36491 7.57031 5.29004C7.73633 5.21517 7.90885 5.17773 8.08789 5.17773C8.28971 5.17773 8.47363 5.22005 8.63965 5.30469C8.80892 5.38932 8.94075 5.50814 9.03516 5.66113C9.13281 5.81413 9.18164 5.99479 9.18164 6.20312C9.18164 6.47005 9.11003 6.69954 8.9668 6.8916C8.82357 7.0804 8.64453 7.23828 8.42969 7.36523C8.21159 7.50195 8.02279 7.64193 7.86328 7.78516C7.70703 7.92513 7.58659 8.11556 7.50195 8.35645C7.42057 8.59408 7.37988 8.93425 7.37988 9.37695ZM7.37988 11.5205C7.51986 11.654 7.69076 11.7207 7.89258 11.7207C8.09766 11.7207 8.26855 11.654 8.40527 11.5205C8.54525 11.3838 8.61523 11.2161 8.61523 11.0176C8.61523 10.8158 8.54525 10.6481 8.40527 10.5146C8.26855 10.3779 8.09766 10.3096 7.89258 10.3096C7.69076 10.3096 7.51986 10.3779 7.37988 10.5146C7.24316 10.6481 7.1748 10.8158 7.1748 11.0176C7.1748 11.2161 7.24316 11.3838 7.37988 11.5205Z",fill:"currentColor"},null,-1)]))}const gl=N(pl,[["render",fl]]),vl={class:"flex flex-col justify-center items-center gap-1 mt-4 mb-7"},hl={class:"text-base font-medium"},Cl={class:"text-p-base font-normal"},bl={class:"flex flex-col gap-2.5 overflow-hidden"},yl={class:"flex justify-between items-center py-0.5"},xl={class:"flex"},kl={class:"flex flex-col gap-1.5 overflow-y-auto"},Al=["onClick"],wl={__name:"OnboardingSteps",props:{appName:{type:String,default:"frappecrm"},title:{type:String,default:"Frappe CRM"},logo:{type:Object,required:!0},afterSkip:{type:Function,default:()=>{}},afterSkipAll:{type:Function,default:()=>{}},afterReset:{type:Function,default:()=>{}},afterResetAll:{type:Function,default:()=>{}}},setup(i){const t=i;function r(x){if(x.dependsOn&&!x.completed){const b=n.find(d=>d.name===x.dependsOn);if(b&&!b.completed)return!0}return!1}function p(x){if(x.dependsOn&&!x.completed){const b=n.find(d=>d.name===x.dependsOn);if(b&&!b.completed)return`You need to complete "${b.title}" first.`}return""}const{steps:n,stepsCompleted:s,totalSteps:m,completedPercentage:g,skip:_,skipAll:o,reset:f,resetAll:v}=ie(t.appName);return(x,b)=>(a(),c(L,null,[e("div",vl,[(a(),y(te(i.logo),{class:"size-10 shrink-0 rounded mb-4"})),e("div",hl,C("Welcome to "+i.title),1),e("div",Cl,C(`${l(s)}/${l(m)} steps completed`),1)]),e("div",bl,[e("div",yl,[u(ye,{label:`${l(g)}% completed`,theme:l(g)==100?"green":"orange",size:"lg"},null,8,["label","theme"]),e("div",xl,[l(g)!=0?(a(),y(P,{key:0,variant:"ghost",label:"Reset all",onClick:b[0]||(b[0]=()=>l(v)(i.afterResetAll))})):w("",!0),l(g)!=100?(a(),y(P,{key:1,variant:"ghost",label:"Skip all",onClick:b[1]||(b[1]=()=>l(o)(i.afterSkipAll))})):w("",!0)])]),e("div",kl,[(a(!0),c(L,null,D(l(n),d=>(a(),c("div",{key:d.title,class:"group w-full flex gap-2 justify-between items-center hover:bg-surface-gray-1 rounded px-2 py-1.5 cursor-pointer",onClick:Ee(()=>!d.completed&&!r(d)&&d.onClick(),["stop"])},[(a(),y(te(r(d)?me:"div"),{text:p(d)},{default:$(()=>[e("div",{class:J(["flex gap-2 items-center",[d.completed?"text-ink-gray-5":r(d)?"text-ink-gray-4":"text-ink-gray-8"]])},[(a(),y(te(d.icon),{class:"h-4"})),e("div",{class:J(["text-base",{"line-through":d.completed}])},C(d.title),3)],2)]),_:2},1032,["text"])),!d.completed&&!r(d)?(a(),y(P,{key:0,label:"Skip",class:"!h-4 text-xs !text-ink-gray-6 hidden group-hover:flex",onClick:()=>l(_)(d.name,i.afterSkip)},null,8,["onClick"])):r(d)?w("",!0):(a(),y(P,{key:1,label:"Reset",class:"!h-4 text-xs !text-ink-gray-6 hidden group-hover:flex",onClick:Ee(()=>l(f)(d.name,i.afterReset),["stop"])},null,8,["onClick"]))],8,Al))),128))])])],64))}},$l={class:"flex flex-col gap-2 overflow-hidden"},El={class:"m-1"},Il={class:"flex justify-between items-center text-base text-ink-gray-5 mx-2"},Sl={class:"flex flex-col gap-1.5 overflow-y-auto"},Bl=["onClick"],Ml={class:"flex items-center gap-2"},Vl={class:"text-base text-ink-gray-8"},Ll={class:"flex flex-col gap-1.5 ml-5"},Ql=["onClick"],Rl={class:"flex items-center gap-2"},Dl={class:"text-base text-ink-gray-8"},Ul={__name:"HelpCenter",props:pe({docsLink:{type:String,default:"https://docs.frappe.io/crm"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(i){const t=i,r=I(null),p=I(""),n=le(i,"modelValue"),s=R(()=>p.value?n.value.filter(_=>{const o=_.subArticles.filter(f=>f.title.toLowerCase().includes(p.value.toLowerCase()));return _.title.toLowerCase().includes(p.value.toLowerCase())||o.length>0?{..._,subArticles:o}:!1}):n.value);function m(){window.open(t.docsLink,"_blank")}function g(_){window.open(`${t.docsLink}/${_}`,"_blank")}return _e(()=>{var _,o;(o=(_=r.value)==null?void 0:_.el)==null||o.focus()}),(_,o)=>(a(),c("div",$l,[e("div",El,[u(xt,{ref_key:"searchInput",ref:r,placeholder:"Search articles...",modelValue:p.value,"onUpdate:modelValue":o[0]||(o[0]=f=>p.value=f),debounce:300},{prefix:$(()=>[u(z,{name:"search",class:"h-4 text-ink-gray-5"})]),_:1},8,["modelValue"])]),e("div",Il,[o[1]||(o[1]=e("div",null,"All articles",-1)),u(P,{variant:"ghost",onClick:m},{default:$(()=>[u(z,{name:"arrow-up-right",class:"h-4 text-ink-gray-5"})]),_:1})]),e("div",Sl,[(a(!0),c(L,null,D(s.value,f=>(a(),c("div",{key:f.title,class:"flex flex-col gap-1.5"},[e("div",{class:"flex items-center justify-between p-1.5 hover:bg-surface-gray-1 rounded cursor-pointer",onClick:v=>f.opened=!f.opened},[e("div",Ml,[u(z,{name:f.opened?"chevron-down":"chevron-right",class:"h-4 text-ink-gray-5"},null,8,["name"]),e("div",Vl,C(f.title),1)])],8,Bl),Ze(e("div",Ll,[(a(!0),c(L,null,D(f.subArticles,v=>(a(),c("div",{key:v.name,class:"group flex items-center justify-between gap-2 p-1.5 hover:bg-surface-gray-1 rounded cursor-pointer",onClick:()=>g(v.name)},[e("div",Rl,[u(z,{name:"file-text",class:"h-4 text-ink-gray-5"}),e("div",Dl,C(v.title),1)]),u(z,{name:"arrow-up-right",class:"h-4 hidden group-hover:flex text-ink-gray-5"})],8,Ql))),128))],512),[[Oe,f.opened]])]))),128))])]))}},jl={class:"flex items-center justify-between px-2 py-1.5"},Fl={class:"text-base font-medium"},Pl={class:"flex gap-1"},Tl={class:"h-full overflow-hidden flex flex-col"},Nl={class:"flex flex-col gap-1.5"},Zl=["onClick"],Ol={class:"text-base"},Hl={__name:"HelpModal",props:pe({appName:{type:String,default:"frappecrm"},title:{type:String,default:"Frappe CRM"},logo:{type:Object,required:!0},afterSkip:{type:Function,default:()=>{}},afterSkipAll:{type:Function,default:()=>{}},afterReset:{type:Function,default:()=>{}},afterResetAll:{type:Function,default:()=>{}},docsLink:{type:String,default:"https://docs.frappe.io/crm"}},{modelValue:{},modelModifiers:{},articles:{},articlesModifiers:{}}),emits:["update:modelValue","update:articles"],setup(i){const t=i,{syncStatus:r,resetAll:p,isOnboardingStepsCompleted:n}=ie(t.appName),s=le(i,"modelValue"),m=le(i,"articles"),g=R(()=>{if(!n.value&&!H.value)return"Getting started";if(H.value)return"Help center"}),_=R(()=>[{icon:de,label:"Reset onboarding steps",onClick:f,condition:()=>H.value&&n.value}].filter(x=>x.condition())),o=R(()=>[{icon:gl,label:"Help centre",onClick:()=>{r(),H.value=!0},condition:!n.value&&!H.value},{icon:de,label:"Getting started",onClick:()=>H.value=!1,condition:H.value&&!n.value}].filter(x=>x.condition));function f(){p(),n.value=!1,H.value=!1}return _e(()=>{n.value&&(H.value=!0)}),(v,x)=>Ze((a(),c("div",{class:J(["fixed z-50 right-0 w-80 h-[calc(100%_-_80px)] text-ink-gray-9 m-5 mt-[62px] p-3 flex gap-2 flex-col justify-between rounded-lg bg-surface-modal shadow-2xl",{"top-[calc(100%_-_120px)] border":l(F)}]),onClick:x[3]||(x[3]=Ee(()=>{},["stop"]))},[e("div",jl,[e("div",Fl,C(g.value),1),e("div",Pl,[_.value.length?(a(),y(Yt,{key:0,options:_.value},{default:$(()=>[u(P,{variant:"ghost",icon:"more-horizontal"})]),_:1},8,["options"])):w("",!0),u(P,{onClick:x[0]||(x[0]=b=>F.value=!l(F)),variant:"ghost"},{default:$(()=>[(a(),y(te(l(F)?ml:rl),{class:"h-3.5"}))]),_:1}),u(P,{variant:"ghost",onClick:x[1]||(x[1]=b=>s.value=!1)},{default:$(()=>[u(z,{name:"x",class:"h-3.5"})]),_:1})])]),e("div",Tl,[!l(n)&&!l(H)?(a(),y(wl,{key:0,title:i.title,logo:i.logo,afterSkip:i.afterSkip,afterSkipAll:i.afterSkipAll,afterReset:i.afterReset,afterResetAll:i.afterResetAll,appName:i.appName},null,8,["title","logo","afterSkip","afterSkipAll","afterReset","afterResetAll","appName"])):l(H)?(a(),y(Ul,{key:1,modelValue:m.value,"onUpdate:modelValue":x[2]||(x[2]=b=>m.value=b),docsLink:i.docsLink},null,8,["modelValue","docsLink"])):w("",!0)]),(a(!0),c(L,null,D(o.value,b=>(a(),c("div",Nl,[e("div",{class:"w-full flex gap-2 items-center hover:bg-surface-gray-1 text-ink-gray-8 rounded px-2 py-1.5 cursor-pointer",onClick:b.onClick},[(a(),y(te(b.icon),{class:"h-4"})),e("div",Ol,C(b.label),1)],8,Zl)]))),256))],2)),[[Oe,s.value]])}},zl={key:0,class:"flex flex-col gap-3 shadow-sm rounded-lg py-2.5 px-3 bg-surface-modal text-base"},Gl={key:0,class:"inline-flex text-ink-gray-9 gap-2"},Jl={class:"flex flex-col text-p-sm gap-0.5"},ql={class:"text-ink-gray-7"},Wl={key:1,class:"flex flex-col gap-1"},Yl={class:"flex items-center justify-between gap-1"},Kl={class:"flex items-center gap-2 shrink-0"},Xl={__name:"GettingStartedBanner",props:{isSidebarCollapsed:{type:Boolean,default:!1},appName:{type:String,default:"frappecrm"}},setup(i){const t=i,{stepsCompleted:r,totalSteps:p,isOnboardingStepsCompleted:n}=ie(t.appName),s=()=>{F.value=!1,W.value=!0};return(m,g)=>i.isSidebarCollapsed?l(r)!=l(p)?(a(),y(P,{key:1,onClick:s},{default:$(()=>[u(de,{class:"h-4 my-0.5 shrink-0"})]),_:1})):w("",!0):(a(),c("div",zl,[l(r)!=l(p)?(a(),c("div",Gl,[u(de,{class:"h-4 my-0.5 shrink-0"}),e("div",Jl,[g[1]||(g[1]=e("div",{class:"font-medium"},C("Getting started"),-1)),e("div",ql,C(`${l(r)}/${l(p)} steps`),1)])])):(a(),c("div",Wl,[e("div",Yl,[e("div",Kl,[u(de,{class:"h-4 my-0.5"}),g[2]||(g[2]=e("div",{class:"text-ink-gray-9 font-medium"},C("You are all set"),-1))]),u(z,{name:"x",class:"h-4 cursor-pointer",onClick:g[0]||(g[0]=()=>{H.value=!0,n.value=!0})})]),g[3]||(g[3]=e("div",{class:"text-p-sm text-ink-gray-7"},C("All steps are completed successfully"),-1))])),l(r)!=l(p)?(a(),y(P,{key:2,label:l(r)==0?"Start now":"Continue",theme:"blue",onClick:s},{prefix:$(()=>[u(z,{name:"chevrons-right",class:"size-4"})]),_:1},8,["label"])):w("",!0)]))}},ea={class:"flex flex-col gap-2 text-ink-gray-9 text-base"},ta={key:0},la={key:1,class:"w-full rounded",controls:"",autoplay:"",muted:""},aa=["src"],sa={__name:"IntermediateStepModal",props:pe({currentStep:{type:Object,default:{title:"Title",message:"Message",videoURL:"",buttonLabel:"Button Label",onClick:()=>{}}},dialogOptions:{type:Object,default:()=>({})}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(i){const t=i,r=le(i,"modelValue"),p=R(()=>t.dialogOptions&&Object.keys(t.dialogOptions).length?t.dialogOptions:{title:t.currentStep.title,size:"2xl",actions:[{label:t.currentStep.buttonLabel,variant:"solid",onClick:t.currentStep.onClick}]});return(n,s)=>(a(),y(Be,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=m=>r.value=m),options:p.value},{"boday-header":$(()=>[ue(n.$slots,"body-header")]),"body-content":$(()=>[ue(n.$slots,"default",{},()=>[e("div",ea,[i.currentStep.message?(a(),c("div",ta,C(i.currentStep.message),1)):w("",!0),i.currentStep.videoURL?(a(),c("video",la,[e("source",{src:i.currentStep.videoURL,type:"video/mp4"},null,8,aa),s[1]||(s[1]=T(" Your browser does not support the video tag. "))])):w("",!0)])])]),actions:$(()=>[ue(n.$slots,"actions")]),_:3},8,["modelValue","options"]))}},na={},oa={width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ia(i,t){return a(),c("svg",oa,t[0]||(t[0]=[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.2641 1C5.5758 1 4.97583 1.46845 4.80889 2.1362L3.57555 7.06953C3.33887 8.01625 4.05491 8.93333 5.03077 8.93333H7.50682L6.72168 14.4293C6.68838 14.6624 6.82229 14.8872 7.04319 14.9689C7.26408 15.0507 7.51204 14.9671 7.63849 14.7684L13.2161 6.00354C13.6398 5.33782 13.1616 4.46667 12.3725 4.46667H9.59038L10.3017 1.62127C10.3391 1.4719 10.3055 1.31365 10.2108 1.19229C10.116 1.07094 9.97063 1 9.81666 1H6.2641ZM5.77903 2.37873C5.83468 2.15615 6.03467 2 6.2641 2H9.17627L8.46492 4.8454C8.42758 4.99477 8.46114 5.15302 8.55589 5.27437C8.65064 5.39573 8.79602 5.46667 8.94999 5.46667H12.3725L8.0395 12.2757L8.5783 8.50404C8.5988 8.36056 8.55602 8.21523 8.46105 8.10573C8.36608 7.99623 8.22827 7.93333 8.08332 7.93333H5.03077C4.70548 7.93333 4.4668 7.62764 4.5457 7.31207L5.77903 2.37873Z",fill:"currentColor"},null,-1)]))}const be=N(na,[["render",ia]]),ra={key:0,class:"flex flex-col gap-3 shadow-sm rounded-lg py-2.5 px-3 bg-surface-modal text-base"},ca={class:"flex flex-col gap-1"},ua={class:"inline-flex text-ink-gray-9 gap-2 items-center font-medium"},da="Upgrade to a paid plan for uninterrupted services",ma={__name:"TrialBanner",props:{isSidebarCollapsed:{type:Boolean,default:!1},afterUpgrade:{type:Function,default:()=>{}}},setup(i){const t=i,r=I(0),p=I(!1),n=I("https://frappecloud.com"),s=I(""),m=R(()=>r.value>1?"Trial ends in "+r.value+" days":"Trial ends tomorrow");K({url:"frappe.integrations.frappe_providers.frappecloud_billing.current_site_info",cache:"current_site_info_data",auto:!0,onSuccess:o=>{r.value=g(o.trial_end_date),n.value=o.base_url,s.value=o.site_name,p.value=o.setup_complete&&o.plan.is_trial_plan&&r.value>0}});function g(o){if(!o)return 0;o=new Date(o);const v=o-new Date;return Math.ceil(v/(1e3*60*60*24))}function _(){var o;window.open(`${n.value}/dashboard/sites/${s.value}`,"_blank"),(o=t.afterUpgrade)==null||o.call(t)}return(o,f)=>!i.isSidebarCollapsed&&p.value?(a(),c("div",ra,[e("div",ca,[e("div",ua,[u(z,{class:"h-4",name:"info"}),T(" "+C(m.value),1)]),e("div",{class:"text-ink-gray-7 text-p-sm"},C(da))]),u(l(P),{label:"Upgrade plan",theme:"blue",onClick:_},{prefix:$(()=>[u(be,{class:"size-4"})]),_:1})])):i.isSidebarCollapsed&&p.value?(a(),y(l(P),{key:1,onClick:_},{default:$(()=>[u(be,{class:"h-4 my-0.5 shrink-0"})]),_:1})):w("",!0)}},pa={key:0,class:"flex flex-col gap-3 shadow-sm rounded-lg py-2.5 px-3 bg-surface-white text-base"},_a={class:"flex flex-col gap-1"},fa={class:"inline-flex gap-2 items-center font-medium"},ga={class:"text-ink-gray-7 text-p-sm"},va={__name:"SignupBanner",props:{isSidebarCollapsed:{type:Boolean,default:!1},appName:{type:String,default:"Frappe CRM"},redirectURL:{type:String,default:"https://frappecloud.com/crm/signup"},afterSignup:{type:Function,default:()=>{}}},setup(i){const t=i;function r(){var p;window.open(t.redirectURL,"_blank"),(p=t.afterSignup)==null||p.call(t)}return(p,n)=>{const s=B("FeatherIcon"),m=B("Button");return i.isSidebarCollapsed?(a(),y(m,{key:1,onClick:r},{default:$(()=>[u(be,{class:"h-4 my-0.5 shrink-0"})]),_:1})):(a(),c("div",pa,[e("div",_a,[ue(p.$slots,"default",{},()=>[e("div",fa,[u(s,{class:"h-4",name:"info"}),n[0]||(n[0]=T(" Loved the demo? "))]),e("div",ga,C(`Try ${i.appName} for free with a 14-day trial.`),1)])]),u(m,{label:"Sign up now",theme:"blue",onClick:r},{prefix:$(()=>[u(be,{class:"size-4"})]),_:1})]))}}},ha={},Ca={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ba(i,t){return a(),c("svg",Ca,t[0]||(t[0]=[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.5 0C13.7761 0 14 0.223858 14 0.5V2H15.5C15.7761 2 16 2.22386 16 2.5C16 2.77614 15.7761 3 15.5 3H14V4.5C14 4.77614 13.7761 5 13.5 5C13.2239 5 13 4.77614 13 4.5V3H11.5C11.2239 3 11 2.77614 11 2.5C11 2.22386 11.2239 2 11.5 2H13V0.5C13 0.223858 13.2239 0 13.5 0ZM7.9998 2C4.6862 2 2 4.6862 2 7.9998C2 9.49431 2.54643 10.8612 3.45041 11.9116C4.18218 10.8499 5.63104 9.51974 7.99595 9.50011L8.0001 9.50008C9.89267 9.50009 11.5613 10.456 12.5506 11.91C13.4537 10.8598 13.9996 9.49355 13.9996 7.9998C13.9996 7.72366 14.2235 7.4998 14.4996 7.4998C14.7757 7.4998 14.9996 7.72366 14.9996 7.9998C14.9996 11.8657 11.8657 14.9996 7.9998 14.9996C4.13392 14.9996 1 11.8657 1 7.9998C1 4.13392 4.13392 1 7.9998 1C8.27594 1 8.4998 1.22386 8.4998 1.5C8.4998 1.77614 8.27594 2 7.9998 2ZM11.8227 12.6242C11.0281 11.3487 9.61378 10.5008 8.00216 10.5001C5.94811 10.518 4.73746 11.7366 4.17676 12.6241C5.21484 13.4833 6.54702 13.9996 7.9998 13.9996C9.45251 13.9996 10.7846 13.4833 11.8227 12.6242ZM8 4.5C7.0335 4.5 6.25 5.2835 6.25 6.25C6.25 7.2165 7.0335 8 8 8C8.9665 8 9.75 7.2165 9.75 6.25C9.75 5.2835 8.9665 4.5 8 4.5ZM5.25 6.25C5.25 4.73122 6.48122 3.5 8 3.5C9.51878 3.5 10.75 4.73122 10.75 6.25C10.75 7.76878 9.51878 9 8 9C6.48122 9 5.25 7.76878 5.25 6.25Z",fill:"currentColor"},null,-1)]))}const tt=N(ha,[["render",ba]]),ya={},xa={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ka(i,t){return a(),c("svg",xa,t[0]||(t[0]=[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.71639 1.68847C7.20728 1.49315 5.6781 1.84427 4.40534 2.67832C3.50159 3.27056 2.7695 4.07854 2.26943 5.02055C2.13995 5.26445 2.23271 5.56714 2.47662 5.69662C2.72052 5.8261 3.02321 5.73334 3.15269 5.48943C3.57431 4.69521 4.19153 4.01402 4.95345 3.51473C6.02649 2.81155 7.31573 2.51553 8.58803 2.6802C9.86034 2.84487 11.0317 3.45936 11.8904 4.41255C12.5455 5.13978 12.9856 6.02752 13.1713 6.97711L12.0682 6.38995C11.8245 6.2602 11.5217 6.35263 11.3919 6.59639C11.2622 6.84015 11.3546 7.14294 11.5984 7.27269L13.8052 8.44735C14.049 8.5771 14.3518 8.48468 14.4815 8.24091L15.6562 6.03407C15.7859 5.79031 15.6935 5.48752 15.4497 5.35777C15.206 5.22802 14.9032 5.32044 14.7734 5.5642L14.1448 6.74523C13.92 5.63395 13.4012 4.59563 12.6334 3.74325C11.6149 2.61265 10.2255 1.88379 8.71639 1.68847ZM7.51332 14.3501C9.0288 14.4875 10.5434 14.0781 11.7833 13.1959C12.5865 12.6244 13.2401 11.8789 13.7005 11.0233C13.8314 10.7801 13.7404 10.4769 13.4972 10.3461C13.254 10.2152 12.9508 10.3062 12.82 10.5494C12.4317 11.2708 11.8807 11.8993 11.2035 12.3811C10.1582 13.1249 8.88128 13.47 7.6036 13.3542C6.32592 13.2384 5.13186 12.6692 4.23732 11.7496C3.50475 10.9965 3.01266 10.0491 2.81428 9.02749L3.95178 9.68895C4.1905 9.82776 4.49655 9.74677 4.63536 9.50805C4.77417 9.26934 4.69318 8.96329 4.45447 8.82448L2.29329 7.56777C2.05458 7.42895 1.74853 7.50994 1.60972 7.74866L0.353003 9.90983C0.214191 10.1485 0.295179 10.4546 0.533896 10.5934C0.772613 10.7322 1.07866 10.6512 1.21747 10.4125L1.85313 9.31938C2.10072 10.4924 2.67584 11.5786 3.52051 12.4469C4.58154 13.5377 5.99784 14.2128 7.51332 14.3501Z",fill:"currentColor"},null,-1)]))}const Aa=N(ya,[["render",ka]]),wa={},$a={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Ea(i,t){return a(),c("svg",$a,t[0]||(t[0]=[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 6.5C9.10457 6.5 10 5.60457 10 4.5C10 3.39543 9.10457 2.5 8 2.5C6.89543 2.5 6 3.39543 6 4.5C6 5.60457 6.89543 6.5 8 6.5ZM8 7.5C9.65685 7.5 11 6.15685 11 4.5C11 2.84315 9.65685 1.5 8 1.5C6.34315 1.5 5 2.84315 5 4.5C5 6.15685 6.34315 7.5 8 7.5ZM12 13.5C13.1046 13.5 14 12.6046 14 11.5C14 10.3954 13.1046 9.5 12 9.5C10.8954 9.5 10 10.3954 10 11.5C10 12.6046 10.8954 13.5 12 13.5ZM12 14.5C13.6569 14.5 15 13.1569 15 11.5C15 9.84315 13.6569 8.5 12 8.5C10.3431 8.5 9 9.84315 9 11.5C9 13.1569 10.3431 14.5 12 14.5ZM6 11.5C6 12.6046 5.10457 13.5 4 13.5C2.89543 13.5 2 12.6046 2 11.5C2 10.3954 2.89543 9.5 4 9.5C5.10457 9.5 6 10.3954 6 11.5ZM7 11.5C7 13.1569 5.65685 14.5 4 14.5C2.34315 14.5 1 13.1569 1 11.5C1 9.84315 2.34315 8.5 4 8.5C5.65685 8.5 7 9.84315 7 11.5Z",fill:"currentColor"},null,-1)]))}const Ia=N(wa,[["render",Ea]]),Sa={},Ba={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-square-asterisk-icon lucide-square-asterisk"};function Ma(i,t){return a(),c("svg",Ba,t[0]||(t[0]=[e("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"},null,-1),e("path",{d:"M12 8v8"},null,-1),e("path",{d:"m8.5 14 7-4"},null,-1),e("path",{d:"m8.5 10 7 4"},null,-1)]))}const Va=N(Sa,[["render",Ma]]),La={},Qa={width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Ra(i,t){return a(),c("svg",Qa,t[0]||(t[0]=[e("path",{d:"M10.875 9.06223L3 9.06232",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("path",{d:"M6.74537 5.31699L3 9.06236L6.74527 12.8076",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("path",{d:"M14.1423 4L14.1423 14.125",stroke:"currentColor","stroke-linecap":"round"},null,-1)]))}const Da=N(La,[["render",Ra]]),Ua={},ja={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Fa(i,t){return a(),c("svg",ja,t[0]||(t[0]=[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.25 8C14.25 11.4518 11.4518 14.25 8 14.25C4.54822 14.25 1.75 11.4518 1.75 8C1.75 4.54822 4.54822 1.75 8 1.75C11.4518 1.75 14.25 4.54822 14.25 8ZM15.25 8C15.25 12.0041 12.0041 15.25 8 15.25C3.99594 15.25 0.75 12.0041 0.75 8C0.75 3.99594 3.99594 0.75 8 0.75C12.0041 0.75 15.25 3.99594 15.25 8ZM7.37988 9.37695V9.44531H8.39062V9.37695C8.39062 9.10352 8.41992 8.88542 8.47852 8.72266C8.53711 8.55664 8.62826 8.41504 8.75195 8.29785C8.87891 8.18066 9.04329 8.06185 9.24512 7.94141C9.56087 7.74609 9.8099 7.51009 9.99219 7.2334C10.1745 6.95345 10.2656 6.61328 10.2656 6.21289C10.2656 5.82878 10.1745 5.49186 9.99219 5.20215C9.81315 4.91244 9.56087 4.6862 9.23535 4.52344C8.90983 4.36068 8.52734 4.2793 8.08789 4.2793C7.69401 4.2793 7.33268 4.35579 7.00391 4.50879C6.67513 4.65853 6.41146 4.88151 6.21289 5.17773C6.01432 5.4707 5.90853 5.82878 5.89551 6.25195H6.96973C6.986 6.0013 7.04948 5.79785 7.16016 5.6416C7.27083 5.4821 7.40755 5.36491 7.57031 5.29004C7.73633 5.21517 7.90885 5.17773 8.08789 5.17773C8.28971 5.17773 8.47363 5.22005 8.63965 5.30469C8.80892 5.38932 8.94075 5.50814 9.03516 5.66113C9.13281 5.81413 9.18164 5.99479 9.18164 6.20312C9.18164 6.47005 9.11003 6.69954 8.9668 6.8916C8.82357 7.0804 8.64453 7.23828 8.42969 7.36523C8.21159 7.50195 8.02279 7.64193 7.86328 7.78516C7.70703 7.92513 7.58659 8.11556 7.50195 8.35645C7.42057 8.59408 7.37988 8.93425 7.37988 9.37695ZM7.37988 11.5205C7.51986 11.654 7.69076 11.7207 7.89258 11.7207C8.09766 11.7207 8.26855 11.654 8.40527 11.5205C8.54525 11.3838 8.61523 11.2161 8.61523 11.0176C8.61523 10.8158 8.54525 10.6481 8.40527 10.5146C8.26855 10.3779 8.09766 10.3096 7.89258 10.3096C7.69076 10.3096 7.51986 10.3779 7.37988 10.5146C7.24316 10.6481 7.1748 10.8158 7.1748 11.0176C7.1748 11.2161 7.24316 11.3838 7.37988 11.5205Z",fill:"currentColor"},null,-1)]))}const Pa=N(Ua,[["render",Fa]]),Ta={class:"flex h-screen flex-col text-ink-gray-9"},Na={class:"z-20 flex items-center justify-between border-b bg-surface-white px-5 py-2.5"},Za={class:"text-base font-medium"},Oa={class:"flex gap-1"},Ha={key:0,class:"divide-y divide-outline-gray-modals overflow-auto text-base"},za={class:"mt-1 flex items-center gap-2.5"},Ga=["innerHTML"],Ja={key:1,class:"mb-2 space-x-1 leading-5 text-ink-gray-5"},qa={class:"font-medium text-ink-gray-9"},Wa={class:"font-medium text-ink-gray-9"},Ya={class:"text-sm text-ink-gray-5"},Ka={key:1,class:"flex flex-1 flex-col items-center justify-center gap-2"},Xa={class:"text-lg font-medium text-ink-gray-4"},es={__name:"Notifications",setup(i){const{$socket:t}=jt(),{mark_as_read:r,toggle:p,mark_doc_as_read:n}=Je(),s=I(null);kt(s,()=>{Pe.value&&p()},{ignore:["#notifications-btn"]});function m(o){Y("notification_mark_as_read"),n(o)}function g(){Y("notification_mark_all_as_read"),r.reload()}At(()=>{t.off("crm_notification")}),_e(()=>{t.on("crm_notification",()=>{Ae.reload()})});function _(o){let f={leadId:o.reference_name};return o.route_name==="Deal"&&(f={dealId:o.reference_name}),{name:o.route_name,params:f,hash:o.hash}}return(o,f)=>{var d;const v=B("Button"),x=B("FeatherIcon"),b=B("RouterLink");return l(Pe)?(a(),c("div",{key:0,ref_key:"target",ref:s,class:"absolute z-20 h-screen bg-surface-white transition-all duration-300 ease-in-out",style:{"box-shadow":"8px 0px 8px rgba(0, 0, 0, 0.1)","max-width":"350px","min-width":"350px",left:"calc(100% + 1px)"}},[e("div",Ta,[e("div",Na,[e("div",Za,C(o.__("Notifications")),1),e("div",Oa,[u(l(me),{text:o.__("Mark all as read")},{default:$(()=>[e("div",null,[u(v,{variant:"ghost",onClick:f[0]||(f[0]=()=>g())},{icon:$(()=>[u(Ut,{class:"h-4 w-4"})]),_:1})])]),_:1},8,["text"]),u(l(me),{text:o.__("Close")},{default:$(()=>[e("div",null,[u(v,{variant:"ghost",onClick:f[1]||(f[1]=()=>l(p)())},{icon:$(()=>[u(x,{name:"x",class:"h-4 w-4"})]),_:1})])]),_:1},8,["text"])])]),(d=l(Ae).data)!=null&&d.length?(a(),c("div",Ha,[(a(!0),c(L,null,D(l(Ae).data,h=>(a(),y(b,{key:h.comment,to:_(h),class:"flex cursor-pointer items-start gap-2.5 px-4 py-2.5 hover:bg-surface-gray-2",onClick:k=>m(h.comment||h.notification_type_doc)},{default:$(()=>[e("div",za,[e("div",{class:J(["size-[5px] rounded-full",[h.read?"bg-transparent":"bg-surface-gray-7"]])},null,2),h.type=="WhatsApp"?(a(),y(We,{key:0,class:"size-7"})):(a(),y(Ft,{key:1,user:h.from_user.name,size:"lg"},null,8,["user"]))]),e("div",null,[h.notification_text?(a(),c("div",{key:0,innerHTML:h.notification_text},null,8,Ga)):(a(),c("div",Ja,[e("span",qa,C(h.from_user.full_name),1),e("span",null,C(o.__("mentioned you in {0}",[h.reference_doctype])),1),e("span",Wa,C(h.reference_name),1)])),e("div",Ya,C(o.__(l(Pt)(h.creation))),1)])]),_:2},1032,["to","onClick"]))),128))])):(a(),c("div",Ka,[u(qe,{class:"h-20 w-20 text-ink-gray-2"}),e("div",Xa,C(o.__("No new notifications")),1)]))])],512)):w("",!0)}}},ts={},ls={width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function as(i,t){return a(),c("svg",ls,t[0]||(t[0]=[e("path",{d:"M1 5C1 2.79086 2.79086 1 5 1H13C15.2091 1 17 2.79086 17 5V13C17 15.2091 15.2091 17 13 17H5C2.79086 17 1 15.2091 1 13V5Z",stroke:"currentColor"},null,-1),e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.7819 6.27142H11.5136H8.02453H6.28001V4.84002H11.7819V6.27142ZM8.02451 9.62623V11.5944H11.8267V13.0258H6.27999V8.19484H8.02451H11.5135V9.62623H8.02451Z",fill:"currentColor"},null,-1)]))}const ss=N(ts,[["render",as]]),ns={class:"flex items-end space-x-1"},Te={__name:"ImageUploader",props:{image_url:String,image_type:{type:String,default:"image/*"},label:{type:String,default:""}},emits:["upload","remove"],setup(i,{emit:t}){return(r,p)=>(a(),y(l(Xe),{"file-types":i.image_type,class:"text-base",onSuccess:p[1]||(p[1]=n=>{r.$emit("upload",n.file_url)})},{default:$(({progress:n,uploading:s,openFileSelector:m})=>[e("div",ns,[u(l(P),{onClick:m},{default:$(()=>[T(C(s?`Uploading ${n}%`:i.image_url?"Change":"Upload"),1)]),_:2},1032,["onClick"]),i.image_url?(a(),y(l(P),{key:0,onClick:p[0]||(p[0]=g=>r.$emit("remove"))},{default:$(()=>p[2]||(p[2]=[T("Remove")])),_:1})):w("",!0)])]),_:1},8,["file-types"]))}},os={class:"flex h-full flex-col gap-8 p-8 text-ink-gray-9"},is={class:"flex gap-2 text-xl font-semibold leading-none h-5"},rs={key:0,class:"flex-1 flex flex-col gap-8 overflow-y-auto"},cs={class:"flex w-full"},us={class:"flex flex-col justify-between gap-4"},ds={class:"text-base font-semibold text-ink-gray-9"},ms={class:"flex flex-1 gap-5"},ps={class:"flex items-center justify-center rounded border border-outline-gray-modals px-10 py-2"},_s=["src"],fs={class:"flex flex-1 flex-col gap-2"},gs={class:"text-p-sm text-ink-gray-6"},vs={class:"flex flex-col justify-between gap-4"},hs={class:"text-base font-semibold text-ink-gray-9"},Cs={class:"flex flex-1 gap-5"},bs={class:"flex items-center justify-center rounded border border-outline-gray-modals px-10 py-2"},ys=["src"],xs={class:"flex flex-1 flex-col gap-2"},ks={class:"text-p-sm text-ink-gray-6"},As={class:"flex flex-col justify-between gap-4"},ws={class:"text-base font-semibold text-ink-gray-9"},$s={class:"flex flex-1"},Es={class:"flex justify-between flex-row-reverse"},Is={__name:"GeneralSettings",setup(i){const{_settings:t,setupBrand:r}=Jt();function p(){t.save.submit(null,{onSuccess:()=>{ee.value=!1,r()}})}return(n,s)=>{var g,_,o,f;const m=B("Button");return a(),c("div",os,[e("h2",is,[T(C(n.__("General"))+" ",1),l(t).isDirty?(a(),y(l(ye),{key:0,label:n.__("Not Saved"),variant:"subtle",theme:"orange"},null,8,["label"])):w("",!0)]),l(t).doc?(a(),c("div",rs,[e("div",cs,[u(l(Me),{type:"text",class:"w-1/2",modelValue:l(t).doc.brand_name,"onUpdate:modelValue":s[0]||(s[0]=v=>l(t).doc.brand_name=v),label:n.__("Brand Name")},null,8,["modelValue","label"])]),e("div",us,[e("span",ds,C(n.__("Logo")),1),e("div",ms,[e("div",ps,[e("img",{src:((g=l(t).doc)==null?void 0:g.brand_logo)||"/assets/crm/images/logo.png",alt:"Logo",class:"size-8 rounded"},null,8,_s)]),e("div",fs,[u(Te,{label:"Favicon",image_type:"image/ico",image_url:(_=l(t).doc)==null?void 0:_.brand_logo,onUpload:s[1]||(s[1]=v=>l(t).doc.brand_logo=v),onRemove:s[2]||(s[2]=()=>l(t).doc.brand_logo="")},null,8,["image_url"]),e("span",gs,C(n.__("Appears in the left sidebar. Recommended size is 32x32 px in PNG or SVG")),1)])])]),e("div",vs,[e("span",hs,C(n.__("Favicon")),1),e("div",Cs,[e("div",bs,[e("img",{src:((o=l(t).doc)==null?void 0:o.favicon)||"/assets/crm/images/logo.png",alt:"Favicon",class:"size-8 rounded"},null,8,ys)]),e("div",xs,[u(Te,{label:"Favicon",image_type:"image/ico",image_url:(f=l(t).doc)==null?void 0:f.favicon,onUpload:s[3]||(s[3]=v=>l(t).doc.favicon=v),onRemove:s[4]||(s[4]=()=>l(t).doc.favicon="")},null,8,["image_url"]),e("span",ks,C(n.__("Appears next to the title in your browser tab. Recommended size is 32x32 px in PNG or ICO")),1)])])]),e("div",As,[e("span",ws,C(n.__("Home actions")),1),e("div",$s,[u(Nt,{modelValue:l(t).doc.dropdown_items,"onUpdate:modelValue":s[5]||(s[5]=v=>l(t).doc.dropdown_items=v),doctype:"CRM Dropdown Item",parentDoctype:"FCRM Settings",parentFieldname:"dropdown_items"},null,8,["modelValue"])])])])):w("",!0),e("div",Es,[u(m,{variant:"solid",label:n.__("Update"),disabled:!l(t).isDirty,onClick:p},null,8,["label","disabled"]),u(l(fe),{message:l(t).save.error},null,8,["message"])])])}}},Ss={class:"flex h-full flex-col gap-8 p-8 text-ink-gray-9"},Bs={class:"flex gap-2 text-xl font-semibold leading-none h-5"},Ms={class:"flex-1 flex flex-col gap-8 overflow-y-auto"},Vs={class:"block text-xs text-ink-gray-5 mb-1.5"},Ls={class:"p-2 group bg-surface-gray-2 hover:bg-surface-gray-3 rounded"},Qs={key:0,class:"flex flex-col gap-4"},Rs={class:"flex items-center justify-between text-base font-semibold"},Ds={class:"flex flex-col gap-1"},Us={class:"text-base"},js={class:"text-ink-gray-9"},Fs={class:"text-ink-gray-5"},Ps={class:"flex justify-between items-center gap-2"},Ts={__name:"InviteMemberPage",setup(i){const{updateOnboardingStep:t}=ie("frappecrm"),r=I([]),p=I("Sales User"),n=I(null),s=R(()=>({"Sales Manager":"Can manage and invite new members, and create public & private views (reports).","Sales User":"Can work with leads and deals and create private views (reports)."})[p.value]),m={"Sales User":__("Regular Access"),"Sales Manager":__("Manager Access")},g=K({url:"crm.api.invite_by_email",makeParams(){return{emails:Tt(r.value),role:p.value}},onSuccess(o){var f;(f=o==null?void 0:o.existing_invites)!=null&&f.length?n.value=__("Agent with email {0} already exists",[o.existing_invites.join(", ")]):(p.value="Sales User",n.value=null),r.value=[],_.reload(),t("invite_your_team")},onError(o){var f;n.value=(f=o==null?void 0:o.messages)==null?void 0:f[0]}}),_=He({type:"list",doctype:"CRM Invitation",filters:{status:"Pending"},fields:["name","email","role"],auto:!0});return(o,f)=>{var b;const v=B("Button"),x=B("ErrorMessage");return a(),c("div",Ss,[e("h2",Bs,C(o.__("Send Invites To")),1),e("div",Ms,[e("div",null,[e("label",Vs,C(o.__("Invite by email")),1),e("div",Ls,[u(Lt,{class:"flex-1",inputClass:"!bg-surface-gray-2 hover:!bg-surface-gray-3 group-hover:!bg-surface-gray-3",placeholder:o.__("john@doe.com"),modelValue:r.value,"onUpdate:modelValue":f[0]||(f[0]=d=>r.value=d),validate:l(Ye),"error-message":d=>o.__("{0} is an invalid email address",[d]),fetchContacts:!1},null,8,["placeholder","modelValue","validate","error-message"])]),u(l(Me),{type:"select",class:"mt-4",modelValue:p.value,"onUpdate:modelValue":f[1]||(f[1]=d=>p.value=d),label:o.__("Invite as"),options:[{label:o.__("Regular Access"),value:"Sales User"},{label:o.__("Manager Access"),value:"Sales Manager"}],description:s.value},null,8,["modelValue","label","options","description"])]),(b=l(_).data)!=null&&b.length&&!r.value.length?(a(),c("div",Qs,[e("div",Rs,[e("div",null,C(o.__("Pending Invites")),1)]),e("ul",Ds,[(a(!0),c(L,null,D(l(_).data,d=>(a(),c("li",{class:"flex items-center justify-between px-2 py-1 rounded-lg bg-surface-gray-2",key:d.name},[e("div",Us,[e("span",js,C(d.email),1),e("span",Fs," ("+C(m[d.role])+") ",1)]),e("div",null,[u(l(me),{text:"Delete Invitation"},{default:$(()=>[e("div",null,[u(v,{icon:"x",variant:"ghost",loading:l(_).delete.loading&&l(_).delete.params.name===d.name,onClick:h=>l(_).delete.submit(d.name)},null,8,["loading","onClick"])])]),_:2},1024)])]))),128))])])):w("",!0)]),e("div",Ps,[e("div",null,[n.value?(a(),y(x,{key:0,message:n.value},null,8,["message"])):w("",!0)]),u(v,{label:o.__("Send Invites"),variant:"solid",disabled:!r.value.length,onClick:f[2]||(f[2]=d=>l(g).submit()),loading:l(g).loading},null,8,["label","disabled","loading"])])])}}},Ns={class:"flex flex-col items-center"},Zs=["onClick"],Os={class:"inline-block rounded-md bg-surface-gray-7/60 px-2 py-1 text-ink-white"},Hs=["src"],zs={key:1,class:"h-64 w-64 rounded-full bg-surface-gray-2"},Gs={class:"mt-4 flex items-center gap-4"},Js={__name:"ProfileImageEditor",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(i){const t=le(i,"modelValue");function r(n){t.value.user_image=n}function p(n){let s=n.name.split(".").pop().toLowerCase();if(!["png","jpg"].includes(s))return"Only PNG and JPG images are allowed"}return(n,s)=>{const m=B("ErrorMessage"),g=B("Button");return a(),y(l(Xe),{onSuccess:s[1]||(s[1]=_=>r(_.file_url)),validateFile:p},{default:$(({file:_,progress:o,error:f,uploading:v,openFileSelector:x})=>[e("div",Ns,[e("button",{class:"group relative rounded-full border-2",onClick:x},[e("div",{class:J(["absolute inset-0 grid place-items-center rounded-full bg-gray-400/20 text-base text-ink-gray-5 transition-opacity",[v?"opacity-100":"opacity-0 group-hover:opacity-100","drop-shadow-sm"]])},[e("span",Os,C(v?`Uploading ${o}%`:t.value.user_image?"Change Image":"Upload Image"),1)],2),t.value.user_image?(a(),c("img",{key:0,class:"h-64 w-64 rounded-full object-cover",src:t.value.user_image,alt:"Profile Photo"},null,8,Hs)):(a(),c("div",zs))],8,Zs),u(m,{class:"mt-4",message:f},null,8,["message"]),e("div",Gs,[t.value.user_image?(a(),y(g,{key:0,onClick:s[0]||(s[0]=b=>r(null))},{default:$(()=>s[2]||(s[2]=[T(" Remove ")])),_:1})):w("",!0)])])]),_:1})}}},qs={class:"flex h-full flex-col gap-8 p-8 text-ink-gray-9"},Ws={class:"flex-1 flex flex-col gap-8 mt-2 overflow-y-auto"},Ys={key:0,class:"flex w-full items-center justify-between"},Ks={class:"flex items-center gap-4"},Xs={class:"flex flex-col gap-1"},en={class:"text-2xl font-semibold text-ink-gray-9"},tn={class:"text-base text-ink-gray-7"},ln={class:"flex flex-col gap-4"},an={class:"flex justify-between gap-4"},sn={class:"flex justify-between gap-4"},nn={class:"flex justify-between flex-row-reverse"},on={__name:"ProfileSettings",setup(i){const{getUser:t,users:r}=ge(),{updateOnboardingStep:p}=ie("frappecrm"),n=R(()=>t()||{}),s=I(!1),m=I({}),g=I(!1),_=I("");function o(){g.value=!0;let f=!1;m.value.new_password&&(f=!0);const v={first_name:m.value.first_name,last_name:m.value.last_name,user_image:m.value.user_image,email:m.value.email,new_password:m.value.new_password};K({url:"frappe.client.set_value",params:{doctype:"User",name:n.value.name,fieldname:v},auto:!0,onSuccess:()=>{f&&p("setup_your_password"),g.value=!1,_.value="",m.value.new_password="",s.value=!1,G.success(__("Profile updated successfully")),r.reload()},onError:x=>{g.value=!1,_.value=x.message}})}return _e(()=>{m.value={...n.value}}),(f,v)=>{const x=B("Button"),b=B("FormControl");return a(),c("div",qs,[e("div",Ws,[m.value?(a(),c("div",Ys,[e("div",Ks,[u(l(Ke),{class:"!size-16",image:m.value.user_image,label:m.value.full_name},null,8,["image","label"]),e("div",Xs,[e("span",en,C(m.value.full_name),1),e("span",tn,C(m.value.email),1)])]),u(x,{label:f.__("Edit profile photo"),onClick:v[0]||(v[0]=d=>s.value=!0)},null,8,["label"]),u(l(Be),{options:{title:f.__("Edit profile photo")},modelValue:s.value,"onUpdate:modelValue":v[2]||(v[2]=d=>s.value=d)},{"body-content":$(()=>[u(Js,{modelValue:m.value,"onUpdate:modelValue":v[1]||(v[1]=d=>m.value=d)},null,8,["modelValue"])]),actions:$(()=>[u(x,{variant:"solid",class:"w-full",loading:g.value,onClick:o,label:f.__("Save")},null,8,["loading","label"])]),_:1},8,["options","modelValue"])])):w("",!0),e("div",ln,[e("div",an,[u(b,{class:"w-full",label:"First name",modelValue:m.value.first_name,"onUpdate:modelValue":v[3]||(v[3]=d=>m.value.first_name=d)},null,8,["modelValue"]),u(b,{class:"w-full",label:"Last name",modelValue:m.value.last_name,"onUpdate:modelValue":v[4]||(v[4]=d=>m.value.last_name=d)},null,8,["modelValue"])]),e("div",sn,[u(b,{class:"w-full",label:"Email",modelValue:m.value.email,"onUpdate:modelValue":v[5]||(v[5]=d=>m.value.email=d),disabled:!0},null,8,["modelValue"]),u(Zt,{class:"w-full",label:"Set new password",modelValue:m.value.new_password,"onUpdate:modelValue":v[6]||(v[6]=d=>m.value.new_password=d)},null,8,["modelValue"])])])]),e("div",nn,[u(x,{variant:"solid",label:f.__("Update"),loading:g.value,onClick:o},null,8,["label","loading"]),u(l(fe),{message:_.value},null,8,["message"])])])}}},rn={class:"flex h-full flex-col gap-8"},cn={class:"flex gap-2 text-xl font-semibold leading-none h-5 text-ink-gray-9"},un={key:0,class:"flex-1 overflow-y-auto"},dn={key:1,class:"flex flex-1 items-center justify-center"},mn={class:"flex justify-between gap-2"},lt={__name:"SettingsPage",props:{doctype:{type:String,required:!0},title:{type:String,default:""},successMessage:{type:String,default:"Updated Successfully"}},setup(i){const t=i,r=K({url:"crm.api.doc.get_fields",cache:["fields",t.doctype],params:{doctype:t.doctype,allow_all_fieldtypes:!0},auto:!0}),p=Ie({doctype:t.doctype,name:t.doctype,fields:["*"],auto:!0,setValue:{onSuccess:()=>{G.success(__(t.successMessage))},onError:s=>{G.error(s.message+": "+s.messages[0])}}}),n=R(()=>{if(!r.data)return[];let s=[],m=r.data;if(m[0].type!="Tab Break"){let g=[];m[0].type!="Section Break"&&g.push({name:"first_section",columns:[{name:"first_column",fields:[]}]}),s.push({name:"first_tab",sections:g})}return m.forEach(g=>{let _=s[s.length-1],o=s.length?_.sections:[];if(g.fieldtype==="Tab Break")s.push({label:g.label,name:g.fieldname,sections:[{name:"section_"+q(),columns:[{name:"column_"+q(),fields:[]}]}]});else if(g.fieldtype==="Section Break")o.push({label:g.label,name:g.fieldname,hideBorder:g.hide_border,columns:[{name:"column_"+q(),fields:[]}]});else if(g.fieldtype==="Column Break")o[o.length-1].columns.push({name:g.fieldname,fields:[]});else{let f=o[o.length-1];f.columns[f.columns.length-1].fields.push(g)}}),s});return(s,m)=>{var _;const g=B("Button");return a(),c("div",rn,[e("h2",cn,[e("div",null,C(i.title||s.__(i.doctype)),1),l(p).isDirty?(a(),y(l(ye),{key:0,label:s.__("Not Saved"),variant:"subtle",theme:"orange"},null,8,["label"])):w("",!0)]),l(p).get.loading?(a(),c("div",dn,[u(l(et),{class:"size-8"})])):(a(),c("div",un,[(_=l(p))!=null&&_.doc&&n.value?(a(),y(he,{key:0,tabs:n.value,data:l(p).doc,doctype:i.doctype},null,8,["tabs","data","doctype"])):w("",!0)])),e("div",mn,[e("div",null,[u(l(fe),{class:"mt-2",message:l(p).save.error},null,8,["message"])]),u(g,{loading:l(p).save.loading,label:s.__("Update"),variant:"solid",onClick:m[0]||(m[0]=o=>l(p).save.submit())},null,8,["loading","label"])])])}}},pn={__name:"WhatsAppSettings",setup(i){return(t,r)=>(a(),y(lt,{doctype:"WhatsApp Settings",class:"p-8"}))}},_n={__name:"ERPNextSettings",setup(i){return(t,r)=>(a(),y(lt,{doctype:"ERPNext CRM Settings",title:t.__("ERPNext Settings"),successMessage:t.__("ERPNext Settings updated"),class:"p-8"},null,8,["title","successMessage"]))}},fn={class:"flex h-full flex-col gap-8 p-8"},gn={class:"flex gap-2 text-xl font-semibold leading-none h-5 text-ink-gray-9"},vn={key:0,class:"flex-1 flex flex-col gap-8 overflow-y-auto"},hn={key:0,class:"flex flex-col justify-between gap-4"},Cn={class:"text-base font-semibold text-ink-gray-9"},bn={key:1,class:"flex flex-col justify-between gap-4"},yn={class:"text-base font-semibold text-ink-gray-9"},xn={key:1,class:"flex flex-1 items-center justify-center"},kn={class:"flex justify-between gap-2"},An={__name:"TelephonySettings",setup(i){const{isManager:t,isAgent:r}=ge(),p=K({url:"crm.api.doc.get_fields",cache:["fields","CRM Twilio Settings"],params:{doctype:"CRM Twilio Settings",allow_all_fieldtypes:!0},auto:!0}),n=K({url:"crm.api.doc.get_fields",cache:["fields","CRM Exotel Settings"],params:{doctype:"CRM Exotel Settings",allow_all_fieldtypes:!0},auto:!0}),s=Ie({doctype:"CRM Twilio Settings",name:"CRM Twilio Settings",fields:["*"],auto:!0,setValue:{onSuccess:()=>{G.success(__("Twilio settings updated successfully"))},onError:d=>{G.error(d.message+": "+d.messages[0])}}}),m=Ie({doctype:"CRM Exotel Settings",name:"CRM Exotel Settings",fields:["*"],auto:!0,setValue:{onSuccess:()=>{G.success(__("Exotel settings updated successfully"))},onError:d=>{G.error(d.message+": "+d.messages[0])}}}),g=R(()=>{if(!p.data)return[];let d=[],h=p.data;if(h[0].type!="Tab Break"){let k=[];h[0].type!="Section Break"&&k.push({name:"first_section",columns:[{name:"first_column",fields:[]}]}),d.push({name:"first_tab",sections:k})}return h.forEach(k=>{let V=d[d.length-1],M=d.length?V.sections:[];if(k.fieldtype==="Tab Break")d.push({label:k.label,name:k.fieldname,sections:[{name:"section_"+q(),columns:[{name:"column_"+q(),fields:[]}]}]});else if(k.fieldtype==="Section Break")M.push({label:k.label,name:k.fieldname,hideBorder:k.hide_border,columns:[{name:"column_"+q(),fields:[]}]});else if(k.fieldtype==="Column Break")M[M.length-1].columns.push({name:k.fieldname,fields:[]});else{let U=M[M.length-1];U.columns[U.columns.length-1].fields.push(k)}}),d}),_=R(()=>{if(!n.data)return[];let d=[],h=n.data;if(h[0].type!="Tab Break"){let k=[];h[0].type!="Section Break"&&k.push({name:"first_section",columns:[{name:"first_column",fields:[]}]}),d.push({name:"first_tab",sections:k})}return h.forEach(k=>{let V=d[d.length-1],M=d.length?V.sections:[];if(k.fieldtype==="Tab Break")d.push({label:k.label,name:k.fieldname,sections:[{name:"section_"+q(),columns:[{name:"column_"+q(),fields:[]}]}]});else if(k.fieldtype==="Section Break")M.push({label:k.label,name:k.fieldname,hideBorder:k.hide_border,columns:[{name:"column_"+q(),fields:[]}]});else if(k.fieldtype==="Column Break")M[M.length-1].columns.push({name:k.fieldname,fields:[]});else{let U=M[M.length-1];U.columns[U.columns.length-1].fields.push(k)}}),d}),o=I(!1);Ve(X,()=>{o.value=!0});function f(){b()&&(o.value&&v(),t()&&(s.isDirty&&s.save.submit(),m.isDirty&&m.save.submit()))}async function v(){await oe("crm.integrations.api.set_default_calling_medium",{medium:X.value}),o.value=!1,x.value="",G.success(__("Default calling medium updated successfully"))}const x=I("");function b(){return r()&&!t()?!0:X.value==="Twilio"&&!s.doc.enabled?(x.value=__("Twilio is not enabled"),!1):X.value==="Exotel"&&!m.doc.enabled?(x.value=__("Exotel is not enabled"),!1):!0}return(d,h)=>{var V,M;const k=B("Button");return a(),c("div",fn,[e("h2",gn,[e("div",null,C(d.__("Telephony Settings")),1),l(s).isDirty||l(m).isDirty||o.value?(a(),y(l(ye),{key:0,label:d.__("Not Saved"),variant:"subtle",theme:"orange"},null,8,["label"])):w("",!0)]),!l(s).get.loading||!l(m).get.loading?(a(),c("div",vn,[u(l(Me),{type:"select",modelValue:l(X),"onUpdate:modelValue":h[0]||(h[0]=U=>ne(X)?X.value=U:null),label:d.__("Default medium"),options:[{label:d.__(""),value:""},{label:d.__("Twilio"),value:"Twilio"},{label:d.__("Exotel"),value:"Exotel"}],class:"w-1/2",description:d.__("Default calling medium for logged in user")},null,8,["modelValue","label","options","description"]),l(t)()?(a(),c("div",hn,[e("span",Cn,C(d.__("Twilio")),1),(V=l(s))!=null&&V.doc&&g.value?(a(),y(he,{key:0,tabs:g.value,data:l(s).doc,doctype:"CRM Twilio Settings"},null,8,["tabs","data"])):w("",!0)])):w("",!0),l(t)()?(a(),c("div",bn,[e("span",yn,C(d.__("Exotel")),1),(M=l(m))!=null&&M.doc&&_.value?(a(),y(he,{key:0,tabs:_.value,data:l(m).doc,doctype:"CRM Exotel Settings"},null,8,["tabs","data"])):w("",!0)])):w("",!0)])):(a(),c("div",xn,[u(l(et),{class:"size-8"})])),e("div",kn,[e("div",null,[u(l(fe),{class:"mt-2",message:l(s).save.error||l(m).save.error||x.value},null,8,["message"])]),u(k,{loading:l(s).save.loading||l(m).save.loading,label:d.__("Update"),variant:"solid",onClick:f},null,8,["loading","label"])])])}}},wn={class:"lucide lucide-circle-alert",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function $n(i,t){return a(),c("svg",wn,t[0]||(t[0]=[e("circle",{cx:"12",cy:"12",r:"10"},null,-1),e("line",{x1:"12",x2:"12",y1:"8",y2:"12"},null,-1),e("line",{x1:"12",x2:"12.01",y1:"16",y2:"16"},null,-1)]))}const at=Q({name:"lucide-circle-alert",render:$n}),st="/assets/crm/frontend/assets/gmail-6497f877.png",nt="/assets/crm/frontend/assets/outlook-e028ee9b.png",ot="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAwMAAALUBAMAAAClQPMzAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAlwSFlzAAAuIwAALiMBeKU/dgAAACRQTFRFR3BMNqzpdMXvXb3tr+f3o+P1AJ/ZGoPjALPjmeH1dc3uBqfjM5e/jQAAAAZ0Uk5TAPVwwVLTgnc47wAABIBJREFUeNrt1rEJwlAYhdEHNpZa2UpwAxewcAXtbdJYpQo4gATsBVdwAOcTd/DyknC+9zY4XPhLkSRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJGmGL/cTazo5gOWR69KFWCBAgQIAAAQIECBAgmArBHYEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAIGLCIEVIECAAAECBC4iBFaAAAECBAgQuIgQWAECBAgQIEDgIkJgBQgQIECAAMHfO4U6X9tP4reb9aX77/v9rqtH8Ar1bEOl1oWgNsGAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAjqEfShbu9QTajD/AhS8yqzCwECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIKheE2p3DFUkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZLG2Bet4fvU2eVggAAAAABJRU5ErkJggg==",it="/assets/crm/frontend/assets/sparkpost-3d6653ba.webp",rt="/assets/crm/frontend/assets/yahoo-bf2216d3.png",ct="/assets/crm/frontend/assets/yandex-5e1e6be8.png",ut="/assets/crm/frontend/assets/frappe-mail-579163d7.svg",dt=[{label:__("Account Name"),name:"email_account_name",type:"text",placeholder:__("Support / Sales")},{label:"Email ID",name:"email_id",type:"email",placeholder:"johndoe@example.com"}],mt=[{label:__("Enable Incoming"),name:"enable_incoming",type:"checkbox",description:__("If enabled, records can be created from the incoming emails on this account.")},{label:__("Enable Outgoing"),name:"enable_outgoing",type:"checkbox",description:__("If enabled, outgoing emails can be sent from this account.")},{label:__("Default Incoming"),name:"default_incoming",type:"checkbox",description:__("If enabled, all replies to your company (eg: replies@yourcomany.com) will come to this account. Note: Only one account can be default incoming.")},{label:__("Default Outgoing"),name:"default_outgoing",type:"checkbox",description:__("If enabled, all outgoing emails will be sent from this account. Note: Only one account can be default outgoing.")}],pt=[...dt,{label:__("Password"),name:"password",type:"password",placeholder:"********"}],_t=[...dt,{label:"Frappe Mail Site",name:"frappe_mail_site",type:"text",placeholder:"https://frappemail.com"},{label:"API Key",name:"api_key",type:"text",placeholder:"********"},{label:"API Secret",name:"api_secret",type:"password",placeholder:"********"}],ft=[{name:"GMail",icon:st,info:__(`Setting up GMail requires you to enable two factor authentication
		  and app specific passwords. Read more`),link:"https://support.google.com/accounts/answer/185833",custom:!1},{name:"Outlook",icon:nt,info:__(`Setting up Outlook requires you to enable two factor authentication
		  and app specific passwords. Read more`),link:"https://support.microsoft.com/en-us/account-billing/how-to-get-and-use-app-passwords-5896ed9b-4263-e681-128a-a6f2979a7944",custom:!1},{name:"Sendgrid",icon:ot,info:__(`Setting up Sendgrid requires you to enable two factor authentication
		  and app specific passwords. Read more `),link:"https://sendgrid.com/docs/ui/account-and-settings/two-factor-authentication/",custom:!1},{name:"SparkPost",icon:it,info:__(`Setting up SparkPost requires you to enable two factor authentication
		  and app specific passwords. Read more `),link:"https://support.sparkpost.com/docs/my-account-and-profile/enabling-two-factor-authentication",custom:!1},{name:"Yahoo",icon:rt,info:__(`Setting up Yahoo requires you to enable two factor authentication
		  and app specific passwords. Read more `),link:"https://help.yahoo.com/kb/SLN15241.html",custom:!1},{name:"Yandex",icon:ct,info:__(`Setting up Yandex requires you to enable two factor authentication
		  and app specific passwords. Read more `),link:"https://yandex.com/support/id/authorization/app-passwords.html",custom:!1},{name:"Frappe Mail",icon:ut,info:__("Setting up Frappe Mail requires you to have an API key and API Secret of your email account. Read more "),link:"https://github.com/frappe/mail",custom:!0}],gt={GMail:st,Outlook:nt,Sendgrid:ot,SparkPost:it,Yahoo:rt,Yandex:ct,"Frappe Mail":ut};function vt(i,t){if(!i.email_account_name)return __("Account name is required");if(!i.email_id)return __("Email ID is required");if(!Ye(i.email_id))return __("Invalid email ID");if(!t&&!i.password)return __("Password is required");if(t){if(!i.api_key)return __("API Key is required");if(!i.api_secret)return}return""}const En=["src"],In={key:0,class:"text-xs text-center text-gray-700 dark:text-gray-500 mt-2"},Qe={__name:"EmailProviderIcon",props:{logo:{type:String,required:!0},serviceName:{type:String,default:""},selected:{type:Boolean,default:!1}},setup(i){return(t,r)=>(a(),c(L,null,[e("div",{class:J(["flex items-center justify-center w-8 h-8 bg-gray-100 cursor-pointer rounded-xl hover:bg-gray-200",{"ring-2 ring-gray-500 dark:ring-gray-100":i.selected}])},[e("img",{src:i.logo,class:"w-4 h-4"},null,8,En)],2),i.serviceName?(a(),c("p",In,C(i.serviceName),1)):w("",!0)],64))}},Sn={class:"flex flex-col h-full gap-4"},Bn={role:"heading","aria-level":"1",class:"flex flex-col gap-1"},Mn={class:"text-xl font-semibold text-ink-gray-9"},Vn={class:"text-sm text-gray-600"},Ln={class:"flex flex-wrap items-center"},Qn=["onClick"],Rn={key:0,class:"flex flex-col gap-4"},Dn={class:"flex items-center gap-2 p-2 rounded-md ring-1 ring-gray-400 dark:ring-gray-700 text-gray-700 dark:text-gray-500"},Un={class:"text-xs text-wrap"},jn=["href"],Fn={class:"flex flex-col gap-4"},Pn={class:"grid grid-cols-1 gap-4"},Tn={class:"grid grid-cols-2 gap-4"},Nn={class:"text-gray-500 text-p-sm"},Zn={key:1,class:"flex justify-between mt-auto"},On={__name:"EmailAdd",setup(i,{emit:t}){const r=t,p=Le({service:"",email_account_name:"",email_id:"",password:"",api_key:"",api_secret:"",frappe_mail_site:"",enable_incoming:!1,enable_outgoing:!1,default_incoming:!1,default_outgoing:!1}),n=I(null),s=R(()=>n.value.custom?_t:pt);function m(f){n.value=f,p.service=f.name}const g=K({url:"crm.api.settings.create_email_account",makeParams:f=>({...f}),onSuccess:()=>{G.success(__("Email account created successfully")),r("update:step","email-list")},onError:()=>{_.value=__("Failed to create email account, Invalid credentials")}}),_=I();function o(){_.value=vt(p,n.value.custom),!_.value&&g.submit({data:p})}return(f,v)=>{const x=B("FormControl"),b=B("ErrorMessage"),d=B("Button");return a(),c("div",Sn,[e("div",Bn,[e("h2",Mn,C(f.__("Setup Email")),1),e("p",Vn,C(f.__("Choose the email service provider you want to configure.")),1)]),e("div",Ln,[(a(!0),c(L,null,D(l(ft),h=>{var k;return a(),c("div",{key:h.name,class:"flex flex-col items-center gap-1 mt-4 w-[70px]",onClick:V=>m(h)},[u(Qe,{"service-name":h.name,logo:h.icon,selected:((k=n.value)==null?void 0:k.name)===(h==null?void 0:h.name)},null,8,["service-name","logo","selected"])],8,Qn)}),128))]),n.value?(a(),c("div",Rn,[e("div",Dn,[u(l(at),{class:"w-5 h-6 w-min-5 w-max-5 min-h-5 max-w-5"}),e("div",Un,[T(C(n.value.info)+" ",1),e("a",{href:n.value.link,target:"_blank",class:"underline"},"here",8,jn),v[1]||(v[1]=T(". "))])]),e("div",Fn,[e("div",Pn,[(a(!0),c(L,null,D(s.value,h=>(a(),c("div",{key:h.name,class:"flex flex-col gap-1"},[u(x,{modelValue:p[h.name],"onUpdate:modelValue":k=>p[h.name]=k,label:h.label,name:h.name,type:h.type,placeholder:h.placeholder},null,8,["modelValue","onUpdate:modelValue","label","name","type","placeholder"])]))),128))]),e("div",Tn,[(a(!0),c(L,null,D(l(mt),h=>(a(),c("div",{key:h.name,class:"flex flex-col gap-1"},[u(x,{modelValue:p[h.name],"onUpdate:modelValue":k=>p[h.name]=k,label:h.label,name:h.name,type:h.type},null,8,["modelValue","onUpdate:modelValue","label","name","type"]),e("p",Nn,C(h.description),1)]))),128))]),_.value?(a(),y(b,{key:0,class:"ml-1",message:_.value},null,8,["message"])):w("",!0)])])):w("",!0),n.value?(a(),c("div",Zn,[u(d,{label:"Back",theme:"gray",variant:"outline",disabled:l(g).loading,onClick:v[0]||(v[0]=h=>r("update:step","email-list"))},null,8,["disabled"]),u(d,{label:"Create",variant:"solid",loading:l(g).loading,onClick:o},null,8,["loading"])])):w("",!0)])}}},Hn={class:"flex items-center justify-between p-1 py-3 border-b border-gray-200 dark:border-gray-700 cursor-pointer"},zn={class:"flex items-center justify-between gap-2"},Gn={class:"text-sm font-semibold text-ink-gray-9"},Jn={class:"text-sm text-gray-500"},qn={__name:"EmailAccountCard",props:{emailAccount:{type:Object,required:!0}},setup(i){const t=i,r=R(()=>t.emailAccount.default_incoming&&t.emailAccount.default_outgoing?__("Default Sending and Inbox"):t.emailAccount.default_incoming?__("Default Inbox"):t.emailAccount.default_outgoing?__("Default Sending"):__("Inbox"));return(p,n)=>{const s=B("Badge");return a(),c("div",Hn,[e("div",zn,[u(Qe,{logo:l(gt)[i.emailAccount.service]},null,8,["logo"]),e("div",null,[e("p",Gn,C(i.emailAccount.email_account_name),1),e("div",Jn,C(i.emailAccount.email_id),1)])]),e("div",null,[u(s,{variant:"subtle",label:r.value,theme:p.gray},null,8,["label","theme"])])])}}},Wn={class:"flex items-center justify-between text-ink-gray-9"},Yn={class:"flex gap-2 text-xl font-semibold leading-none h-5"},Kn={key:0,class:"mt-4"},Xn={key:1,class:"flex items-center justify-center h-64 text-gray-500"},eo={__name:"EmailAccountList",emits:["update:step"],setup(i,{emit:t}){const r=t,p=He({doctype:"Email Account",cache:!0,fields:["*"],filters:{email_id:["Not Like","%example%"]},pageLength:10,auto:!0,onSuccess:n=>{n.forEach(s=>{s.enable_incoming=!!s.enable_incoming,s.enable_outgoing=!!s.enable_outgoing,s.default_incoming=!!s.default_incoming,s.default_outgoing=!!s.default_outgoing})}});return(n,s)=>{var _;const m=wt,g=B("Button");return a(),c("div",null,[e("div",Wn,[e("h2",Yn,C(n.__("Email Accounts")),1),u(g,{label:n.__("Add Account"),theme:"gray",variant:"solid",onClick:s[0]||(s[0]=o=>r("update:step","email-add")),class:"mr-8"},{prefix:$(()=>[u(m,{class:"w-4 h-4"})]),_:1},8,["label"])]),!l(p).loading&&((_=l(p).data)!=null&&_.length)?(a(),c("div",Kn,[(a(!0),c(L,null,D(l(p).data,o=>(a(),c("div",{key:o.name},[u(qn,{emailAccount:o,onClick:f=>r("update:step","email-edit",o)},null,8,["emailAccount","onClick"])]))),128))])):(a(),c("div",Xn,C(n.__("Please add an email account to continue.")),1))])}}},to={class:"flex flex-col h-full gap-4"},lo={role:"heading","aria-level":"1",class:"flex justify-between gap-1"},ao={class:"text-xl font-semibold text-ink-gray-9"},so={class:"w-fit"},no={class:"flex items-center gap-2 p-2 rounded-md ring-1 ring-gray-400 dark:ring-gray-700"},oo={class:"text-xs text-gray-700 dark:text-gray-500 text-wrap"},io=["href"],ro={class:"flex flex-col gap-4"},co={class:"grid grid-cols-1 gap-4"},uo={class:"grid grid-cols-2 gap-4"},mo={class:"text-gray-500 text-p-sm"},po={class:"flex justify-between mt-auto"},_o={__name:"EmailEdit",props:{accountData:null},setup(i,{emit:t}){var k,V,M,U;const r=i,p=t,n=Le({email_account_name:r.accountData.email_account_name||"",service:r.accountData.service||"",email_id:r.accountData.email_id||"",api_key:((k=r.accountData)==null?void 0:k.api_key)||null,api_secret:((V=r.accountData)==null?void 0:V.api_secret)||null,password:((M=r.accountData)==null?void 0:M.password)||null,frappe_mail_site:((U=r.accountData)==null?void 0:U.frappe_mail_site)||"",enable_incoming:r.accountData.enable_incoming||!1,enable_outgoing:r.accountData.enable_outgoing||!1,default_outgoing:r.accountData.default_outgoing||!1,default_incoming:r.accountData.default_incoming||!1}),s={description:__("To know more about setting up email accounts, click"),link:"https://docs.erpnext.com/docs/user/manual/en/email-account"},m=R(()=>ft.find(j=>j.name===r.accountData.service).custom),g=R(()=>m.value?_t:pt),_=I(),o=I(!1);async function f(){if(_.value=vt(n,m.value),_.value)return;const j={...r.accountData},O={...n},A=j.email_account_name!==O.email_account_name;delete j.email_account_name,delete O.email_account_name;const S=v.value,ae=O;if(!A&&!S){G.info(__("No changes made"));return}if(A)try{o.value=!0,await x(),d()}catch{h()}if(S)try{o.value=!0,await b(ae),d()}catch{h()}}const v=R(()=>n.email_id!==r.accountData.email_id||n.api_key!==r.accountData.api_key||n.api_secret!==r.accountData.api_secret||n.password!==r.accountData.password||n.enable_incoming!==r.accountData.enable_incoming||n.enable_outgoing!==r.accountData.enable_outgoing||n.default_outgoing!==r.accountData.default_outgoing||n.default_incoming!==r.accountData.default_incoming||n.frappe_mail_site!==r.accountData.frappe_mail_site);async function x(){return await oe("frappe.client.rename_doc",{doctype:"Email Account",old_name:r.accountData.email_account_name,new_name:n.email_account_name})}async function b(j){return(await oe("frappe.client.set_value",{doctype:"Email Account",name:n.email_account_name,fieldname:j})).name}function d(){p("update:step","email-list"),G.success(__("Email account updated successfully"))}function h(){o.value=!1,_.value=__("Failed to update email account, Invalid credentials")}return(j,O)=>{const A=B("FormControl"),S=B("ErrorMessage"),ae=B("Button");return a(),c("div",to,[e("div",lo,[e("h2",ao,C(j.__("Edit Email")),1)]),e("div",so,[u(Qe,{logo:l(gt)[i.accountData.service],"service-name":i.accountData.service},null,8,["logo","service-name"])]),e("div",no,[u(l(at),{class:"size-6 text-gray-500 w-min-5 w-max-5 min-h-5 max-w-5"}),e("div",oo,[T(C(s.description)+" ",1),e("a",{href:s.link,target:"_blank",class:"underline"},C(j.__("here")),9,io),O[1]||(O[1]=T(" . "))])]),e("div",ro,[e("div",co,[(a(!0),c(L,null,D(g.value,E=>(a(),c("div",{key:E.name,class:"flex flex-col gap-1"},[u(A,{modelValue:n[E.name],"onUpdate:modelValue":se=>n[E.name]=se,label:E.label,name:E.name,type:E.type,placeholder:E.placeholder},null,8,["modelValue","onUpdate:modelValue","label","name","type","placeholder"])]))),128))]),e("div",uo,[(a(!0),c(L,null,D(l(mt),E=>(a(),c("div",{key:E.name,class:"flex flex-col gap-1"},[u(A,{modelValue:n[E.name],"onUpdate:modelValue":se=>n[E.name]=se,label:E.label,name:E.name,type:E.type},null,8,["modelValue","onUpdate:modelValue","label","name","type"]),e("p",mo,C(E.description),1)]))),128))]),_.value?(a(),y(S,{key:0,class:"ml-1",message:_.value},null,8,["message"])):w("",!0)]),e("div",po,[u(ae,{label:j.__("Back"),theme:"gray",variant:"outline",disabled:o.value,onClick:O[0]||(O[0]=E=>p("update:step","email-list"))},null,8,["label","disabled"]),u(ae,{label:j.__("Update Account"),variant:"solid",onClick:f,loading:o.value},null,8,["label","loading"])])])}}},fo={class:"flex-1 p-8"},go={key:0,class:"h-full"},vo={key:1,class:"h-full"},ho={key:2,class:"h-full"},Co={__name:"EmailConfig",setup(i){const t=I("email-list"),r=I(null);function p(n,s){t.value=n,r.value=s}return(n,s)=>(a(),c("div",fo,[t.value==="email-add"?(a(),c("div",go,[u(On,{"onUpdate:step":p})])):t.value==="email-list"?(a(),c("div",vo,[u(eo,{"onUpdate:step":p})])):t.value==="email-edit"?(a(),c("div",ho,[u(_o,{"account-data":r.value,"onUpdate:step":p},null,8,["account-data"])])):w("",!0)]))}},bo={class:"flex h-[calc(100vh_-_8rem)]"},yo={class:"flex flex-col p-2 w-52 shrink-0 bg-surface-gray-2"},xo={class:"px-2 pt-2 mb-3 text-lg font-semibold text-ink-gray-9"},ko={key:0,class:"mb-2 mt-3 flex cursor-pointer gap-1.5 px-1 text-base font-medium text-ink-gray-5 transition-all duration-300 ease-in-out"},Ao={class:"space-y-1"},wo={class:"relative flex flex-col flex-1 overflow-y-auto bg-surface-modal"},$o={__name:"Settings",setup(i){const{isManager:t,isAgent:r,getUser:p}=ge(),n=R(()=>p()||{}),s=R(()=>[{label:__("Settings"),hideLabel:!0,items:[{label:__("Profile"),icon:()=>ze(Ke,{size:"xs",label:n.value.full_name,image:n.value.user_image}),component:Q(on)},{label:__("General"),icon:"settings",component:Q(Is),condition:()=>t()},{label:__("Invite Members"),icon:tt,component:Q(Ts),condition:()=>t()},{label:__("Email Accounts"),icon:Ge,component:Q(Co),condition:()=>t()}]},{label:__("Integrations"),items:[{label:__("Telephony"),icon:Se,component:Q(An),condition:()=>t()||r()},{label:__("WhatsApp"),icon:We,component:Q(pn),condition:()=>qt.value&&t()},{label:__("ERPNext"),icon:ss,component:Q(_n),condition:()=>t()}],condition:()=>t()||r()}].filter(o=>o.condition&&!o.condition()?!1:(o.items&&(o.items=o.items.filter(f=>!(f.condition&&!f.condition()))),!0))),m=I(s.value[0].items[0]);function g(_){m.value=_&&s.value.map(o=>o.items).flat().find(o=>o.label===_)||s.value[0].items[0]}return Ve(Ce,_=>g(_)),(_,o)=>(a(),y(l(Be),{modelValue:l(ee),"onUpdate:modelValue":o[1]||(o[1]=f=>ne(ee)?ee.value=f:null),options:{size:"5xl"},onClose:o[2]||(o[2]=f=>Ce.value="")},{body:$(()=>[e("div",bo,[e("div",yo,[e("h1",xo,C(_.__("Settings")),1),(a(!0),c(L,null,D(s.value,f=>(a(),c("div",null,[f.hideLabel?w("",!0):(a(),c("div",ko,[e("span",null,C(_.__(f.label)),1)])),e("nav",Ao,[(a(!0),c(L,null,D(f.items,v=>{var x;return a(),y(ce,{icon:v.icon,label:_.__(v.label),class:J(["w-full",((x=m.value)==null?void 0:x.label)==v.label?"bg-surface-selected shadow-sm hover:bg-surface-selected":"hover:bg-surface-gray-3"]),onClick:b=>m.value=v},null,8,["icon","label","class","onClick"])}),256))])]))),256))]),e("div",wo,[u(l(P),{class:"absolute right-5 top-5",variant:"ghost",icon:"x",onClick:o[0]||(o[0]=f=>ee.value=!1)}),m.value?(a(),y(te(m.value.component),{key:0})):w("",!0)])])]),_:1},8,["modelValue"]))}},Eo={class:"flex-1 overflow-y-auto"},Io={class:"mb-3 flex flex-col"},So={key:1,class:"absolute -left-1.5 top-1 z-20 h-[5px] w-[5px] translate-x-6 translate-y-1 rounded-full bg-surface-gray-6 ring-1 ring-white"},Bo={key:0,class:"mx-2 my-2 h-1 border-b"},Mo=["onClick"],Vo={class:"flex flex-col"},Lo={class:"m-2 flex flex-col gap-1"},Qo={class:"flex flex-col gap-2 mb-1"},Ro={class:"grid h-4 w-4 flex-shrink-0 place-items-center"},Do={__name:"AppSidebar",setup(i){const{getPinnedViews:t,getPublicViews:r}=$t(),{toggle:p}=Je(),n=Et("isSidebarCollapsed",!1),s=I(window.is_fc_site),m=I(window.is_demo_site),g=[{label:"Leads",icon:xe,to:"Leads"},{label:"Deals",icon:De,to:"Deals"},{label:"Contacts",icon:Ue,to:"Contacts"},{label:"Organizations",icon:je,to:"Organizations"},{label:"Notes",icon:ke,to:"Notes"},{label:"Tasks",icon:Fe,to:"Tasks"},{label:"Call Logs",icon:Se,to:"Call Logs"},{label:"Email Templates",icon:Ge,to:"Email Templates"}],_=R(()=>{let A=[{name:"All Views",hideLabel:!0,opened:!0,views:g}];return r().length&&A.push({name:"Public views",opened:!0,views:o(r())}),t().length&&A.push({name:"Pinned views",opened:!0,views:o(t())}),A});function o(A){return A.map(S=>({label:S.label,icon:f(S.route_name,S.icon),to:{name:S.route_name,params:{viewType:S.type||"list"},query:{view:S.name}}}))}function f(A,S){if(S)return ze("div",{class:"size-auto"},S);switch(A){case"Leads":return xe;case"Deals":return De;case"Contacts":return Ue;case"Organizations":return je;case"Notes":return ke;case"Call Logs":return Se;default:return Dt}}const{user:v}=It(),{users:x,isManager:b}=ge(),{isOnboardingStepsCompleted:d,setUp:h}=ie("frappecrm");async function k(){let A=localStorage.getItem("firstLead"+v);return A||await oe("crm.api.onboarding.get_first_lead")}async function V(){let A=localStorage.getItem("firstDeal"+v);return A||await oe("crm.api.onboarding.get_first_deal")}const M=I(!1),U=I({}),j=Le([{name:"setup_your_password",title:__("Setup your password"),icon:Q(Va),completed:!1,onClick:()=>{F.value=!0,ee.value=!0,Ce.value="Profile"}},{name:"create_first_lead",title:__("Create your first lead"),icon:Q(xe),completed:!1,onClick:()=>{F.value=!0,Z.push({name:"Leads"})}},{name:"invite_your_team",title:__("Invite your team"),icon:Q(tt),completed:!1,onClick:()=>{F.value=!0,ee.value=!0,Ce.value="Invite Members"},condition:()=>b()},{name:"convert_lead_to_deal",title:__("Convert lead to deal"),icon:Q(Aa),completed:!1,dependsOn:"create_first_lead",onClick:async()=>{F.value=!0,U.value={title:__("Convert lead to deal"),buttonLabel:__("Convert"),videoURL:"/assets/crm/videos/convertToDeal.mov",onClick:async()=>{M.value=!1,U.value={};let A=await k();A?Z.push({name:"Lead",params:{leadId:A}}):Z.push({name:"Leads"})}},M.value=!0}},{name:"create_first_task",title:__("Create your first task"),icon:Q(Fe),completed:!1,onClick:async()=>{F.value=!0;let A=await V();A?Z.push({name:"Deal",params:{dealId:A},hash:"#tasks"}):Z.push({name:"Tasks"})}},{name:"create_first_note",title:__("Create your first note"),icon:Q(ke),completed:!1,onClick:async()=>{F.value=!0;let A=await V();A?Z.push({name:"Deal",params:{dealId:A},hash:"#notes"}):Z.push({name:"Notes"})}},{name:"add_first_comment",title:__("Add your first comment"),icon:Q(Vt),completed:!1,dependsOn:"create_first_lead",onClick:async()=>{F.value=!0;let A=await V();A?Z.push({name:"Deal",params:{dealId:A},hash:"#comments"}):Z.push({name:"Leads"})}},{name:"send_first_email",title:__("Send email"),icon:Q(Qt),completed:!1,dependsOn:"create_first_lead",onClick:async()=>{F.value=!0;let A=await V();A?Z.push({name:"Deal",params:{dealId:A},hash:"#emails"}):Z.push({name:"Leads"})}},{name:"change_deal_status",title:__("Change deal status"),icon:Q(Ia),completed:!1,dependsOn:"convert_lead_to_deal",onClick:async()=>{F.value=!0,U.value={title:__("Change deal status"),buttonLabel:__("Change"),videoURL:"/assets/crm/videos/changeDealStatus.mov",onClick:async()=>{M.value=!1,U.value={};let A=await V();A?Z.push({name:"Deal",params:{dealId:A},hash:"#activity"}):Z.push({name:"Leads"})}},M.value=!0}}]);_e(async()=>{await x.promise;const A=j.filter(S=>S.condition?S.condition():!0);h(A)});const O=I([{title:__("Introduction"),opened:!1,subArticles:[{name:"introduction",title:__("Introduction")},{name:"setting-up",title:__("Setting up")}]},{title:__("Settings"),opened:!1,subArticles:[{name:"profile",title:__("Profile")},{name:"custom-branding",title:__("Custom branding")},{name:"home-actions",title:__("Home actions")},{name:"invite-members",title:__("Invite members")}]},{title:__("Masters"),opened:!1,subArticles:[{name:"lead",title:__("Lead")},{name:"deal",title:__("Deal")},{name:"contact",title:__("Contact")},{name:"organization",title:__("Organization")},{name:"note",title:__("Note")},{name:"task",title:__("Task")},{name:"call-log",title:__("Call log")},{name:"email-template",title:__("Email template")}]},{title:__("Capturing leads"),opened:!1,subArticles:[{name:"web-form",title:__("Web form")}]},{title:__("Views"),opened:!1,subArticles:[{name:"view",title:__("Saved view")},{name:"public-view",title:__("Public view")},{name:"pinned-view",title:__("Pinned view")}]},{title:__("Other features"),opened:!1,subArticles:[{name:"email-communication",title:__("Email communication")},{name:"comment",title:__("Comment")},{name:"data",title:__("Data")},{name:"service-level-agreement",title:__("Service level agreement")},{name:"assignment-rule",title:__("Assignment rule")},{name:"notification",title:__("Notification")}]},{title:__("Customization"),opened:!1,subArticles:[{name:"custom-fields",title:__("Custom fields")},{name:"custom-actions",title:__("Custom actions")},{name:"custom-statuses",title:__("Custom statuses")},{name:"custom-list-actions",title:__("Custom list actions")},{name:"quick-entry-layout",title:__("Quick entry layout")}]},{title:__("Integration"),opened:!1,subArticles:[{name:"twilio",title:__("Twilio")},{name:"exotel",title:__("Exotel")},{name:"whatsapp",title:__("WhatsApp")},{name:"erpnext",title:__("ERPNext")}]},{title:__("Frappe CRM mobile"),opened:!1,subArticles:[{name:"mobile-app-installation",title:__("Mobile app installation")}]}]);return(A,S)=>{const ae=B("Badge");return a(),c("div",{class:J(["relative flex h-full flex-col justify-between transition-all duration-300 ease-in-out",l(n)?"w-12":"w-[220px]"])},[e("div",null,[u(bt,{class:"p-2",isCollapsed:l(n)},null,8,["isCollapsed"])]),e("div",Eo,[e("div",Io,[u(ce,{id:"notifications-btn",label:A.__("Notifications"),icon:qe,isCollapsed:l(n),onClick:S[0]||(S[0]=()=>l(p)()),class:"relative mx-2 my-0.5"},{right:$(()=>[!l(n)&&l(we)?(a(),y(ae,{key:0,label:l(we),variant:"subtle"},null,8,["label"])):l(we)?(a(),c("div",So)):w("",!0)]),_:1},8,["label","isCollapsed"])]),(a(!0),c(L,null,D(_.value,E=>{var se;return a(),c("div",{key:E.label},[!E.hideLabel&&l(n)&&((se=E.views)!=null&&se.length)?(a(),c("div",Bo)):w("",!0),u(Rt,{label:E.name,hideLabel:E.hideLabel,opened:E.opened},{header:$(({opened:re,hide:ht,toggle:Ct})=>[ht?w("",!0):(a(),c("div",{key:0,class:J(["flex cursor-pointer gap-1.5 px-1 text-base font-medium text-ink-gray-5 transition-all duration-300 ease-in-out",l(n)?"ml-0 h-0 overflow-hidden opacity-0":"ml-2 mt-4 h-7 w-auto opacity-100"]),onClick:wi=>Ct()},[u(l(z),{name:"chevron-right",class:J(["h-4 text-ink-gray-9 transition-all duration-300 ease-in-out",{"rotate-90":re}])},null,8,["class"]),e("span",null,C(A.__(E.name)),1)],10,Mo))]),default:$(()=>[e("nav",Vo,[(a(!0),c(L,null,D(E.views,re=>(a(),y(ce,{icon:re.icon,label:A.__(re.label),to:re.to,isCollapsed:l(n),class:"mx-2 my-0.5"},null,8,["icon","label","to","isCollapsed"]))),256))])]),_:2},1032,["label","hideLabel","opened"])])}),128))]),e("div",Lo,[e("div",Qo,[m.value?(a(),y(l(va),{key:0,isSidebarCollapsed:l(n),afterSignup:()=>l(Y)("signup_from_demo_site")},null,8,["isSidebarCollapsed","afterSignup"])):w("",!0),s.value?(a(),y(l(ma),{key:1,isSidebarCollapsed:l(n),afterUpgrade:()=>l(Y)("upgrade_plan_from_trial_banner")},null,8,["isSidebarCollapsed","afterUpgrade"])):w("",!0),l(d)?w("",!0):(a(),y(l(Xl),{key:2,isSidebarCollapsed:l(n)},null,8,["isSidebarCollapsed"]))]),l(d)?(a(),y(ce,{key:0,label:A.__("Help"),isCollapsed:l(n),onClick:S[1]||(S[1]=()=>{W.value=l(F)?!0:!l(W),F.value=!l(W)})},{icon:$(()=>[u(Pa,{class:"h-4 w-4"})]),_:1},8,["label","isCollapsed"])):w("",!0),u(ce,{label:l(n)?A.__("Expand"):A.__("Collapse"),isCollapsed:l(n),onClick:S[2]||(S[2]=E=>n.value=!l(n)),class:""},{icon:$(()=>[e("span",Ro,[u(Da,{class:J(["h-4 w-4 text-ink-gray-7 duration-300 ease-in-out",{"[transform:rotateY(180deg)]":l(n)}])},null,8,["class"])])]),_:1},8,["label","isCollapsed"])]),u(es),u($o),l(W)?(a(),y(l(Hl),{key:0,modelValue:l(W),"onUpdate:modelValue":S[3]||(S[3]=E=>ne(W)?W.value=E:null),articles:O.value,"onUpdate:articles":S[4]||(S[4]=E=>O.value=E),logo:Ne,afterSkip:E=>l(Y)("onboarding_step_skipped_"+E),afterSkipAll:()=>l(Y)("onboarding_steps_skipped"),afterReset:E=>l(Y)("onboarding_step_reset_"+E),afterResetAll:()=>l(Y)("onboarding_steps_reset"),docsLink:"https://docs.frappe.io/crm"},null,8,["modelValue","articles","afterSkip","afterSkipAll","afterReset","afterResetAll"])):w("",!0),u(l(sa),{modelValue:M.value,"onUpdate:modelValue":S[5]||(S[5]=E=>M.value=E),currentStep:U.value},null,8,["modelValue","currentStep"])],2)}}},Uo={class:"flex border-b pr-5"},jo={class:"flex items-center justify-center"},Fo={__name:"AppHeader",setup(i){return(t,r)=>(a(),c("div",Uo,[r[0]||(r[0]=e("div",{id:"app-header",class:"flex-1"},null,-1)),e("div",jo,[u(yt)])]))}},Po={class:"bg-surface-modal px-4 pb-6 pt-5 sm:px-6"},To={class:"mb-5 flex items-center justify-between"},No={class:"text-2xl font-semibold leading-6 text-ink-gray-9"},Zo={class:"flex items-center gap-1"},Oo={key:0},Ho={class:"px-4 pb-7 pt-4 sm:px-6"},zo={class:"space-y-2"},Go={__name:"CreateDocumentModal",props:pe({doctype:{type:String,required:!0},data:{type:Object,default:()=>({})}},{modelValue:{},modelModifiers:{}}),emits:pe(["showQuickEntryModal","callback"],["update:modelValue"]),setup(i,{emit:t}){const r=i,p=t,{isManager:n}=ge(),s=le(i,"modelValue"),m=I(!1),g=I(null);let _=I({});const o=R(()=>{let b=r.doctype;(b.startsWith("CRM ")||b.startsWith("FCRM "))&&(b=b.replace(/^(CRM |FCRM )/,""));let d=__("New {0}",[b]),h="xl",k=[{label:__("Create"),variant:"solid",onClick:()=>v()}];return{title:d,size:h,actions:k}}),f=K({url:"crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.get_fields_layout",cache:["QuickEntry",r.doctype],params:{doctype:r.doctype,type:"Quick Entry"},auto:!0});async function v(){m.value=!0,g.value=null;let b=await oe("frappe.client.insert",{doc:{doctype:r.doctype,..._.value}},{onError:d=>{var h;m.value=!1,d.error&&(g.value=(h=d.error.messages)==null?void 0:h[0])}});m.value=!1,s.value=!1,p("callback",b)}Ve(()=>s.value,b=>{b&&Re(()=>{_.value={...r.data}})});function x(){p("showQuickEntryModal",r.doctype),Re(()=>{s.value=!1})}return(b,d)=>{const h=B("Button"),k=B("Dialog");return a(),y(k,{modelValue:s.value,"onUpdate:modelValue":d[1]||(d[1]=V=>s.value=V),options:o.value},{body:$(()=>[e("div",Po,[e("div",To,[e("div",null,[e("h3",No,C(b.__(o.value.title)||b.__("Untitled")),1)]),e("div",Zo,[l(n)()&&!l(Wt)?(a(),y(h,{key:0,variant:"ghost",class:"w-7",onClick:x},{default:$(()=>[u(Kt,{class:"h-4 w-4"})]),_:1})):w("",!0),u(h,{variant:"ghost",class:"w-7",onClick:d[0]||(d[0]=V=>s.value=!1)},{default:$(()=>[u(l(z),{name:"x",class:"h-4 w-4"})]),_:1})])]),l(f).data?(a(),c("div",Oo,[u(he,{tabs:l(f).data,data:l(_),doctype:i.doctype},null,8,["tabs","data","doctype"]),u(l(fe),{class:"mt-2",message:g.value},null,8,["message"])])):w("",!0)]),e("div",Ho,[e("div",zo,[(a(!0),c(L,null,D(o.value.actions,V=>(a(),y(h,St({class:"w-full",key:V.label,ref_for:!0},V,{label:b.__(V.label),loading:m.value}),null,16,["label","loading"]))),128))])])]),_:1},8,["modelValue","options"])}}},Jo={class:"lucide lucide-globe",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function qo(i,t){return a(),c("svg",Jo,t[0]||(t[0]=[e("circle",{cx:"12",cy:"12",r:"10"},null,-1),e("path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"},null,-1),e("path",{d:"M2 12h20"},null,-1)]))}const Wo=Q({name:"lucide-globe",render:qo}),Yo={class:"lucide lucide-github",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function Ko(i,t){return a(),c("svg",Yo,t[0]||(t[0]=[e("path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"},null,-1),e("path",{d:"M9 18c-4.51 2-5-2-7-2"},null,-1)]))}const Xo=Q({name:"lucide-github",render:Ko}),ei={class:"lucide lucide-headset",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function ti(i,t){return a(),c("svg",ei,t[0]||(t[0]=[e("path",{d:"M3 11h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-5Zm0 0a9 9 0 1 1 18 0m0 0v5a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3Z"},null,-1),e("path",{d:"M21 16v2a4 4 0 0 1-4 4h-5"},null,-1)]))}const li=Q({name:"lucide-headset",render:ti}),ai={class:"lucide lucide-bug",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function si(i,t){return a(),c("svg",ai,t[0]||(t[0]=[Bt('<path d="m8 2 1.88 1.88"></path><path d="M14.12 3.88 16 2"></path><path d="M9 7.13v-1a3.003 3.003 0 1 1 6 0v1"></path><path d="M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6"></path><path d="M12 20v-9"></path><path d="M6.53 9C4.6 8.8 3 7.1 3 5"></path><path d="M6 13H2"></path><path d="M3 21c0-2.1 1.7-3.9 3.8-4"></path><path d="M20.97 5c0 2.1-1.6 3.8-3.5 4"></path><path d="M22 13h-4"></path><path d="M17.2 17c2.1.1 3.8 1.9 3.8 4"></path>',11)]))}const ni=Q({name:"lucide-bug",render:si}),oi={class:"lucide lucide-book-open",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"};function ii(i,t){return a(),c("svg",oi,t[0]||(t[0]=[e("path",{d:"M12 7v14"},null,-1),e("path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"},null,-1)]))}const ri=Q({name:"lucide-book-open",render:ii}),ci={},ui={viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg","stroke-width":"3",stroke:"currentColor",fill:"none"};function di(i,t){return a(),c("svg",ui,t[0]||(t[0]=[e("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("g",{id:"SVGRepo_iconCarrier"},[e("path",{d:"M26.67,38.57l-.82,11.54A2.88,2.88,0,0,0,28.14,49l5.5-5.26,11.42,8.35c2.08,1.17,3.55.56,4.12-1.92l7.49-35.12h0c.66-3.09-1.08-4.33-3.16-3.55l-44,16.85C6.47,29.55,6.54,31.23,9,32l11.26,3.5L45.59,20.71c1.23-.83,2.36-.37,1.44.44Z","stroke-linecap":"round"})],-1)]))}const mi=N(ci,[["render",di]]),pi={class:"p-4 pt-5"},_i={class:"flex justify-center"},fi={class:"flex flex-col items-center"},gi={class:"flex items-center mt-1"},vi={class:"text-base text-ink-gray-6"},hi=["href"],Ci={class:"text-base text-ink-gray-8"},bi={__name:"AboutModal",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(i){let t=le(i,"modelValue"),r=[{label:__("Website"),url:"https://frappe.io/crm",icon:Wo},{label:__("GitHub Repository"),url:"https://github.com/frappe/crm",icon:Xo},{label:__("Documentation"),url:"https://docs.frappe.io/crm",icon:ri},{label:__("Telegram Channel"),url:"https://t.me/frappecrm",icon:mi},{label:__("Report an Issue"),url:"https://github.com/frappe/crm/issues",icon:ni},{label:__("Contact Support"),url:"https://support.frappe.io",icon:li}],p=window.app_version;return(n,s)=>{const m=Mt,g=B("Dialog");return a(),y(g,{modelValue:l(t),"onUpdate:modelValue":s[0]||(s[0]=_=>ne(t)?t.value=_:t=_),options:{size:"sm"}},{body:$(()=>[e("div",pi,[e("div",_i,[e("div",fi,[u(Ne,{class:"mb-3 size-12"}),s[1]||(s[1]=e("h3",{class:"font-semibold text-xl text-ink-gray-9"},"Frappe CRM",-1)),e("div",gi,[e("div",vi,[T(C(l(p).branch!="main"?l(p).branch:"")+" ",1),l(p).branch!="main"?(a(),c(L,{key:0},[T(" ("+C(l(p).commit)+") ",1)],64)):(a(),c(L,{key:1},[T(C(l(p).tag),1)],64))]),u(l(me),{text:`${l(p).commit_message} - ${l(p).commit_date}`,placement:"top"},{default:$(()=>[u(m,{class:"size-3.5 text-ink-gray-8 ml-1"})]),_:1},8,["text"])])])]),s[2]||(s[2]=e("hr",{class:"border-t my-3 mx-2"},null,-1)),e("div",null,[(a(!0),c(L,null,D(l(r),_=>(a(),c("a",{key:_.label,class:"flex py-2 px-2 hover:bg-surface-gray-1 rounded cursor-pointer",target:"_blank",href:_.url},[_.icon?(a(),y(te(_.icon),{key:0,class:"size-4 mr-2 text-ink-gray-7"})):w("",!0),e("span",Ci,C(_.label),1)],8,hi))),128))]),s[3]||(s[3]=e("hr",{class:"border-t my-3 mx-2"},null,-1)),s[4]||(s[4]=e("p",{class:"text-sm text-ink-gray-6 px-2 mt-2"},"  Frappe Technologies Pvt. Ltd. and contributors ",-1))])]),_:1},8,["modelValue"])}}},yi={__name:"GlobalModals",setup(i){const t=I(!1),r=I("");function p(n){t.value=!0,r.value=n}return(n,s)=>(a(),c(L,null,[l(ve)?(a(),y(Go,{key:0,modelValue:l(ve),"onUpdate:modelValue":s[0]||(s[0]=m=>ne(ve)?ve.value=m:null),doctype:l(Ot),data:l(Ht),onShowQuickEntryModal:s[1]||(s[1]=m=>p(m)),onCallback:s[2]||(s[2]=m=>l(zt)(m))},null,8,["modelValue","doctype","data"])):w("",!0),t.value?(a(),y(Gt,{key:1,modelValue:t.value,"onUpdate:modelValue":s[3]||(s[3]=m=>t.value=m),doctype:r.value},null,8,["modelValue","doctype"])):w("",!0),u(bi,{modelValue:l($e),"onUpdate:modelValue":s[4]||(s[4]=m=>ne($e)?$e.value=m:null)},null,8,["modelValue"])],64))}},xi={class:"flex h-screen w-screen"},ki={class:"h-full border-r bg-surface-menu-bar"},Ai={class:"flex-1 flex flex-col h-full overflow-auto bg-surface-white"},tr={__name:"DesktopLayout",setup(i){return(t,r)=>(a(),c("div",xi,[e("div",ki,[u(Do)]),e("div",Ai,[u(Fo),ue(t.$slots,"default")]),u(yi)]))}};export{tr as default};
//# sourceMappingURL=DesktopLayout-f01a4ea6.js.map
