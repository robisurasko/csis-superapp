import{K as m,b5 as P,f as c,c as g,d as a,a6 as u,at as p,au as l,n as f,g as y,b as T,w as O,a4 as w,a5 as C,aJ as b,a9 as k,b6 as M}from"./index-85632e04.js";const B={name:"Popover",inheritAttrs:!1,props:{show:{default:void 0},trigger:{type:String,default:"click"},hoverDelay:{type:Number,default:0},leaveDelay:{type:Number,default:0},placement:{type:String,default:"bottom-start"},popoverClass:[String,Object,Array],transition:{default:null},hideOnBlur:{default:!0}},emits:["open","close","update:show"],expose:["open","close"],data(){return{popoverContainerClass:"body-container",showPopup:!1,targetWidth:null,pointerOverTargetOrPopup:!1}},watch:{show(t){t?this.open():this.close()}},created(){if(!(typeof window>"u")&&!document.getElementById("frappeui-popper-root")){const t=document.createElement("div");t.id="frappeui-popper-root",document.body.appendChild(t)}},mounted(){this.listener=t=>{const s=t.target,i=this.$refs.reference,r=this.$refs.popover;if(s===i||s===r||(i==null?void 0:i.contains(s))||(r==null?void 0:r.contains(s)))return;if(!document.getElementById("frappeui-popper-root").contains(s))return this.close();const d=`.${this.popoverContainerClass}`,h=s==null?void 0:s.closest(d),v=i==null?void 0:i.closest(d);h&&v&&h===v&&this.close()},this.hideOnBlur&&(document.addEventListener("click",this.listener),document.addEventListener("mousedown",this.listener)),this.$nextTick(()=>{this.targetWidth=this.$refs.target.clientWidth})},beforeDestroy(){this.popper&&this.popper.destroy(),document.removeEventListener("click",this.listener),document.removeEventListener("mousedown",this.listener)},computed:{showPropPassed(){return this.show!=null},isOpen:{get(){return this.showPropPassed?this.show:this.showPopup},set(t){t=!!t,this.showPropPassed?this.$emit("update:show",t):this.showPopup=t,t===!1?this.$emit("close"):t===!0&&this.$emit("open")}},popupTransition(){let t={default:{enterActiveClass:"transition duration-150 ease-out",enterFromClass:"translate-y-1 opacity-0",enterToClass:"translate-y-0 opacity-100",leaveActiveClass:"transition duration-150 ease-in",leaveFromClass:"translate-y-0 opacity-100",leaveToClass:"translate-y-1 opacity-0"}};return typeof this.transition=="string"?t[this.transition]:this.transition}},methods:{setupPopper(){this.popper?this.updatePosition():this.popper=P(this.$refs.reference,this.$refs.popover,{placement:this.placement})},updatePosition(){this.popper&&this.popper.update()},togglePopover(t){t instanceof Event&&(t=null),t==null&&(t=!this.isOpen),t=!!t,t?this.open():this.close()},open(){this.isOpen=!0,this.$nextTick(()=>this.setupPopper())},close(){this.isOpen=!1},onMouseover(){this.pointerOverTargetOrPopup=!0,this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.trigger==="hover"&&(this.hoverDelay?this.hoverTimer=setTimeout(()=>{this.pointerOverTargetOrPopup&&this.open()},Number(this.hoverDelay)*1e3):this.open())},onMouseleave(t){this.pointerOverTargetOrPopup=!1,this.hoverTimer&&(clearTimeout(this.hoverTimer),this.hoverTimer=null),this.trigger==="hover"&&(this.leaveTimer&&clearTimeout(this.leaveTimer),this.leaveDelay?this.leaveTimer=setTimeout(()=>{this.pointerOverTargetOrPopup||this.close()},Number(this.leaveDelay)*1e3):this.pointerOverTargetOrPopup||this.close())}}},E={ref:"reference"},D={class:"rounded-lg border border-gray-100 bg-surface-white shadow-xl"};function S(t,s,i,r,n,e){return c(),g("div",E,[a("div",{ref:"target",class:f(["flex",t.$attrs.class]),onClick:s[0]||(s[0]=(...o)=>e.updatePosition&&e.updatePosition(...o)),onFocusin:s[1]||(s[1]=(...o)=>e.updatePosition&&e.updatePosition(...o)),onKeydown:s[2]||(s[2]=(...o)=>e.updatePosition&&e.updatePosition(...o)),onMouseover:s[3]||(s[3]=(...o)=>e.onMouseover&&e.onMouseover(...o)),onMouseleave:s[4]||(s[4]=(...o)=>e.onMouseleave&&e.onMouseleave(...o))},[u(t.$slots,"target",p(l({togglePopover:e.togglePopover,updatePosition:e.updatePosition,open:e.open,close:e.close,isOpen:e.isOpen})))],34),(c(),y(M,{to:"#frappeui-popper-root"},[a("div",{ref:"popover",class:f(["relative z-[100]",[n.popoverContainerClass,i.popoverClass]]),style:k({minWidth:n.targetWidth?n.targetWidth+"px":null}),onMouseover:s[5]||(s[5]=o=>n.pointerOverTargetOrPopup=!0),onMouseleave:s[6]||(s[6]=(...o)=>e.onMouseleave&&e.onMouseleave(...o))},[T(b,p(l(e.popupTransition)),{default:O(()=>[w(a("div",null,[u(t.$slots,"body",p(l({togglePopover:e.togglePopover,updatePosition:e.updatePosition,open:e.open,close:e.close,isOpen:e.isOpen})),()=>[a("div",D,[u(t.$slots,"body-main",p(l({togglePopover:e.togglePopover,updatePosition:e.updatePosition,open:e.open,close:e.close,isOpen:e.isOpen})))])])],512),[[C,e.isOpen]])]),_:3},16)],38)]))],512)}const W=m(B,[["render",S]]);export{W as P};
//# sourceMappingURL=Popover-4a1551e7.js.map
