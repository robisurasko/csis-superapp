import{_ as v}from"./LayoutHeader-448e93da.js";import{W as b}from"./WhatsAppIcon-cd469fd1.js";import{M}from"./MarkAsDoneIcon-744dcd7b.js";import{n as N,a as _,N as w}from"./notifications-9d69ebe1.js";import{g as B,_ as C,t as $}from"./index-31644aa3.js";import{o as I,a as L,c as n,b as r,w as l,d as a,u as s,F as u,r as z,t as c,e as p,f as o,_ as A,g as m,n as D}from"./index-85632e04.js";import{_ as R}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-41a5d25f.js";import"./Dropdown.vue_vue_type_script_setup_true_lang-4f930b23.js";const S={class:"flex flex-col overflow-hidden text-ink-gray-9"},W={key:0,class:"divide-y divide-outline-gray-1 overflow-y-auto text-base"},F={class:"mt-1 flex items-center gap-2.5"},H=["innerHTML"],T={key:1,class:"mb-2 space-x-1 leading-5 text-ink-gray-5"},V={class:"font-medium text-ink-gray-9"},j={class:"font-medium text-ink-gray-9"},E={class:"text-sm text-ink-gray-5"},U={key:1,class:"flex flex-1 flex-col items-center justify-center gap-2"},q={class:"text-lg font-medium text-ink-gray-4"},te={__name:"MobileNotification",setup(G){const{$socket:d}=B(),{mark_as_read:g,mark_doc_as_read:k}=N();I(()=>{d.off("crm_notification")}),L(()=>{d.on("crm_notification",()=>{_.reload()})});function y(e){let i={leadId:e.reference_name};return e.route_name==="Deal"&&(i={dealId:e.reference_name}),{name:e.route_name,params:i,hash:"#"+e.comment||e.notification_type_doc}}return(e,i)=>{var f;const h=p("Button"),x=p("RouterLink");return o(),n(u,null,[r(v,null,{"left-header":l(()=>[r(s(R),{items:[{label:e.__("Notifications"),route:{name:"Notifications"}}]},null,8,["items"])]),"right-header":l(()=>[r(s(A),{text:e.__("Mark all as read")},{default:l(()=>[a("div",null,[r(h,{label:e.__("Mark all as read"),onClick:i[0]||(i[0]=()=>s(g).reload())},{prefix:l(()=>[r(M,{class:"h-4 w-4"})]),_:1},8,["label"])])]),_:1},8,["text"])]),_:1}),a("div",S,[(f=s(_).data)!=null&&f.length?(o(),n("div",W,[(o(!0),n(u,null,z(s(_).data,t=>(o(),m(x,{key:t.comment,to:y(t),class:"flex cursor-pointer items-start gap-3 px-2.5 py-3 hover:bg-surface-gray-2",onClick:J=>s(k)(t.comment||t.notification_type_doc)},{default:l(()=>[a("div",F,[a("div",{class:D(["size-[5px] rounded-full",[t.read?"bg-transparent":"bg-surface-gray-7"]])},null,2),t.type=="WhatsApp"?(o(),m(b,{key:0,class:"size-7"})):(o(),m(C,{key:1,user:t.from_user.name,size:"lg"},null,8,["user"]))]),a("div",null,[t.notification_text?(o(),n("div",{key:0,innerHTML:t.notification_text},null,8,H)):(o(),n("div",T,[a("span",V,c(t.from_user.full_name),1),a("span",null,c(e.__("mentioned you in {0}",[t.reference_doctype])),1),a("span",j,c(t.reference_name),1)])),a("div",E,c(e.__(s($)(t.creation))),1)])]),_:2},1032,["to","onClick"]))),128))])):(o(),n("div",U,[r(w,{class:"h-20 w-20 text-ink-gray-2"}),a("div",q,c(e.__("No new notifications")),1)]))])],64)}}};export{te as default};
//# sourceMappingURL=MobileNotification-d933e68a.js.map
