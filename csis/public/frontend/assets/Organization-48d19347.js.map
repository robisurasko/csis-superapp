{"version":3,"file":"Organization-48d19347.js","sources":["../../../../frontend/src/components/Icons/WebsiteIcon.vue","../../../../frontend/src/pages/Organization.vue"],"sourcesContent":["<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M2.02062 7.49896C2.49506 7.49716 2.97742 7.4933 3.47006 7.48935C3.94277 7.48556 4.42495 7.48169 4.9187 7.47951C4.97589 6.3862 5.14998 5.23014 5.51484 4.17085C5.76241 3.45208 6.1023 2.76557 6.56226 2.17336C4.09972 2.77895 2.23508 4.90491 2.02062 7.49896ZM8 2.1204C7.29452 2.69277 6.79592 3.52219 6.46032 4.49652C6.13931 5.4285 5.97681 6.46734 5.92025 7.4779C6.5896 7.47899 7.28127 7.485 8 7.49989C8.7546 7.48425 9.43077 7.47841 10.0797 7.47777C10.0232 6.46725 9.86068 5.42846 9.53968 4.49651C9.20408 3.52219 8.70548 2.69277 8 2.1204ZM10.0822 8.47771C10.0279 9.50221 9.8654 10.5578 9.53968 11.5035C9.20409 12.4778 8.70548 13.3072 8.00001 13.8796C7.29453 13.3072 6.79592 12.4778 6.46032 11.5035C6.13462 10.5579 5.9721 9.5023 5.91784 8.47784C6.58355 8.47892 7.27164 8.48494 7.98959 8.49989C7.99653 8.50004 8.00347 8.50004 8.01042 8.49989C8.76493 8.48417 9.43715 8.47833 10.0822 8.47771ZM4.91661 8.47951C4.43411 8.48168 3.962 8.48548 3.49714 8.48922C2.99784 8.49323 2.50691 8.49718 2.02045 8.49899C2.2341 11.094 4.09907 13.2209 6.56227 13.8266C6.1023 13.2344 5.76241 12.5479 5.51484 11.8291C5.14541 10.7566 4.97157 9.58487 4.91661 8.47951ZM9.43774 13.8266C9.89771 13.2344 10.2376 12.5479 10.4852 11.8291C10.8545 10.7569 11.0283 9.58549 11.0834 8.48039C11.4269 8.48234 11.771 8.48511 12.1244 8.48796C12.7045 8.49264 13.3098 8.49752 13.9795 8.4993C13.7658 11.0941 11.9008 13.2209 9.43774 13.8266ZM13.9794 7.49928C13.3241 7.49751 12.7264 7.49271 12.1508 7.48809C11.7885 7.48518 11.435 7.48234 11.0814 7.48037C11.0242 6.38681 10.8501 5.23042 10.4852 4.17085C10.2376 3.45208 9.89771 2.76557 9.43774 2.17336C11.9004 2.77897 13.7651 4.90509 13.9794 7.49928ZM1 8C1 4.13401 4.13401 1 8 1C11.866 1 15 4.13401 15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <LayoutHeader v-if=\"organization.doc\">\n    <template #left-header>\n      <Breadcrumbs :items=\"breadcrumbs\">\n        <template #prefix=\"{ item }\">\n          <Icon v-if=\"item.icon\" :icon=\"item.icon\" class=\"mr-2 h-4\" />\n        </template>\n      </Breadcrumbs>\n    </template>\n  </LayoutHeader>\n  <div v-if=\"organization.doc\" ref=\"parentRef\" class=\"flex h-full\">\n    <Resizer\n      v-if=\"organization.doc\"\n      :parent=\"$refs.parentRef\"\n      class=\"flex h-full flex-col overflow-hidden border-r\"\n    >\n      <div class=\"border-b\">\n        <FileUploader\n          @success=\"changeOrganizationImage\"\n          :validateFile=\"validateFile\"\n        >\n          <template #default=\"{ openFileSelector, error }\">\n            <div class=\"flex flex-col items-start justify-start gap-4 p-5\">\n              <div class=\"flex gap-4 items-center\">\n                <div class=\"group relative h-15.5 w-15.5\">\n                  <Avatar\n                    size=\"3xl\"\n                    class=\"h-15.5 w-15.5\"\n                    :label=\"organization.doc.organization_name\"\n                    :image=\"organization.doc.organization_logo\"\n                  />\n                  <component\n                    :is=\"organization.doc.image ? Dropdown : 'div'\"\n                    v-bind=\"\n                      organization.doc.image\n                        ? {\n                            options: [\n                              {\n                                icon: 'upload',\n                                label: organization.doc.image\n                                  ? __('Change image')\n                                  : __('Upload image'),\n                                onClick: openFileSelector,\n                              },\n                              {\n                                icon: 'trash-2',\n                                label: __('Remove image'),\n                                onClick: () => changeOrganizationImage(''),\n                              },\n                            ],\n                          }\n                        : { onClick: openFileSelector }\n                    \"\n                    class=\"!absolute bottom-0 left-0 right-0\"\n                  >\n                    <div\n                      class=\"z-1 absolute bottom-0 left-0 right-0 flex h-14 cursor-pointer items-center justify-center rounded-b-full bg-black bg-opacity-40 pt-5 opacity-0 duration-300 ease-in-out group-hover:opacity-100\"\n                      style=\"\n                        -webkit-clip-path: inset(22px 0 0 0);\n                        clip-path: inset(22px 0 0 0);\n                      \"\n                    >\n                      <CameraIcon class=\"h-6 w-6 cursor-pointer text-white\" />\n                    </div>\n                  </component>\n                </div>\n                <div class=\"flex flex-col gap-2 truncate\">\n                  <div class=\"truncate text-2xl font-medium text-ink-gray-9\">\n                    <span>{{ organization.doc.name }}</span>\n                  </div>\n                  <div\n                    v-if=\"organization.doc.website\"\n                    class=\"flex items-center gap-1.5 text-base text-ink-gray-8\"\n                  >\n                    <WebsiteIcon class=\"size-4\" />\n                    <span>{{ website(organization.doc.website) }}</span>\n                  </div>\n                  <ErrorMessage :message=\"__(error)\" />\n                </div>\n              </div>\n              <div class=\"flex gap-1.5\">\n                <Button\n                  :label=\"__('Delete')\"\n                  theme=\"red\"\n                  size=\"sm\"\n                  @click=\"deleteOrganization\"\n                >\n                  <template #prefix>\n                    <FeatherIcon name=\"trash-2\" class=\"h-4 w-4\" />\n                  </template>\n                </Button>\n                <Tooltip :text=\"__('Open website')\">\n                  <div>\n                    <Button @click=\"openWebsite\">\n                      <FeatherIcon name=\"link\" class=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </Tooltip>\n              </div>\n            </div>\n          </template>\n        </FileUploader>\n      </div>\n      <div\n        v-if=\"sections.data\"\n        class=\"flex flex-1 flex-col justify-between overflow-hidden\"\n      >\n        <SidePanelLayout\n          :sections=\"sections.data\"\n          doctype=\"CRM Organization\"\n          :docname=\"organization.doc.name\"\n          @reload=\"sections.reload\"\n        />\n      </div>\n    </Resizer>\n    <Tabs as=\"div\" v-model=\"tabIndex\" :tabs=\"tabs\">\n      <template #tab-item=\"{ tab, selected }\">\n        <button\n          class=\"group flex items-center gap-2 border-b border-transparent py-2.5 text-base text-ink-gray-5 duration-300 ease-in-out hover:border-outline-gray-3 hover:text-ink-gray-9\"\n          :class=\"{ 'text-ink-gray-9': selected }\"\n        >\n          <component v-if=\"tab.icon\" :is=\"tab.icon\" class=\"h-5\" />\n          {{ __(tab.label) }}\n          <Badge\n            class=\"group-hover:bg-surface-gray-7\"\n            :class=\"[selected ? 'bg-surface-gray-7' : 'bg-gray-600']\"\n            variant=\"solid\"\n            theme=\"gray\"\n            size=\"sm\"\n          >\n            {{ tab.count }}\n          </Badge>\n        </button>\n      </template>\n      <template #tab-panel=\"{ tab }\">\n        <DealsListView\n          class=\"mt-4\"\n          v-if=\"tab.label === 'Deals' && rows.length\"\n          :rows=\"rows\"\n          :columns=\"columns\"\n          :options=\"{ selectable: false, showTooltip: false }\"\n        />\n        <ContactsListView\n          class=\"mt-4\"\n          v-if=\"tab.label === 'Contacts' && rows.length\"\n          :rows=\"rows\"\n          :columns=\"columns\"\n          :options=\"{ selectable: false, showTooltip: false }\"\n        />\n        <div\n          v-if=\"!rows.length\"\n          class=\"grid flex-1 place-items-center text-xl font-medium text-ink-gray-4\"\n        >\n          <div class=\"flex flex-col items-center justify-center space-y-3\">\n            <component :is=\"tab.icon\" class=\"!h-10 !w-10\" />\n            <div>{{ __('No {0} Found', [__(tab.label)]) }}</div>\n          </div>\n        </div>\n      </template>\n    </Tabs>\n  </div>\n  <ErrorPage\n    v-else-if=\"errorTitle\"\n    :errorTitle=\"errorTitle\"\n    :errorMessage=\"errorMessage\"\n  />\n  <QuickEntryModal\n    v-if=\"showQuickEntryModal\"\n    v-model=\"showQuickEntryModal\"\n    doctype=\"CRM Organization\"\n  />\n  <AddressModal v-model=\"showAddressModal\" v-model:address=\"_address\" />\n</template>\n\n<script setup>\nimport ErrorPage from '@/components/ErrorPage.vue'\nimport Resizer from '@/components/Resizer.vue'\nimport SidePanelLayout from '@/components/SidePanelLayout.vue'\nimport Icon from '@/components/Icon.vue'\nimport LayoutHeader from '@/components/LayoutHeader.vue'\nimport QuickEntryModal from '@/components/Modals/QuickEntryModal.vue'\nimport AddressModal from '@/components/Modals/AddressModal.vue'\nimport DealsListView from '@/components/ListViews/DealsListView.vue'\nimport ContactsListView from '@/components/ListViews/ContactsListView.vue'\nimport WebsiteIcon from '@/components/Icons/WebsiteIcon.vue'\nimport CameraIcon from '@/components/Icons/CameraIcon.vue'\nimport DealsIcon from '@/components/Icons/DealsIcon.vue'\nimport ContactsIcon from '@/components/Icons/ContactsIcon.vue'\nimport { getSettings } from '@/stores/settings'\nimport { getMeta } from '@/stores/meta'\nimport { globalStore } from '@/stores/global'\nimport { usersStore } from '@/stores/users'\nimport { statusesStore } from '@/stores/statuses'\nimport { getView } from '@/utils/view'\nimport { formatDate, timeAgo } from '@/utils'\nimport {\n  Tooltip,\n  Breadcrumbs,\n  Avatar,\n  FileUploader,\n  Dropdown,\n  Tabs,\n  call,\n  createListResource,\n  createDocumentResource,\n  usePageMeta,\n  createResource,\n  toast,\n} from 'frappe-ui'\nimport { h, computed, ref } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\n\nconst props = defineProps({\n  organizationId: {\n    type: String,\n    required: true,\n  },\n})\n\nconst { brand } = getSettings()\nconst { getUser } = usersStore()\nconst { $dialog } = globalStore()\nconst { getDealStatus } = statusesStore()\nconst { doctypeMeta } = getMeta('CRM Organization')\nconst showQuickEntryModal = ref(false)\n\nconst route = useRoute()\nconst router = useRouter()\n\nconst errorTitle = ref('')\nconst errorMessage = ref('')\n\nconst organization = createDocumentResource({\n  doctype: 'CRM Organization',\n  name: props.organizationId,\n  cache: ['organization', props.organizationId],\n  fields: ['*'],\n  auto: true,\n  onSuccess: () => {\n    errorTitle.value = ''\n    errorMessage.value = ''\n  },\n  onError: (err) => {\n    if (err.messages?.[0]) {\n      errorTitle.value = __('Not permitted')\n      errorMessage.value = __(err.messages?.[0])\n    } else {\n      router.push({ name: 'Organizations' })\n    }\n  },\n})\n\nconst breadcrumbs = computed(() => {\n  let items = [{ label: __('Organizations'), route: { name: 'Organizations' } }]\n\n  if (route.query.view || route.query.viewType) {\n    let view = getView(\n      route.query.view,\n      route.query.viewType,\n      'CRM Organization',\n    )\n    if (view) {\n      items.push({\n        label: __(view.label),\n        icon: view.icon,\n        route: {\n          name: 'Organizations',\n          params: { viewType: route.query.viewType },\n          query: { view: route.query.view },\n        },\n      })\n    }\n  }\n\n  items.push({\n    label: title.value,\n    route: {\n      name: 'Organization',\n      params: { organizationId: props.organizationId },\n    },\n  })\n  return items\n})\n\nconst title = computed(() => {\n  let t = doctypeMeta['CRM Organization']?.title_field || 'name'\n  return organization.doc?.[t] || props.organizationId\n})\n\nusePageMeta(() => {\n  return {\n    title: title.value,\n    icon: brand.favicon,\n  }\n})\n\nfunction validateFile(file) {\n  let extn = file.name.split('.').pop().toLowerCase()\n  if (!['png', 'jpg', 'jpeg'].includes(extn)) {\n    return __('Only PNG and JPG images are allowed')\n  }\n}\n\nasync function changeOrganizationImage(file) {\n  await call('frappe.client.set_value', {\n    doctype: 'CRM Organization',\n    name: props.organizationId,\n    fieldname: 'organization_logo',\n    value: file?.file_url || '',\n  })\n  organization.reload()\n}\n\nasync function deleteOrganization() {\n  $dialog({\n    title: __('Delete organization'),\n    message: __('Are you sure you want to delete this organization?'),\n    actions: [\n      {\n        label: __('Delete'),\n        theme: 'red',\n        variant: 'solid',\n        async onClick(close) {\n          await call('frappe.client.delete', {\n            doctype: 'CRM Organization',\n            name: props.organizationId,\n          })\n          close()\n          router.push({ name: 'Organizations' })\n        },\n      },\n    ],\n  })\n}\n\nfunction website(url) {\n  return url && url.replace(/^(?:https?:\\/\\/)?(?:www\\.)?/i, '')\n}\n\nfunction openWebsite() {\n  if (!organization.doc.website) toast.error(__('No website found'))\n  else window.open(organization.doc.website, '_blank')\n}\n\nconst showAddressModal = ref(false)\nconst _organization = ref({})\nconst _address = ref({})\n\nconst sections = createResource({\n  url: 'crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.get_sidepanel_sections',\n  cache: ['sidePanelSections', 'CRM Organization'],\n  params: { doctype: 'CRM Organization' },\n  auto: true,\n  transform: (data) => getParsedSections(data),\n})\n\nfunction getParsedSections(_sections) {\n  return _sections.map((section) => {\n    section.columns = section.columns.map((column) => {\n      column.fields = column.fields.map((field) => {\n        if (field.fieldname === 'address') {\n          return {\n            ...field,\n            create: (value, close) => {\n              _organization.value.address = value\n              _address.value = {}\n              showAddressModal.value = true\n              close()\n            },\n            edit: async (addr) => {\n              _address.value = await call('frappe.client.get', {\n                doctype: 'Address',\n                name: addr,\n              })\n              showAddressModal.value = true\n            },\n          }\n        } else {\n          return field\n        }\n      })\n      return column\n    })\n    return section\n  })\n}\n\nconst tabIndex = ref(0)\nconst tabs = [\n  {\n    label: 'Deals',\n    icon: h(DealsIcon, { class: 'h-4 w-4' }),\n    count: computed(() => deals.data?.length),\n  },\n  {\n    label: 'Contacts',\n    icon: h(ContactsIcon, { class: 'h-4 w-4' }),\n    count: computed(() => contacts.data?.length),\n  },\n]\n\nconst deals = createListResource({\n  type: 'list',\n  doctype: 'CRM Deal',\n  cache: ['deals', props.organizationId],\n  fields: [\n    'name',\n    'organization',\n    'currency',\n    'annual_revenue',\n    'status',\n    'email',\n    'mobile_no',\n    'deal_owner',\n    'modified',\n  ],\n  filters: {\n    organization: props.organizationId,\n  },\n  orderBy: 'modified desc',\n  pageLength: 20,\n  auto: true,\n})\n\nconst contacts = createListResource({\n  type: 'list',\n  doctype: 'Contact',\n  cache: ['contacts', props.organizationId],\n  fields: [\n    'name',\n    'full_name',\n    'image',\n    'email_id',\n    'mobile_no',\n    'company_name',\n    'modified',\n  ],\n  filters: {\n    company_name: props.organizationId,\n  },\n  orderBy: 'modified desc',\n  pageLength: 20,\n  auto: true,\n})\n\nconst rows = computed(() => {\n  let list = []\n  list = !tabIndex.value ? deals : contacts\n\n  if (!list.data) return []\n\n  return list.data.map((row) => {\n    return !tabIndex.value ? getDealRowObject(row) : getContactRowObject(row)\n  })\n})\n\nconst { getFormattedCurrency } = getMeta('CRM Deal')\n\nconst columns = computed(() => {\n  return tabIndex.value === 0 ? dealColumns : contactColumns\n})\n\nfunction getDealRowObject(deal) {\n  return {\n    name: deal.name,\n    organization: {\n      label: deal.organization,\n      logo: organization.doc?.organization_logo,\n    },\n    annual_revenue: getFormattedCurrency('annual_revenue', deal),\n    status: {\n      label: deal.status,\n      color: getDealStatus(deal.status)?.color,\n    },\n    email: deal.email,\n    mobile_no: deal.mobile_no,\n    deal_owner: {\n      label: deal.deal_owner && getUser(deal.deal_owner).full_name,\n      ...(deal.deal_owner && getUser(deal.deal_owner)),\n    },\n    modified: {\n      label: formatDate(deal.modified),\n      timeAgo: __(timeAgo(deal.modified)),\n    },\n  }\n}\n\nfunction getContactRowObject(contact) {\n  return {\n    name: contact.name,\n    full_name: {\n      label: contact.full_name,\n      image_label: contact.full_name,\n      image: contact.image,\n    },\n    email: contact.email_id,\n    mobile_no: contact.mobile_no,\n    company_name: {\n      label: contact.company_name,\n      logo: organization.doc?.organization_logo,\n    },\n    modified: {\n      label: formatDate(contact.modified),\n      timeAgo: __(timeAgo(contact.modified)),\n    },\n  }\n}\n\nconst dealColumns = [\n  {\n    label: __('Organization'),\n    key: 'organization',\n    width: '11rem',\n  },\n  {\n    label: __('Amount'),\n    key: 'annual_revenue',\n    align: 'right',\n    width: '9rem',\n  },\n  {\n    label: __('Status'),\n    key: 'status',\n    width: '10rem',\n  },\n  {\n    label: __('Email'),\n    key: 'email',\n    width: '12rem',\n  },\n  {\n    label: __('Mobile no'),\n    key: 'mobile_no',\n    width: '11rem',\n  },\n  {\n    label: __('Deal owner'),\n    key: 'deal_owner',\n    width: '10rem',\n  },\n  {\n    label: __('Last modified'),\n    key: 'modified',\n    width: '8rem',\n  },\n]\n\nconst contactColumns = [\n  {\n    label: __('Name'),\n    key: 'full_name',\n    width: '17rem',\n  },\n  {\n    label: __('Email'),\n    key: 'email',\n    width: '12rem',\n  },\n  {\n    label: __('Phone'),\n    key: 'mobile_no',\n    width: '12rem',\n  },\n  {\n    label: __('Organization'),\n    key: 'company_name',\n    width: '12rem',\n  },\n  {\n    label: __('Last modified'),\n    key: 'modified',\n    width: '8rem',\n  },\n]\n</script>\n"],"names":["_hoisted_1","_sfc_render","_ctx","_cache","_openBlock","_createElementBlock","_createElementVNode","props","__props","brand","getSettings","getUser","usersStore","$dialog","globalStore","getDealStatus","statusesStore","doctypeMeta","getMeta","showQuickEntryModal","ref","route","useRoute","router","useRouter","errorTitle","errorMessage","organization","createDocumentResource","err","_a","_b","breadcrumbs","computed","items","view","getView","title","t","usePageMeta","validateFile","file","extn","changeOrganizationImage","call","deleteOrganization","close","website","url","openWebsite","toast","showAddressModal","_organization","_address","sections","createResource","data","getParsedSections","_sections","section","column","field","value","addr","tabIndex","tabs","h","DealsIcon","deals","ContactsIcon","contacts","createListResource","rows","list","row","getContactRowObject","getDealRowObject","getFormattedCurrency","columns","dealColumns","contactColumns","deal","formatDate","timeAgo","contact"],"mappings":"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,eACL,MAAO,OACR,EACD,CACE,MAAO,GAAG,QAAQ,EAClB,IAAK,iBACL,MAAO,QACP,MAAO,MACR,EACD,CACE,MAAO,GAAG,QAAQ,EAClB,IAAK,SACL,MAAO,OACR,EACD,CACE,MAAO,GAAG,OAAO,EACjB,IAAK,QACL,MAAO,OACR,EACD,CACE,MAAO,GAAG,WAAW,EACrB,IAAK,YACL,MAAO,OACR,EACD,CACE,MAAO,GAAG,YAAY,EACtB,IAAK,aACL,MAAO,OACR,EACD,CACE,MAAO,GAAG,eAAe,EACzB,IAAK,WACL,MAAO,MACR,CACH,EAEMC,GAAiB,CACrB,CACE,MAAO,GAAG,MAAM,EAChB,IAAK,YACL,MAAO,OACR,EACD,CACE,MAAO,GAAG,OAAO,EACjB,IAAK,QACL,MAAO,OACR,EACD,CACE,MAAO,GAAG,OAAO,EACjB,IAAK,YACL,MAAO,OACR,EACD,CACE,MAAO,GAAG,cAAc,EACxB,IAAK,eACL,MAAO,OACR,EACD,CACE,MAAO,GAAG,eAAe,EACzB,IAAK,WACL,MAAO,MACR,CACH"}